parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {function ta(a){return a&&a.__esModule?{d:a.default}:{d:a}}var Ca=this;var aa={},nb=function($){return $&&$.Math==Math&&$};aa=nb("object"==typeof globalThis&&globalThis)||nb("object"==typeof window&&window)||nb("object"==typeof self&&self)||nb("object"==typeof Ca&&Ca)||Function("return this")();var ra={};ra=!1;var ya={};ya=function(r){try{return!!r()}catch(t){return!0}};var Da={};Da=!ya(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]});var ma={};ma=function(t){return"object"==typeof t?null!==t:"function"==typeof t};var ob={},Hb=aa.document,df=ma(Hb)&&ma(Hb.createElement);ob=function($){return df?Hb.createElement($):{}};var Gc={};Gc=!Da&&!ya(function(){return 7!=Object.defineProperty(ob("div"),"a",{get:function(){return 7}}).a});var ia={};ia=function(e){if(!ma(e))throw TypeError(String(e)+" is not an object");return e};var Hc={};Hc=function(t,r){if(!ma(t))return t;var e,i;if(r&&"function"==typeof(e=t.toString)&&!ma(i=e.call(t)))return i;if("function"==typeof(e=t.valueOf)&&!ma(i=e.call(t)))return i;if(!r&&"function"==typeof(e=t.toString)&&!ma(i=e.call(t)))return i;throw TypeError("Can't convert object to primitive value")};var Ic=Object.defineProperty,Ja=Da?Ic:function(r,t,e){if(ia(r),t=Hc(t,!0),ia(e),Gc)try{return Ic(r,t,e)}catch($){}if("get"in e||"set"in e)throw TypeError("Accessors not supported");return"value"in e&&(r[t]=e.value),r};var Ea={};Ea=function(e,r){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:r}};var oa={};oa=Da?function(r,e,$){return Ja(r,e,Ea(1,$))}:function(r,e,$){return r[e]=$,r};var Ib={};Ib=function(r,e){try{oa(aa,r,e)}catch($){aa[r]=e}return e};var Xa={},Jc="__core-js_shared__",ef=aa[Jc]||Ib(Jc,{});Xa=ef;var Kc={};(Kc=function(r,e){return Xa[r]||(Xa[r]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:ra?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"});var ja={},ff={}.hasOwnProperty;ja=function(r,$){return ff.call(r,$)};var Lc={},gf=0,hf=Math.random();Lc=function($){return"Symbol("+String(void 0===$?"":$)+")_"+(++gf+hf).toString(36)};var Mc={};Mc=!!Object.getOwnPropertySymbols&&!ya(function(){return!String(Symbol())});var jf={};jf=Mc&&!Symbol.sham&&"symbol"==typeof Symbol.iterator;var da={},pb=Kc("wks"),Ya=aa.Symbol,kf=jf?Ya:Ya&&Ya.withoutSetter||Lc;da=function($){return ja(pb,$)||(Mc&&ja(Ya,$)?pb[$]=Ya[$]:pb[$]=kf("Symbol."+$)),pb[$]};var Jb={},lf=da("toStringTag"),Nc={};Nc[lf]="z",Jb="[object z]"===String(Nc);var Kb={},mf=Function.toString;"function"!=typeof Xa.inspectSource&&(Xa.inspectSource=function(r){return mf.call(r)}),Kb=Xa.inspectSource;var nf={},Oc=aa.WeakMap;nf="function"==typeof Oc&&/native code/.test(Kb(Oc));var Lb={},Pc=Kc("keys");Lb=function($){return Pc[$]||(Pc[$]=Lc($))};var Mb={};Mb={};var Qc,Nb,Rc,ka={},of=aa.WeakMap,pf=function($){return Rc($)?Nb($):Qc($,{})},qf=function($){return function(r){var e;if(!ma(r)||(e=Nb(r)).type!==$)throw TypeError("Incompatible receiver, "+$+" required");return e}};if(nf){var Oa=new of,rf=Oa.get,sf=Oa.has,tf=Oa.set;Qc=function($,r){return tf.call(Oa,$,r),r},Nb=function($){return rf.call(Oa,$)||{}},Rc=function($){return sf.call(Oa,$)}}else{var Za=Lb("state");Mb[Za]=!0,Qc=function($,r){return oa($,Za,r),r},Nb=function($){return ja($,Za)?$[Za]:{}},Rc=function($){return ja($,Za)}}ka={set:Qc,get:Nb,has:Rc,enforce:pf,getterFor:qf};var Fa={},uf=ka.get,vf=ka.enforce,wf=String(String).split("String");(Fa=function(e,t,r,$){var a=!!$&&!!$.unsafe,n=!!$&&!!$.enumerable,s=!!$&&!!$.noTargetGet;"function"==typeof r&&("string"!=typeof t||ja(r,"name")||oa(r,"name",t),vf(r).source=wf.join("string"==typeof t?t:"")),e!==aa?(a?!s&&e[t]&&(n=!0):delete e[t],n?e[t]=r:oa(e,t,r)):n?e[t]=r:Ib(t,r)})(Function.prototype,"toString",function(){return"function"==typeof this&&uf(this).source||Kb(this)});var Ga={},xf={}.toString;Ga=function(r){return xf.call(r).slice(8,-1)};var Ob={},yf=da("toStringTag"),zf="Arguments"==Ga(function(){return arguments}()),Af=function(r,$){try{return r[$]}catch(s){}};Ob=Jb?Ga:function(r){var $,s,a;return void 0===r?"Undefined":null===r?"Null":"string"==typeof(s=Af($=Object(r),yf))?s:zf?Ga($):"Object"==(a=Ga($))&&"function"==typeof $.callee?"Arguments":a};var Bf={};Bf=Jb?{}.toString:function(){return"[object "+Ob(this)+"]"};Jb||Fa(Object.prototype,"toString",Bf,{unsafe:!0});var Pb={},Cf=Math.ceil,Df=Math.floor;Pb=function($){return isNaN($=+$)?0:($>0?Df:Cf)($)};var Qb={};Qb=function(r){if(null==r)throw TypeError("Can't call method on "+r);return r};var Ef={},Sc=function(e){return function(r,t){var $,a,c=String(Qb(r)),o=Pb(t),i=c.length;return o<0||o>=i?e?"":void 0:($=c.charCodeAt(o))<55296||$>56319||o+1===i||(a=c.charCodeAt(o+1))<56320||a>57343?e?c.charAt(o):$:e?c.slice(o,o+2):a-56320+($-55296<<10)+65536}};Ef={codeAt:Sc(!1),charAt:Sc(!0)};var Tc={}.propertyIsEnumerable,Uc=Object.getOwnPropertyDescriptor,Ff=Uc&&!Tc.call({1:2},1),Gf=Ff?function(r){var e=Uc(this,r);return!!e&&e.enumerable}:Tc;var Hf={},If="".split;Hf=ya(function(){return!Object("z").propertyIsEnumerable(0)})?function(r){return"String"==Ga(r)?If.call(r,""):Object(r)}:Object;var qb={};qb=function(e){return Hf(Qb(e))};var Vc=Object.getOwnPropertyDescriptor,Rb=Da?Vc:function(r,e){if(r=qb(r),e=Hc(e,!0),Gc)try{return Vc(r,e)}catch($){}if(ja(r,e))return Ea(!Gf.call(r,e),r[e])};var Sb={};Sb=aa;var pa={},Wc=function($){return"function"==typeof $?$:void 0};pa=function($,a){return arguments.length<2?Wc(Sb[$])||Wc(aa[$]):Sb[$]&&Sb[$][a]||aa[$]&&aa[$][a]};var Xc={},Jf=Math.min;Xc=function($){return $>0?Jf(Pb($),9007199254740991):0};var Kf={},Lf=Math.max,Mf=Math.min;Kf=function($,r){var a=Pb($);return a<0?Lf(a+r,0):Mf(a,r)};var Nf={},Yc=function(e){return function(r,$,t){var n,o=qb(r),a=Xc(o.length),b=Kf(t,a);if(e&&$!=$){for(;a>b;)if((n=o[b++])!=n)return!0}else for(;a>b;b++)if((e||b in o)&&o[b]===$)return e||b||0;return!e&&-1}};Nf={includes:Yc(!0),indexOf:Yc(!1)};var Zc={},Of=Nf.indexOf;Zc=function(r,$){var e,i=qb(r),a=0,n=[];for(e in i)!ja(Mb,e)&&ja(i,e)&&n.push(e);for(;$.length>a;)ja(i,e=$[a++])&&(~Of(n,e)||n.push(e));return n};var rb={};rb=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];var Pf=rb.concat("length","prototype"),Qf=Object.getOwnPropertyNames||function(e){return Zc(e,Pf)};var Rf=Object.getOwnPropertySymbols;var Sf={};Sf=pa("Reflect","ownKeys")||function(e){var r=Qf(ia(e)),$=Rf;return $?r.concat($(e)):r};var Tf={};Tf=function(r,e){for(var $=Sf(e),o=Ja,a=Rb,d=0;d<$.length;d++){var t=$[d];ja(r,t)||o(r,t,a(e,t))}};var $c={},Uf=/#|\.prototype\./,$a=function($,r){var i=Wf[Vf($)];return i==Yf||i!=Xf&&("function"==typeof r?ya(r):!!r)},Vf=$a.normalize=function($){return String($).replace(Uf,".").toLowerCase()},Wf=$a.data={},Xf=$a.NATIVE="N",Yf=$a.POLYFILL="P";$c=$a;var na={},Zf=Rb;na=function(r,e){var $,a,o,t,l,n=r.target,i=r.global,q=r.stat;if($=i?aa:q?aa[n]||Ib(n,{}):(aa[n]||{}).prototype)for(a in e){if(t=e[a],o=r.noTargetGet?(l=Zf($,a))&&l.value:$[a],!$c(i?a:n+(q?".":"#")+a,r.forced)&&void 0!==o){if(typeof t==typeof o)continue;Tf(t,o)}(r.sham||o&&o.sham)&&oa(t,"sham",!0),Fa($,a,t,r)}};var $f={};$f=function(e){return Object(Qb(e))};var _f={};_f=!ya(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype});var _a={},_c=Lb("IE_PROTO"),ag=Object.prototype;_a=_f?Object.getPrototypeOf:function(e){return e=$f(e),ja(e,_c)?e[_c]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ag:null};var sb,bg,cg,Tb={},ad=da("iterator"),dg=!1,eg=function(){return this};[].keys&&("next"in(cg=[].keys())?(bg=_a(_a(cg)))!==Object.prototype&&(sb=bg):dg=!0),null==sb&&(sb={}),ra||ja(sb,ad)||oa(sb,ad,eg),Tb={IteratorPrototype:sb,BUGGY_SAFARI_ITERATORS:dg};var fg={};fg=Object.keys||function(e){return Zc(e,rb)};var gg={};gg=Da?Object.defineProperties:function(e,r){ia(e);for(var $,d=fg(r),t=d.length,a=0;t>a;)Ja(e,$=d[a++],r[$]);return e};var Ub={};Ub=pa("document","documentElement");var bd,tb={},cd=">",dd="<",Vb="prototype",Wb="script",ed=Lb("IE_PROTO"),Xb=function(){},fd=function($){return dd+Wb+cd+$+dd+"/"+Wb+cd},hg=function($){$.write(fd("")),$.close();var r=$.parentWindow.Object;return $=null,r},ig=function(){var $,r=ob("iframe"),e="java"+Wb+":";return r.style.display="none",Ub.appendChild(r),r.src=String(e),($=r.contentWindow.document).open(),$.write(fd("document.F=Object")),$.close(),$.F},Yb=function(){try{bd=document.domain&&new ActiveXObject("htmlfile")}catch(r){}Yb=bd?hg(bd):ig();for(var $=rb.length;$--;)delete Yb[Vb][rb[$]];return Yb()};Mb[ed]=!0,tb=Object.create||function($,r){var e;return null!==$?(Xb[Vb]=ia($),e=new Xb,Xb[Vb]=null,e[ed]=$):e=Yb(),void 0===r?e:gg(e,r)};var ub={},jg=Ja,gd=da("toStringTag");ub=function($,r,e){$&&!ja($=e?$:$.prototype,gd)&&jg($,gd,{configurable:!0,value:r})};var Ka={};Ka={};var hd={},kg=Tb.IteratorPrototype,lg=function(){return this};hd=function(r,e,t){var $=e+" Iterator";return r.prototype=tb(kg,{next:Ea(1,t)}),ub(r,$,!1,!0),Ka[$]=lg,r};var mg={};mg=function(r){if(!ma(r)&&null!==r)throw TypeError("Can't set "+String(r)+" as a prototype");return r};var vb={};vb=Object.setPrototypeOf||("__proto__"in{}?function(){var e,r=!1,t={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(o){}return function(t,o){return ia(t),mg(o),r?e.call(t,o):t.__proto__=o,t}}():void 0);var id={},Zb=Tb.IteratorPrototype,wb=Tb.BUGGY_SAFARI_ITERATORS,ab=da("iterator"),jd="keys",xb="values",kd="entries",ld=function(){return this};id=function(r,$,a,e,t,p,o){hd(a,$,e);var n,C,J,v=function(r){if(r===t&&u)return u;if(!wb&&r in l)return l[r];switch(r){case jd:case xb:case kd:return function(){return new a(this,r)};}return function(){return new a(this)}},i=$+" Iterator",s=!1,l=r.prototype,c=l[ab]||l["@@iterator"]||t&&l[t],u=!wb&&c||v(t),I="Array"==$&&l.entries||c;if(I&&(n=_a(I.call(new r)),Zb!==Object.prototype&&n.next&&(ra||_a(n)===Zb||(vb?vb(n,Zb):"function"!=typeof n[ab]&&oa(n,ab,ld)),ub(n,i,!0,!0),ra&&(Ka[i]=ld))),t==xb&&c&&c.name!==xb&&(s=!0,u=function(){return c.call(this)}),ra&&!o||l[ab]===u||oa(l,ab,u),Ka[$]=u,t)if(C={values:v(xb),keys:p?u:v(jd),entries:v(kd)},o)for(J in C)!wb&&!s&&J in l||Fa(l,J,C[J]);else na({target:$,proto:!0,forced:wb||s},C);return C};var ng=Ef.charAt,md="String Iterator",og=ka.set,pg=ka.getterFor(md);id(String,"String",function(t){og(this,{type:md,string:String(t),index:0})},function(){var t,e=pg(this),r=e.string,$=e.index;return $>=r.length?{value:void 0,done:!0}:(t=ng(r,$),e.index+=t.length,{value:t,done:!1})});var nd={};nd={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};var $b={},_b=da("unscopables"),ac=Array.prototype;null==ac[_b]&&Ja(ac,_b,{configurable:!0,value:tb(null)}),$b=function(e){ac[_b][e]=!0};var bb={},od="Array Iterator",qg=ka.set,rg=ka.getterFor(od);bb=id(Array,"Array",function(e,r){qg(this,{type:od,target:qb(e),index:0,kind:r})},function(){var e=rg(this),r=e.target,a=e.kind,$=e.index++;return!r||$>=r.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==a?{value:$,done:!1}:"values"==a?{value:r[$],done:!1}:{value:[$,r[$]],done:!1}},"values"),Ka.Arguments=Ka.Array,$b("keys"),$b("values"),$b("entries");var bc=da("iterator"),pd=da("toStringTag"),cc=bb.values;for(var dc in nd){var qd=aa[dc],za=qd&&qd.prototype;if(za){if(za[bc]!==cc)try{oa(za,bc,cc)}catch(error){za[bc]=cc}if(za[pd]||oa(za,pd,dc),nd[dc])for(var Pa in bb)if(za[Pa]!==bb[Pa])try{oa(za,Pa,bb[Pa])}catch(error){za[Pa]=bb[Pa]}}}var Aa={};Aa=aa.Promise;var rd={};rd=function(e,r,$){for(var n in r)Fa(e,n,r[n],$);return e};var sg={},sd=da("species");sg=function($){var e=pa($),r=Ja;Da&&e&&!e[sd]&&r(e,sd,{configurable:!0,get:function(){return this}})};var Ba={};Ba=function(r){if("function"!=typeof r)throw TypeError(String(r)+" is not a function");return r};var td={};td=function(o,r,n){if(!(o instanceof r))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return o};var tg={},ug=da("iterator"),vg=Array.prototype;tg=function(r){return void 0!==r&&(Ka.Array===r||vg[ug]===r)};var ec={};ec=function(n,r,t){if(Ba(n),void 0===r)return n;switch(t){case 0:return function(){return n.call(r)};case 1:return function(t){return n.call(r,t)};case 2:return function(t,e){return n.call(r,t,e)};case 3:return function(t,e,u){return n.call(r,t,e,u)};}return function(){return n.apply(r,arguments)}};var fc={},wg=da("iterator");fc=function(r){if(null!=r)return r[wg]||r["@@iterator"]||Ka[Ob(r)]};var xg={};xg=function(r,$,a,t){try{return t?$(ia(a)[0],a[1]):$(a)}catch(n){var e=r.return;throw void 0!==e&&ia(e.call(r)),n}};var cb={},db=function(r,e){this.stopped=r,this.result=e},yg=cb=function(r,e,t,$,a){var n,i,o,l,j,s,O,G=ec(e,t,$?2:1);if(a)n=r;else{if("function"!=typeof(i=fc(r)))throw TypeError("Target is not iterable");if(tg(i)){for(o=0,l=Xc(r.length);l>o;o++)if((j=$?G(ia(O=r[o])[0],O[1]):G(r[o]))&&j instanceof db)return j;return new db(!1)}n=i.call(r)}for(s=n.next;!(O=s.call(n)).done;)if("object"==typeof(j=xg(n,G,O.value,$))&&j&&j instanceof db)return j;return new db(!1)};yg.stop=function(r){return new db(!0,r)};var zg={},ud=da("iterator"),Ag=!1;try{var Bg=0,vd={next:function(){return{done:!!Bg++}},return:function(){Ag=!0}};vd[ud]=function(){return this},Array.from(vd,function(){throw 2})}catch(error){}zg=function(r,$){if(!$&&!Ag)return!1;var t=!1;try{var n={};n[ud]=function(){return{next:function(){return{done:t=!0}}}},r(n)}catch(error){}return t};var wd={},Cg=da("species");wd=function($,r){var n,a=ia($).constructor;return void 0===a||null==(n=ia(a)[Cg])?r:Ba(n)};var yb={};yb=pa("navigator","userAgent")||"";var xd={};xd=/(iphone|ipod|ipad).*applewebkit/i.test(yb);var Dg,Eg,yd,zd={},gc=aa.location,Ad=aa.setImmediate,Bd=aa.clearImmediate,Cd=aa.process,Dd=aa.MessageChannel,hc=aa.Dispatch,ic=0,eb={},Ed="onreadystatechange",jc=function($){if(eb.hasOwnProperty($)){var n=eb[$];delete eb[$],n()}},kc=function($){return function(){jc($)}},Fd=function($){jc($.data)},Gd=function($){aa.postMessage($+"",gc.protocol+"//"+gc.host)};Ad&&Bd||(Ad=function($){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return eb[++ic]=function(){("function"==typeof $?$:Function($)).apply(void 0,n)},Dg(ic),ic},Bd=function($){delete eb[$]},"process"==Ga(Cd)?Dg=function($){Cd.nextTick(kc($))}:hc&&hc.now?Dg=function($){hc.now(kc($))}:Dd&&!xd?(yd=(Eg=new Dd).port2,Eg.port1.onmessage=Fd,Dg=ec(yd.postMessage,yd,1)):!aa.addEventListener||"function"!=typeof postMessage||aa.importScripts||ya(Gd)||"file:"===gc.protocol?Dg=Ed in ob("script")?function($){Ub.appendChild(ob("script"))[Ed]=function(){Ub.removeChild(this),jc($)}}:function($){setTimeout(kc($),0)}:(Dg=Gd,aa.addEventListener("message",Fd,!1))),zd={set:Ad,clear:Bd};var zb,fb,Hd,Id,Fg,Jd,Kd,Gg,Ld={},Hg=Rb,Ig=zd.set,Md=aa.MutationObserver||aa.WebKitMutationObserver,lc=aa.process,mc=aa.Promise,Nd="process"==Ga(lc),Od=Hg(aa,"queueMicrotask"),Pd=Od&&Od.value;Pd||(zb=function(){var r,$;for(Nd&&(r=lc.domain)&&r.exit();fb;){$=fb.fn,fb=fb.next;try{$()}catch(a){throw fb?Id():Hd=void 0,a}}Hd=void 0,r&&r.enter()},Nd?Id=function(){lc.nextTick(zb)}:Md&&!xd?(Fg=!0,Jd=document.createTextNode(""),new Md(zb).observe(Jd,{characterData:!0}),Id=function(){Jd.data=Fg=!Fg}):mc&&mc.resolve?(Kd=mc.resolve(void 0),Gg=Kd.then,Id=function(){Gg.call(Kd,zb)}):Id=function(){Ig.call(aa,zb)}),Ld=Pd||function(r){var $={fn:r,next:void 0};Hd&&(Hd.next=$),fb||(fb=$,Id()),Hd=$};var La={},Jg=function(r){var i,$;this.promise=new r(function(r,n){if(void 0!==i||void 0!==$)throw TypeError("Bad Promise constructor");i=r,$=n}),this.resolve=Ba(i),this.reject=Ba($)};La.f=function(r){return new Jg(r)};var Ab={};Ab=function(r,e){if(ia(r),ma(e)&&e.constructor===r)return e;var $=La.f(r);return(0,$.resolve)(e),$.promise};var Kg={};Kg=function(r,$){var e=aa.console;e&&e.error&&(1===arguments.length?e.error(r):e.error(r,$))};var Qa={};Qa=function(r){try{return{error:!1,value:r()}}catch(e){return{error:!0,value:e}}};var nc,Qd,Rd={},Sd=aa.process,Td=Sd&&Sd.versions,Ud=Td&&Td.v8;Ud?Qd=(nc=Ud.split("."))[0]+nc[1]:yb&&(!(nc=yb.match(/Edge\/(\d+)/))||nc[1]>=74)&&(nc=yb.match(/Chrome\/(\d+)/))&&(Qd=nc[1]),Rd=Qd&&+Qd;var Vd,Lg,Wd,Mg,Xd=zd.set,Ng=da("species"),ua="Promise",Yd=ka.get,Og=ka.set,Pg=ka.getterFor(ua),ha=Aa,Zd=aa.TypeError,oc=aa.document,Bb=aa.process,$d=pa("fetch"),gb=La.f,Qg=gb,hb="process"==Ga(Bb),Rg=!!(oc&&oc.createEvent&&aa.dispatchEvent),_d="unhandledrejection",Sg="rejectionhandled",be=0,ge=1,Tg=2,pc=1,je=2,ib=$c(ua,function(){if(!(Kb(ha)!==String(ha))){if(66===Rd)return!0;if(!hb&&"function"!=typeof PromiseRejectionEvent)return!0}if(ra&&!ha.prototype.finally)return!0;if(Rd>=51&&/native code/.test(ha))return!1;var $=ha.resolve(1),t=function($){$(function(){},function(){})};return($.constructor={})[Ng]=t,!($.then(function(){})instanceof t)}),Ug=ib||!zg(function($){ha.all($).catch(function(){})}),ke=function($){var t;return!(!ma($)||"function"!=typeof(t=$.then))&&t},qc=function($,t,r){if(!t.notified){t.notified=!0;var e=t.reactions;Ld(function(){for(var a=t.value,n=t.state==ge,i=0;e.length>i;){var o,I,b,v=e[i++],G=n?v.ok:v.fail,s=v.resolve,c=v.reject,l=v.domain;try{G?(n||(t.rejection===je&&Wg($,t),t.rejection=pc),!0===G?o=a:(l&&l.enter(),o=G(a),l&&(l.exit(),b=!0)),o===v.promise?c(Zd("Promise-chain cycle")):(I=ke(o))?I.call(o,s,c):s(o)):c(a)}catch(u){l&&!b&&l.exit(),c(u)}}t.reactions=[],t.notified=!1,r&&!t.rejection&&Vg($,t)})}},me=function($,t,r){var e,a;Rg?((e=oc.createEvent("Event")).promise=t,e.reason=r,e.initEvent($,!1,!0),aa.dispatchEvent(e)):e={promise:t,reason:r},(a=aa["on"+$])?a(e):$===_d&&Kg("Unhandled promise rejection",r)},Vg=function($,t){Xd.call(aa,function(){var r,e=t.value;if(pe(t)&&(r=Qa(function(){hb?Bb.emit("unhandledRejection",e,$):me(_d,$,e)}),t.rejection=hb||pe(t)?je:pc,r.error))throw r.value})},pe=function($){return $.rejection!==pc&&!$.parent},Wg=function($,t){Xd.call(aa,function(){hb?Bb.emit("rejectionHandled",$):me(Sg,$,t.value)})},Ra=function($,t,r,e){return function(a){$(t,r,a,e)}},Sa=function($,t,r,e){t.done||(t.done=!0,e&&(t=e),t.value=r,t.state=Tg,qc($,t,!0))},rc=function($,t,r,e){if(!t.done){t.done=!0,e&&(t=e);try{if($===r)throw Zd("Promise can't be resolved itself");var a=ke(r);a?Ld(function(){var e={done:!1};try{a.call(r,Ra(rc,$,e,t),Ra(Sa,$,e,t))}catch(n){Sa($,e,n,t)}}):(t.value=r,t.state=ge,qc($,t,!1))}catch(n){Sa($,{done:!1},n,t)}}};ib&&(ha=function($){td(this,ha,ua),Ba($),Vd.call(this);var t=Yd(this);try{$(Ra(rc,this,t),Ra(Sa,this,t))}catch(r){Sa(this,t,r)}},(Vd=function($){Og(this,{type:ua,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:be,value:void 0})}).prototype=rd(ha.prototype,{then:function($,t){var r=Pg(this),e=gb(wd(this,ha));return e.ok="function"!=typeof $||$,e.fail="function"==typeof t&&t,e.domain=hb?Bb.domain:void 0,r.parent=!0,r.reactions.push(e),r.state!=be&&qc(this,r,!1),e.promise},catch:function($){return this.then(void 0,$)}}),Lg=function(){var $=new Vd,t=Yd($);this.promise=$,this.resolve=Ra(rc,$,t),this.reject=Ra(Sa,$,t)},La.f=gb=function($){return $===ha||$===Wd?new Lg($):Qg($)},ra||"function"!=typeof Aa||(Mg=Aa.prototype.then,Fa(Aa.prototype,"then",function($,t){var r=this;return new ha(function($,t){Mg.call(r,$,t)}).then($,t)},{unsafe:!0}),"function"==typeof $d&&na({global:!0,enumerable:!0,forced:!0},{fetch:function($){return Ab(ha,$d.apply(aa,arguments))}}))),na({global:!0,wrap:!0,forced:ib},{Promise:ha}),ub(ha,ua,!1,!0),sg(ua),Wd=pa(ua),na({target:ua,stat:!0,forced:ib},{reject:function($){var t=gb(this);return t.reject.call(void 0,$),t.promise}}),na({target:ua,stat:!0,forced:ra||ib},{resolve:function($){return Ab(ra&&this===Wd?ha:this,$)}}),na({target:ua,stat:!0,forced:Ug},{all:function($){var t=this,r=gb(t),e=r.resolve,a=r.reject,n=Qa(function(){var r=Ba(t.resolve),n=[],i=0,o=1;cb($,function($){var I=i++,b=!1;n.push(void 0),o++,r.call(t,$).then(function($){b||(b=!0,n[I]=$,--o||e(n))},a)}),--o||e(n)});return n.error&&a(n.value),r.promise},race:function($){var t=this,r=gb(t),e=r.reject,a=Qa(function(){var a=Ba(t.resolve);cb($,function($){a.call(t,$).then(r.resolve,e)})});return a.error&&e(a.value),r.promise}});na({target:"Promise",stat:!0},{allSettled:function(r){var e=this,i=La.f(e),a=i.resolve,$=i.reject,t=Qa(function(){var i=Ba(e.resolve),$=[],t=0,n=1;cb(r,function(r){var l=t++,o=!1;$.push(void 0),n++,i.call(e,r).then(function(r){o||(o=!0,$[l]={status:"fulfilled",value:r},--n||a($))},function(r){o||(o=!0,$[l]={status:"rejected",reason:r},--n||a($))})}),--n||a($)});return t.error&&$(t.value),i.promise}});var Xg=!!Aa&&ya(function(){Aa.prototype.finally.call({then:function(){}},function(){})});na({target:"Promise",proto:!0,real:!0,forced:Xg},{finally:function(r){var e=wd(this,pa("Promise")),$="function"==typeof r;return this.then($?function($){return Ab(e,r()).then(function(){return $})}:r,$?function($){return Ab(e,r()).then(function(){throw $})}:r)}}),ra||"function"!=typeof Aa||Aa.prototype.finally||Fa(Aa.prototype,"finally",pa("Promise").prototype.finally);var Yg=ka.set,Zg=ka.getterFor("AggregateError"),Ta=function(r,e){var $=this;if(!($ instanceof Ta))return new Ta(r,e);vb&&($=vb(new Error(e),_a($)));var t=[];return cb(r,t.push,t),Da?Yg($,{errors:t,type:"AggregateError"}):$.errors=t,void 0!==e&&oa($,"message",String(e)),$};Ta.prototype=tb(Error.prototype,{constructor:Ea(5,Ta),message:Ea(5,""),name:Ea(5,"AggregateError")}),Da&&Ja(Ta.prototype,"errors",{get:function(){return Zg(this).errors},configurable:!0}),na({global:!0},{AggregateError:Ta});na({target:"Promise",stat:!0},{try:function(r){var e=La.f(this),i=Qa(r);return(i.error?e.reject:e.resolve)(i.value),e.promise}});var qe="No one promise resolved";na({target:"Promise",stat:!0},{any:function(r){var e=this,$=La.f(e),a=$.resolve,i=$.reject,t=Qa(function(){var $=Ba(e.resolve),t=[],n=0,p=1,o=!1;cb(r,function(r){var l=n++,N=!1;t.push(void 0),p++,$.call(e,r).then(function(r){N||o||(o=!0,a(r))},function(r){N||o||(N=!0,t[l]=r,--p||i(new(pa("AggregateError"))(t,qe)))})}),--p||i(new(pa("AggregateError"))(t,qe))});return t.error&&i(t.value),$.promise}});var we={},$g=da("iterator");we=!ya(function(){var r=new URL("b?a=1&b=2&c=3","http://a"),a=r.searchParams,e="";return r.pathname="c%20d",a.forEach(function(r,$){a.delete("b"),e+=$+r}),ra&&!r.toJSON||!a.sort||"http://a/c%20d?a=1&c=3"!==r.href||"3"!==a.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!a[$g]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==e||"x"!==new URL("http://x",void 0).host});var xe={};xe=function(t){var r=fc(t);if("function"!=typeof r)throw TypeError(String(t)+" is not iterable");return ia(r.call(t))};var ye=pa("fetch"),sc=pa("Headers"),_g=da("iterator"),Ua="URLSearchParams",ze=Ua+"Iterator",Ae=ka.set,va=ka.getterFor(Ua),ah=ka.getterFor(ze),bh=/\+/g,Be=Array(4),ch=function(e){return Be[e-1]||(Be[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},dh=function(e){try{return decodeURIComponent(e)}catch(r){return e}},Ce=function(e){var r=e.replace(bh," "),a=4;try{return decodeURIComponent(r)}catch($){for(;a;)r=r.replace(ch(a--),dh);return r}},eh=/[!'()~]|%20/g,fh={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},gh=function(e){return fh[e]},De=function(e){return encodeURIComponent(e).replace(eh,gh)},Ee=function(e,r){if(r)for(var a,$,t=r.split("&"),n=0;n<t.length;)(a=t[n++]).length&&($=a.split("="),e.push({key:Ce($.shift()),value:Ce($.join("="))}))},hh=function(e){this.entries.length=0,Ee(this.entries,e)},Va=function(e,r){if(e<r)throw TypeError("Not enough arguments")},tc=hd(function(e,r){Ae(this,{type:ze,iterator:xe(va(e).entries),kind:r})},"Iterator",function(){var e=ah(this),r=e.kind,a=e.iterator.next(),$=a.value;return a.done||(a.value="keys"===r?$.key:"values"===r?$.value:[$.key,$.value]),a}),Cb=function(){td(this,Cb,Ua);var e,r,a,$,t,n,p,g,s,i=arguments.length>0?arguments[0]:void 0,l=[];if(Ae(this,{type:Ua,entries:l,updateURL:function(){},updateSearchParams:hh}),void 0!==i)if(ma(i)){if("function"==typeof(e=fc(i)))for(a=(r=e.call(i)).next;!($=a.call(r)).done;){if((p=(n=(t=xe(ia($.value))).next).call(t)).done||(g=n.call(t)).done||!n.call(t).done)throw TypeError("Expected sequence with length 2");l.push({key:p.value+"",value:g.value+""})}else for(s in i)ja(i,s)&&l.push({key:s,value:i[s]+""});}else Ee(l,"string"==typeof i?"?"===i.charAt(0)?i.slice(1):i:i+"")},Db=Cb.prototype;rd(Db,{append:function(e,r){Va(arguments.length,2);var a=va(this);a.entries.push({key:e+"",value:r+""}),a.updateURL()},delete:function(e){Va(arguments.length,1);for(var r=va(this),a=r.entries,$=e+"",t=0;t<a.length;)a[t].key===$?a.splice(t,1):t++;r.updateURL()},get:function(e){Va(arguments.length,1);for(var r=va(this).entries,a=e+"",$=0;$<r.length;$++)if(r[$].key===a)return r[$].value;return null},getAll:function(e){Va(arguments.length,1);for(var r=va(this).entries,a=e+"",$=[],t=0;t<r.length;t++)r[t].key===a&&$.push(r[t].value);return $},has:function(e){Va(arguments.length,1);for(var r=va(this).entries,a=e+"",$=0;$<r.length;)if(r[$++].key===a)return!0;return!1},set:function(e,r){Va(arguments.length,1);for(var a,$=va(this),t=$.entries,n=!1,p=e+"",g=r+"",s=0;s<t.length;s++)(a=t[s]).key===p&&(n?t.splice(s--,1):(n=!0,a.value=g));n||t.push({key:p,value:g}),$.updateURL()},sort:function(){var e,r,a,$=va(this),t=$.entries,n=t.slice();for(t.length=0,a=0;a<n.length;a++){for(e=n[a],r=0;r<a;r++)if(t[r].key>e.key){t.splice(r,0,e);break}r===a&&t.push(e)}$.updateURL()},forEach:function(e){for(var r,a=va(this).entries,$=ec(e,arguments.length>1?arguments[1]:void 0,3),t=0;t<a.length;)$((r=a[t++]).value,r.key,this)},keys:function(){return new tc(this,"keys")},values:function(){return new tc(this,"values")},entries:function(){return new tc(this,"entries")}},{enumerable:!0}),Fa(Db,_g,Db.entries),Fa(Db,"toString",function(){for(var e,r=va(this).entries,a=[],$=0;$<r.length;)e=r[$++],a.push(De(e.key)+"="+De(e.value));return a.join("&")},{enumerable:!0}),ub(Cb,Ua),na({global:!0,forced:!we},{URLSearchParams:Cb}),we||"function"!=typeof ye||"function"!=typeof sc||na({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var r,a,$,t=[e];return arguments.length>1&&(r=arguments[1],ma(r)&&(a=r.body,Ob(a)===Ua&&(($=r.headers?new sc(r.headers):new sc).has("content-type")||$.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),r=tb(r,{body:Ea(0,String(a)),headers:Ea(0,$)}))),t.push(r)),ye.apply(this,t)}});var ea="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==ea&&ea,la={searchParams:"URLSearchParams"in ea,iterable:"Symbol"in ea&&"iterator"in Symbol,blob:"FileReader"in ea&&"Blob"in ea&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in ea,arrayBuffer:"ArrayBuffer"in ea};function ih(e){return e&&DataView.prototype.isPrototypeOf(e)}if(la.arrayBuffer)var jh=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],kh=ArrayBuffer.isView||function(e){return e&&jh.indexOf(Object.prototype.toString.call(e))>-1};function jb(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function uc(e){return"string"!=typeof e&&(e=String(e)),e}function vc(e){var r={next:function(){var r=e.shift();return{done:void 0===r,value:r}}};return la.iterable&&(r[Symbol.iterator]=function(){return r}),r}function ca(e){this.map={},e instanceof ca?e.forEach(function(e,r){this.append(r,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(r){this.append(r,e[r])},this)}function wc(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function Fe(e){return new Promise(function(r,t){e.onload=function(){r(e.result)},e.onerror=function(){t(e.error)}})}function lh(e){var r=new FileReader,t=Fe(r);return r.readAsArrayBuffer(e),t}function mh(e){var r=new FileReader,t=Fe(r);return r.readAsText(e),t}function nh(e){for(var r=new Uint8Array(e),t=new Array(r.length),o=0;o<r.length;o++)t[o]=String.fromCharCode(r[o]);return t.join("")}function Ge(e){if(e.slice)return e.slice(0);var r=new Uint8Array(e.byteLength);return r.set(new Uint8Array(e)),r.buffer}function He(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:la.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:la.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:la.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():la.arrayBuffer&&la.blob&&ih(e)?(this._bodyArrayBuffer=Ge(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):la.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||kh(e))?this._bodyArrayBuffer=Ge(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):la.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},la.blob&&(this.blob=function(){var e=wc(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=wc(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(lh)}),this.text=function(){var e=wc(this);if(e)return e;if(this._bodyBlob)return mh(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(nh(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},la.formData&&(this.formData=function(){return this.text().then(qh)}),this.json=function(){return this.text().then(JSON.parse)},this}ca.prototype.append=function(e,r){e=jb(e),r=uc(r);var t=this.map[e];this.map[e]=t?t+", "+r:r},ca.prototype.delete=function(e){delete this.map[jb(e)]},ca.prototype.get=function(e){return e=jb(e),this.has(e)?this.map[e]:null},ca.prototype.has=function(e){return this.map.hasOwnProperty(jb(e))},ca.prototype.set=function(e,r){this.map[jb(e)]=uc(r)},ca.prototype.forEach=function(e,r){for(var t in this.map)this.map.hasOwnProperty(t)&&e.call(r,this.map[t],t,this)},ca.prototype.keys=function(){var e=[];return this.forEach(function(r,t){e.push(t)}),vc(e)},ca.prototype.values=function(){var e=[];return this.forEach(function(r){e.push(r)}),vc(e)},ca.prototype.entries=function(){var e=[];return this.forEach(function(r,t){e.push([t,r])}),vc(e)},la.iterable&&(ca.prototype[Symbol.iterator]=ca.prototype.entries);var oh=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ph(e){var r=e.toUpperCase();return oh.indexOf(r)>-1?r:e}function Ma(e,r){if(!(this instanceof Ma))throw new TypeError("Please use the \"new\" operator, this DOM object constructor cannot be called as a function.");var t=(r=r||{}).body;if(e instanceof Ma){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,r.headers||(this.headers=new ca(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,t||null==e._bodyInit||(t=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=r.credentials||this.credentials||"same-origin",!r.headers&&this.headers||(this.headers=new ca(r.headers)),this.method=ph(r.method||this.method||"GET"),this.mode=r.mode||this.mode||null,this.signal=r.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&t)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(t),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==r.cache&&"no-cache"!==r.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+new Date().getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}function qh(e){var r=new FormData;return e.trim().split("&").forEach(function(e){if(e){var t=e.split("="),o=t.shift().replace(/\+/g," "),a=t.join("=").replace(/\+/g," ");r.append(decodeURIComponent(o),decodeURIComponent(a))}}),r}function rh(e){var r=new ca;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var t=e.split(":"),o=t.shift().trim();if(o){var a=t.join(":").trim();r.append(o,a)}}),r}function wa(e,r){if(!(this instanceof wa))throw new TypeError("Please use the \"new\" operator, this DOM object constructor cannot be called as a function.");r||(r={}),this.type="default",this.status=void 0===r.status?200:r.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in r?r.statusText:"",this.headers=new ca(r.headers),this.url=r.url||"",this._initBody(e)}Ma.prototype.clone=function(){return new Ma(this,{body:this._bodyInit})},He.call(Ma.prototype),He.call(wa.prototype),wa.prototype.clone=function(){return new wa(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new ca(this.headers),url:this.url})},wa.error=function(){var e=new wa(null,{status:0,statusText:""});return e.type="error",e};var sh=[301,302,303,307,308];wa.redirect=function(e,r){if(-1===sh.indexOf(r))throw new RangeError("Invalid status code");return new wa(null,{status:r,headers:{location:e}})};var Wa=ea.DOMException;try{new Wa}catch(err){Wa=function(e,r){this.message=e,this.name=r;var t=Error(e);this.stack=t.stack},Wa.prototype=Object.create(Error.prototype),Wa.prototype.constructor=Wa}function Ie(e,r){return new Promise(function(t,o){var a=new Ma(e,r);if(a.signal&&a.signal.aborted)return o(new Wa("Aborted","AbortError"));var s=new XMLHttpRequest;function n(){s.abort()}s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:rh(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var r="response"in s?s.response:s.responseText;setTimeout(function(){t(new wa(r,e))},0)},s.onerror=function(){setTimeout(function(){o(new TypeError("Network request failed"))},0)},s.ontimeout=function(){setTimeout(function(){o(new TypeError("Network request failed"))},0)},s.onabort=function(){setTimeout(function(){o(new Wa("Aborted","AbortError"))},0)},s.open(a.method,function(e){try{return""===e&&ea.location.href?ea.location.href:e}catch(r){return e}}(a.url),!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&(la.blob?s.responseType="blob":la.arrayBuffer&&a.headers.get("Content-Type")&&-1!==a.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!r||"object"!=typeof r.headers||r.headers instanceof ca?a.headers.forEach(function(e,r){s.setRequestHeader(r,e)}):Object.getOwnPropertyNames(r.headers).forEach(function(e){s.setRequestHeader(e,uc(r.headers[e]))}),a.signal&&(a.signal.addEventListener("abort",n),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",n)}),s.send(void 0===a._bodyInit?null:a._bodyInit)})}Ie.polyfill=!0,ea.fetch||(ea.fetch=Ie,ea.Headers=ca,ea.Request=Ma,ea.Response=wa);!function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(n,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var e=document.createEvent("CustomEvent");return e.initCustomEvent(n,t.bubbles,t.cancelable,t.detail),e}}();var th=["second","minute","hour","day","week","month","year"],uh=function(a,r){if(0===r)return["just now","right now"];var $=th[Math.floor(r/2)];return a>1&&($+="s"),[a+" "+$+" ago","in "+a+" "+$]};var vh=["\u79D2","\u5206\u949F","\u5C0F\u65F6","\u5929","\u5468","\u4E2A\u6708","\u5E74"],wh=function($,r){if(0===r)return["\u521A\u521A","\u7247\u523B\u540E"];var t=vh[~~(r/2)];return[$+" "+t+"\u524D",$+" "+t+"\u540E"]};var xc={},yc=function($,e){xc[$]=e};var xh=function($){return xc[$]||xc.en_US};var Na=[60,60,24,7,365/7/12,12];function Je($){return $ instanceof Date?$:!isNaN($)||/^\d+$/.test($)?new Date(parseInt($)):($=($||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date($))}function Ke($,e){for(var t=$<0?1:0,r=$=Math.abs($),a=0;$>=Na[a]&&a<Na.length;a++)$/=Na[a];return($=Math.floor($))>(0===(a*=2)?9:1)&&(a+=1),e($,a,r)[t].replace("%s",$.toString())}function Le($,e){return(+(e?Je(e):new Date)-+Je($))/1e3}function yh($){for(var e=1,t=0,r=Math.abs($);$>=Na[t]&&t<Na.length;t++)$/=Na[t],e*=Na[t];return r=(r%=e)?e-r:e,Math.ceil(r)}var zh=function(t,r,$){var e=Le(t,$&&$.relativeDate);return Ke(e,xh(r))};var Me="timeago-id";function Ah(t,e){t.setAttribute(Me,e)}function Bh(t){return parseInt(t.getAttribute(Me))}var Ne={},Ch=function($){clearTimeout($),delete Ne[$]};function Dh($,r,e,t){Ch(Bh($));var a=t.relativeDate,h=t.minInterval,i=Le(r,a);$.innerText=Ke(i,e);var D=setTimeout(function(){Dh($,r,e,t)},Math.min(1e3*Math.max(yh(i),h||1),2147483647));Ne[D]=0,Ah($,D)}yc("en_US",uh),yc("zh_CN",wh);function Oe(e,t){var n=new Hh(navigator.appVersion),r="https://mesconseilscovid.sante.gouv.fr/#suiviintroduction";t.hasSymptomesStartDate()&&n.addEvent("D\xE9but sympt\xF4mes Covid-19","Vous pouvez faire votre suivi quotidien sur ".concat(r),t.symptomes_start_date,1,void 0);var o={freq:"DAILY",interval:1,count:15};n.addEvent("Suivi Covid-19","Aller faire mon suivi quotidien sur ".concat(r),t.suivi_start_date,1,o);var i=n.generateCalendar();[].forEach.call(e.querySelectorAll(".js-calendar"),function(e){var t="data:text/x-vCalendar;charset=utf-8,"+encodeURIComponent(i);e.setAttribute("href",t)})}function Pe(e){function t(e,t,n){e.style.transition="opacity ".concat(t/1e3,"s"),e.style.opacity="0",window.setTimeout(function(){e.style.opacity="1",n(e)},t)}[].forEach.call(e.querySelectorAll(".button-feedback"),function(n){n.addEventListener("click",function(n){n.preventDefault();var r=n.target.dataset.feedback;window.plausible("Avis ".concat(r)),function(e,n){var r=n.dataset.feedbackTransitionDelay;t(n,r,function(n){fa(n.querySelector(".feedback-question")),ga(n.querySelector(".feedback-form")),n.parentElement.classList.add("js-feedback-submitted"),n.querySelector(".feedback-form form").addEventListener("submit",function(o){o.preventDefault();var i=document.body.dataset.statsUrl,a={kind:e,message:o.target.elements.message.value,page:lb()},d=new XMLHttpRequest;d.open("POST",i+"/feedback",!0),d.setRequestHeader("Content-Type","application/json"),d.send(JSON.stringify(a)),t(n,r,function(e){fa(e.querySelector(".feedback-form")),ga(e.querySelector(".feedback-thankyou"))})})})}(r,e)})}),document.addEventListener("pageChanged",function(){fa(e.querySelector(".feedback-form")),fa(e.querySelector(".feedback-thankyou")),ga(e.querySelector(".feedback-question"))})}function Qe(e){e.querySelector(".js-impression").addEventListener("click",function(e){e.preventDefault();try{window.print()}catch(t){alert("Cette fonctionnalit\xE9 n\u2019est pas pr\xE9sente sur votre appareil")}})}function Eh(e,t){e.addEventListener("click",function(e){e.preventDefault(),confirm("\xCAtes-vous s\xFBr\xB7e de vouloir supprimer tous les profils\xA0?")&&t.supprimerTout().then(function(){"introduction"===t.router.lastRouteResolved().url?window.location.reload(!0):t.router.navigate("introduction")})})}function Fh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gh(e,t,n){return t&&Re(e.prototype,t),n&&Re(e,n),e}var Hh=function(){function e(t){Fh(this,e),this.uidDomain="default",this.prodId="Calendar",this.SEPARATOR=-1!==t.indexOf("Win")?"\r\n":"\n",this.calendarEvents=[],this.calendarStart=["BEGIN:VCALENDAR","PRODID:"+this.prodId,"VERSION:2.0"].join(this.SEPARATOR),this.calendarEnd=this.SEPARATOR+"END:VCALENDAR"}return Gh(e,[{key:"addEvent",value:function(e,t,n,r,i,a){var s=new Date(n);s.setHours(s.getHours()+r);var l=this.generateDates(n,s,a),o=this.generateRRule(i),c=["BEGIN:VEVENT","UID:"+this.calendarEvents.length+"@"+this.uidDomain,"CLASS:PUBLIC","DESCRIPTION:"+t,"DTSTAMP;VALUE=DATE-TIME:"+l.now,"DTSTART;VALUE=DATE-TIME:"+l.start,"DTEND;VALUE=DATE-TIME:"+l.end,"SUMMARY;LANGUAGE=fr-fr:"+e,"TRANSP:TRANSPARENT","END:VEVENT"];return o&&c.splice(4,0,o),c=c.join(this.SEPARATOR),this.calendarEvents.push(c),c}},{key:"generateCalendar",value:function(){return this.calendarStart+this.SEPARATOR+this.calendarEvents.join(this.SEPARATOR)+this.calendarEnd}},{key:"generateDates",value:function(e,t,n){var r=n||new Date,i=("0000"+e.getFullYear().toString()).slice(-4),a=("00"+(e.getMonth()+1).toString()).slice(-2),s=("00"+e.getDate().toString()).slice(-2),l=("00"+e.getHours().toString()).slice(-2),o=("00"+e.getMinutes().toString()).slice(-2),c=("00"+e.getMinutes().toString()).slice(-2),u=("0000"+t.getFullYear().toString()).slice(-4),g=("00"+(t.getMonth()+1).toString()).slice(-2),E=("00"+t.getDate().toString()).slice(-2),S=("00"+t.getHours().toString()).slice(-2),d=("00"+t.getMinutes().toString()).slice(-2),A=("00"+t.getMinutes().toString()).slice(-2),$="",h="";return o+c+d+A!==0&&($="T"+l+o+c,h="T"+S+d+A),{start:i+a+s+$,end:u+g+E+h,now:("0000"+r.getFullYear().toString()).slice(-4)+("00"+(r.getMonth()+1).toString()).slice(-2)+("00"+r.getDate().toString()).slice(-2)+("T"+("00"+r.getHours().toString()).slice(-2)+("00"+r.getMinutes().toString()).slice(-2)+("00"+r.getSeconds().toString()).slice(-2))}}},{key:"generateRRule",value:function(e){var t;return e&&(e.rrule?t=e.rrule:(t="RRULE:FREQ="+e.freq,t+=";INTERVAL="+e.interval,t+=";COUNT="+e.count)),t}}]),e}();function Se(e,t){[].forEach.call(e.querySelectorAll(".me"),t.estMonProfil()?Ih:Jh)}function Ih(e){ga(e),fa(e.nextSibling)}function Jh(e){fa(e),ga(e.nextSibling)}function fa(e){e.setAttribute("hidden",""),e.classList.remove("visible")}function ga(e){e.removeAttribute("hidden"),e.classList.add("visible")}function Eb(e,t){[].forEach.call(e.querySelectorAll(t),fa)}function Fb(e,t){var $=e.querySelector("#"+t);$&&ga($)}function zc(e,t){t.forEach(function(t){Fb(e,t)})}function kb(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstElementChild}function Kh(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/`/g,"&#x60;")}function Ha(e){for(var t="",$=0;$<(arguments.length<=1?0:arguments.length-1);$++)t+=e[$],t+=Kh($+1<1||arguments.length<=$+1?void 0:arguments[$+1]);return t+=e[e.length-1]}function lb(){var e=document.location.hash;return(e?e.slice(1):"").split("?")[0]}function Lh(e,r){var t=document.querySelector("section#page"),o=document.querySelector("#"+e).cloneNode(!0);t.innerHTML="";var a=t.insertAdjacentElement("afterbegin",o.firstElementChild);return Se(a,r.profil),"introduction"!==e&&a.scrollIntoView({behavior:"smooth"}),a}function Mh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Nh(e,t,r){return t&&Te(e.prototype,t),r&&Te(e,r),e}function Oh(){var e=Ia(["\n                <a data-delete-suivi=\"","\" href=\"\"\n                    >Supprimer "," suivi</a>\n            "]);return Oh=function(){return e},e}function Ph(){var e=Ia(["\n            <a class=\"button button-outline button-full-width conseils-link\"\n                data-set-profil=\"","\" href=\"#conseils\"\n                >Voir "," conseils</a>\n        "]);return Ph=function(){return e},e}function Qh(){var e=Ia(["\n            <a class=\"button button-full-width conseils-link\"\n                data-set-profil=\"","\" href=\"#","\"\n                >"," "," suivi</a>\n        "]);return Qh=function(){return e},e}function Rh(){var e=Ia(["\n            <a data-set-profil=\"","\" href=\"#","\"\n                >Modifier "," r\xE9ponses</a>\n            <a data-delete-profil=\"","\" href=\"\"\n                >Supprimer "," profil</a>\n            "]);return Rh=function(){return e},e}function Sh(){var e=Ia(["\n                <a class=\"button button-full-width conseils-link\"\n                    data-set-profil=\"","\" href=\"#","\"\n                    >","</a>\n            "]);return Sh=function(){return e},e}function Th(){var e=Ia(["\n                <a class=\"button "," conseils-link\"\n                    data-set-profil=\"","\" href=\"#conseils\"\n                    >Voir "," conseils</a>\n            "]);return Th=function(){return e},e}function Uh(){var e=Ia(["\n                    <a class=\"button suivi-link\"\n                        data-set-profil=\"","\" href=\"#suiviintroduction\"\n                        >"," "," suivi</a>\n                "]);return Uh=function(){return e},e}function Vh(){var e=Ia(["<h3><span class=\"profil\">","</span></h3>"]);return Vh=function(){return e},e}function Ia(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Wh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Xh(e,t,i){return t&&Ue(e.prototype,t),i&&Ue(e,i),e}function sa(e,t){var r=t||new Date;return new Date(r.setDate(r.getDate()-e))}function Yh(e,t){var r=t||new Date;return new Date(r.setDate(r.getDate()+e))}function Zh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $h(e,t,i){return t&&Ve(e.prototype,t),i&&Ve(e,i),e}var We=function(){function e(t){Zh(this,e),this.profil=t,this.dernierEtat=t.dernierEtat()}return $h(e,[{key:"calculGravite",value:function(e){var t=0;return"oui"!==e.fievre&&"oui"!==e.diarrheeVomissements&&"oui"!==e.toux||(t=1),"pire"!==e.essoufflement&&"pire"!==e.etatGeneral&&"oui"!==e.confusion&&"oui"!==e.alimentationHydratation&&"oui"!==e.mauxDeTete||(t=2),"critique"!==e.essoufflement&&"critique"!==e.etatGeneral||(t=3),t}},{key:"graviteBlockNameToDisplay",value:function(){return"suivi-gravite-".concat(this.gravite)}},{key:"psyBlockNameToDisplay",value:function(){return"suivi-psy-".concat(this.psy)}},{key:"evolutionsBlockNamesToDisplay",value:function(){var e=[],t=this.dernierEtat;return"critique"===t.essoufflement&&e.push("essoufflement-gravite-3"),"pire"===t.essoufflement&&e.push("essoufflement-gravite-2"),"critique"===t.etatGeneral&&e.push("etat-general-gravite-3"),"pire"===t.etatGeneral&&e.push("etat-general-gravite-2"),"oui"===t.confusion&&e.push("confusion-gravite-2"),"oui"===t.alimentationHydratation&&e.push("alimentation-hydratation-gravite-2"),"critique"===t.etatPsychologique&&e.push("etat-psychologique-gravite-3"),"oui"===t.fievre&&e.push("fievre-gravite-1"),"oui"===t.diarrheeVomissements&&e.push("diarrhee-vomissements-gravite-1"),"oui"===t.mauxDeTete&&e.push("maux-de-tete-gravite-2"),"oui"===t.toux&&e.push("toux-gravite-1"),e}},{key:"gravite",get:function(){return this.calculGravite(this.dernierEtat)}},{key:"psy",get:function(){var e=0;return"critique"===this.dernierEtat.etatPsychologique&&(e=0===this.gravite?1:2),e}}]),e}();var Ac=function(){function e(t,i){Wh(this,e),this.nom=t,this.fillData(i||{})}return Xh(e,[{key:"resetSuivi",value:function(){this._suivi_start_date=void 0,this._symptomes_start_date=void 0,this._deconfinement_date=void 0,this.suivi=[]}},{key:"resetData",value:function(e){this.nom=e,this.departement=void 0,this.activite_pro=void 0,this.activite_pro_public=void 0,this.activite_pro_sante=void 0,this.activite_pro_liberal=void 0,this.foyer_enfants=void 0,this.foyer_fragile=void 0,this.age=void 0,this.grossesse_3e_trimestre=void 0,this.poids=void 0,this.taille=void 0,this.antecedent_cardio=void 0,this.antecedent_diabete=void 0,this.antecedent_respi=void 0,this.antecedent_dialyse=void 0,this.antecedent_cancer=void 0,this.antecedent_immunodep=void 0,this.antecedent_cirrhose=void 0,this.antecedent_drepano=void 0,this.antecedent_chronique_autre=void 0,this.symptomes_actuels=void 0,this.symptomes_actuels_temperature=void 0,this.symptomes_actuels_temperature_inconnue=void 0,this.symptomes_actuels_toux=void 0,this.symptomes_actuels_odorat=void 0,this.symptomes_actuels_douleurs=void 0,this.symptomes_actuels_diarrhee=void 0,this.symptomes_actuels_fatigue=void 0,this.symptomes_actuels_alimentation=void 0,this.symptomes_actuels_souffle=void 0,this.symptomes_actuels_autre=void 0,this.symptomes_passes=void 0,this.contact_a_risque=void 0,this.contact_a_risque_meme_lieu_de_vie=void 0,this.contact_a_risque_contact_direct=void 0,this.contact_a_risque_actes=void 0,this.contact_a_risque_espace_confine=void 0,this.contact_a_risque_meme_classe=void 0,this.contact_a_risque_stop_covid=void 0,this.contact_a_risque_autre=void 0,this.depistage=void 0,this.depistage_resultat=void 0,this.suivi_active=!1,this.resetSuivi(),this.questionnaire_started=!1,this.questionnaire_completed=!1}},{key:"fillData",value:function(e){this.departement=e.departement,this.activite_pro=e.activite_pro,this.activite_pro_public=e.activite_pro_public,this.activite_pro_sante=e.activite_pro_sante,this.activite_pro_liberal=e.activite_pro_liberal,this.foyer_enfants=e.foyer_enfants,this.foyer_fragile=e.foyer_fragile,this.age=e.age,this.grossesse_3e_trimestre=e.grossesse_3e_trimestre,this.poids=e.poids,this.taille=e.taille,this.antecedent_cardio=e.antecedent_cardio,this.antecedent_diabete=e.antecedent_diabete,this.antecedent_respi=e.antecedent_respi,this.antecedent_dialyse=e.antecedent_dialyse,this.antecedent_cancer=e.antecedent_cancer,this.antecedent_immunodep=e.antecedent_immunodep,this.antecedent_cirrhose=e.antecedent_cirrhose,this.antecedent_drepano=e.antecedent_drepano,this.antecedent_chronique_autre=e.antecedent_chronique_autre,this.symptomes_actuels=e.symptomes_actuels,this.symptomes_actuels_temperature=e.symptomes_actuels_temperature,this.symptomes_actuels_temperature_inconnue=e.symptomes_actuels_temperature_inconnue,this.symptomes_actuels_toux=e.symptomes_actuels_toux,this.symptomes_actuels_odorat=e.symptomes_actuels_odorat,this.symptomes_actuels_douleurs=e.symptomes_actuels_douleurs,this.symptomes_actuels_diarrhee=e.symptomes_actuels_diarrhee,this.symptomes_actuels_fatigue=e.symptomes_actuels_fatigue,this.symptomes_actuels_alimentation=e.symptomes_actuels_alimentation,this.symptomes_actuels_souffle=e.symptomes_actuels_souffle,this.symptomes_actuels_autre=e.symptomes_actuels_autre,this.symptomes_passes=e.symptomes_passes,this.contact_a_risque=e.contact_a_risque,this.contact_a_risque_meme_lieu_de_vie=e.contact_a_risque_meme_lieu_de_vie,this.contact_a_risque_contact_direct=e.contact_a_risque_contact_direct,this.contact_a_risque_actes=e.contact_a_risque_actes,this.contact_a_risque_espace_confine=e.contact_a_risque_espace_confine,this.contact_a_risque_meme_classe=e.contact_a_risque_meme_classe,this.contact_a_risque_stop_covid=e.contact_a_risque_stop_covid,this.contact_a_risque_autre=e.contact_a_risque_autre,this.depistage=e.depistage,this.depistage_resultat=e.depistage_resultat,this._suivi_start_date=e._suivi_start_date,this._symptomes_start_date=e._symptomes_start_date,this._deconfinement_date=e._deconfinement_date,this.suivi_active=e.suivi_active||!1,this.suivi=e.suivi||[],this.fillQuestionnaireStarted(e.questionnaire_started),this.fillQuestionnaireCompleted(e.questionnaire_completed)}},{key:"fillTestData",value:function(e,t,i,s){var a={symptomes_actuels:!1,symptomes_actuels_temperature:!1,symptomes_actuels_temperature_inconnue:!1,symptomes_actuels_toux:!1,symptomes_actuels_odorat:!1,symptomes_actuels_douleurs:!1,symptomes_actuels_diarrhee:!1,symptomes_actuels_fatigue:!1,symptomes_actuels_alimentation:!1,symptomes_actuels_souffle:!1,symptomes_actuels_autre:!1,symptomes_passes:!1,contact_a_risque:!1,contact_a_risque_meme_lieu_de_vie:!1,contact_a_risque_contact_direct:!1,contact_a_risque_actes:!1,contact_a_risque_espace_confine:!1,contact_a_risque_meme_classe:!1,contact_a_risque_stop_covid:!1,contact_a_risque_autre:!1,depistage:!1,depistage_resultat:"",departement:"34",activite_pro:!1,activite_pro_public:!1,activite_pro_sante:!1,activite_pro_liberal:!1,foyer_enfants:!1,foyer_fragile:!1,age:"42",grossesse_3e_trimestre:!1,poids:"70",taille:"178",antecedent_cardio:!1,antecedent_diabete:!1,antecedent_respi:!1,antecedent_dialyse:!1,antecedent_cancer:!1,antecedent_immunodep:!1,antecedent_cirrhose:!1,antecedent_drepano:!1,antecedent_chronique_autre:!1};return"Positif"==e?(a.depistage=!0,a.depistage_resultat="positif"):"N\xE9gatif"==e?(a.depistage=!0,a.depistage_resultat="negatif"):"En attente"==e?(a.depistage=!0,a.depistage_resultat="en_attente"):"Pas test\xE9"==e||console.error("Situation de d\xE9pistage inconnue"),"Sympt\xF4mes actuels graves"===t?(a.symptomes_actuels=!0,a.symptomes_actuels_souffle=!0,a._symptomes_start_date=sa(3).toJSON()):"Sympt\xF4mes actuels"===t?(a.symptomes_actuels=!0,a.symptomes_actuels_diarrhee=!0,a._symptomes_start_date=sa(3).toJSON()):"Sympt\xF4mes actuels non \xE9vocateurs"===t?(a.symptomes_actuels=!0,a.symptomes_actuels_autre=!0):"Sympt\xF4mes pass\xE9s"===t?(a.symptomes_passes=!0,a._symptomes_start_date=sa(3).toJSON()):"Contact \xE0 risque"===t?(a.contact_a_risque=!0,a.contact_a_risque_meme_lieu_de_vie=!0):"Contact pas vraiment \xE0 risque"===t?(a.contact_a_risque=!0,a.contact_a_risque_autre=!0):"Rien de tout \xE7a"===t||console.error("Situation symptomatique inconnue"),i&&(a.age=70),s&&(a.foyer_fragile=!0),this.fillData(a)}},{key:"fillQuestionnaireStarted",value:function(e){this.questionnaire_started=void 0!==e?e:!this.isEmpty()}},{key:"fillQuestionnaireCompleted",value:function(e){this.questionnaire_completed=void 0!==e?e:this.isComplete()}},{key:"getData",value:function(){return{departement:this.departement,activite_pro:this.activite_pro,activite_pro_public:this.activite_pro_public,activite_pro_sante:this.activite_pro_sante,activite_pro_liberal:this.activite_pro_liberal,foyer_enfants:this.foyer_enfants,foyer_fragile:this.foyer_fragile,age:this.age,grossesse_3e_trimestre:this.grossesse_3e_trimestre,poids:this.poids,taille:this.taille,antecedent_cardio:this.antecedent_cardio,antecedent_diabete:this.antecedent_diabete,antecedent_respi:this.antecedent_respi,antecedent_dialyse:this.antecedent_dialyse,antecedent_cancer:this.antecedent_cancer,antecedent_immunodep:this.antecedent_immunodep,antecedent_cirrhose:this.antecedent_cirrhose,antecedent_drepano:this.antecedent_drepano,antecedent_chronique_autre:this.antecedent_chronique_autre,symptomes_actuels:this.symptomes_actuels,symptomes_actuels_temperature:this.symptomes_actuels_temperature,symptomes_actuels_temperature_inconnue:this.symptomes_actuels_temperature_inconnue,symptomes_actuels_toux:this.symptomes_actuels_toux,symptomes_actuels_odorat:this.symptomes_actuels_odorat,symptomes_actuels_douleurs:this.symptomes_actuels_douleurs,symptomes_actuels_diarrhee:this.symptomes_actuels_diarrhee,symptomes_actuels_fatigue:this.symptomes_actuels_fatigue,symptomes_actuels_alimentation:this.symptomes_actuels_alimentation,symptomes_actuels_souffle:this.symptomes_actuels_souffle,symptomes_actuels_autre:this.symptomes_actuels_autre,symptomes_passes:this.symptomes_passes,contact_a_risque:this.contact_a_risque,contact_a_risque_meme_lieu_de_vie:this.contact_a_risque_meme_lieu_de_vie,contact_a_risque_contact_direct:this.contact_a_risque_contact_direct,contact_a_risque_actes:this.contact_a_risque_actes,contact_a_risque_espace_confine:this.contact_a_risque_espace_confine,contact_a_risque_meme_classe:this.contact_a_risque_meme_classe,contact_a_risque_stop_covid:this.contact_a_risque_stop_covid,contact_a_risque_autre:this.contact_a_risque_autre,depistage:this.depistage,depistage_resultat:this.depistage_resultat,suivi_active:this.suivi_active,_suivi_start_date:this._suivi_start_date,_symptomes_start_date:this._symptomes_start_date,_deconfinement_date:this._deconfinement_date,suivi:this.suivi,questionnaire_started:this.questionnaire_started,questionnaire_completed:this.questionnaire_completed}}},{key:"isEmpty",value:function(){return void 0===this.departement&&void 0===this.activite_pro&&void 0===this.activite_pro_public&&void 0===this.activite_pro_sante&&void 0===this.activite_pro_liberal&&void 0===this.foyer_enfants&&void 0===this.foyer_fragile&&void 0===this.age&&void 0===this.grossesse_3e_trimestre&&void 0===this.poids&&void 0===this.taille&&void 0===this.antecedent_cardio&&void 0===this.antecedent_diabete&&void 0===this.antecedent_respi&&void 0===this.antecedent_dialyse&&void 0===this.antecedent_cancer&&void 0===this.antecedent_immunodep&&void 0===this.antecedent_cirrhose&&void 0===this.antecedent_drepano&&void 0===this.antecedent_chronique_autre&&void 0===this.symptomes_actuels&&void 0===this.symptomes_passes&&void 0===this.contact_a_risque&&void 0===this.depistage}},{key:"isResidenceComplete",value:function(){return void 0!==this.departement}},{key:"isFoyerComplete",value:function(){return void 0!==this.foyer_enfants&&void 0!==this.foyer_fragile}},{key:"isAntecedentsComplete",value:function(){return void 0!==this.antecedent_cardio&&void 0!==this.antecedent_diabete&&void 0!==this.antecedent_respi&&void 0!==this.antecedent_dialyse&&void 0!==this.antecedent_cancer&&void 0!==this.antecedent_immunodep&&void 0!==this.antecedent_cirrhose&&void 0!==this.antecedent_drepano&&void 0!==this.antecedent_chronique_autre}},{key:"isCaracteristiquesComplete",value:function(){return void 0!==this.age&&void 0!==this.grossesse_3e_trimestre&&void 0!==this.poids&&void 0!==this.taille}},{key:"isActiviteProComplete",value:function(){return void 0!==this.activite_pro}},{key:"isSymptomesActuelsComplete",value:function(){return void 0!==this.symptomes_actuels}},{key:"isSymptomesPassesComplete",value:function(){return void 0!==this.symptomes_passes}},{key:"isContactARisqueComplete",value:function(){return void 0!==this.contact_a_risque}},{key:"isDepistageComplete",value:function(){return void 0!==this.depistage}},{key:"isComplete",value:function(){return this.isResidenceComplete()&&this.isFoyerComplete()&&this.isAntecedentsComplete()&&this.isCaracteristiquesComplete()&&this.isActiviteProComplete()&&this.isSymptomesActuelsComplete()&&this.isSymptomesPassesComplete()&&this.isContactARisqueComplete()&&this.isDepistageComplete()}},{key:"hasSymptomesActuelsReconnus",value:function(){return this.symptomes_actuels&&!this.symptomes_actuels_autre}},{key:"hasContactARisqueReconnus",value:function(){return this.contact_a_risque&&!this.contact_a_risque_autre}},{key:"hasSuiviStartDate",value:function(){return void 0!==this._suivi_start_date}},{key:"hasSymptomesStartDate",value:function(){return void 0!==this._symptomes_start_date}},{key:"hasDeconfinementDate",value:function(){return void 0!==this._deconfinement_date}},{key:"hasHistorique",value:function(){return this.suivi.length}},{key:"ajouterEtat",value:function(e){this.suivi.push(e)}},{key:"dernierEtat",value:function(){return this.hasHistorique()?this.suivi.slice(-1)[0]:{}}},{key:"suiviDerniersJours",value:function(e){return this.suivi.filter(function(t){return new Date(t.date)>sa(e)})}},{key:"suiviEntre",value:function(e,t){return this.suivi.filter(function(i){var s=new Date(i.date);return s>e&&s<=t})}},{key:"requiertSuivi",value:function(){return this.isDepistageComplete()&&(this.estPositif()||this.estEnAttente()||this.sansDepistage()&&this.hasSymptomesActuelsReconnus()||this.sansDepistage()&&this.symptomes_passes)}},{key:"estPositif",value:function(){return!0===this.depistage&&"positif"===this.depistage_resultat}},{key:"estNegatif",value:function(){return!0===this.depistage&&"negatif"===this.depistage_resultat}},{key:"estEnAttente",value:function(){return!0===this.depistage&&"en_attente"===this.depistage_resultat}},{key:"sansDepistage",value:function(){return!1===this.depistage}},{key:"estNegatifSymptomatique",value:function(){return this.hasSymptomesActuelsReconnus()&&this.estNegatif()}},{key:"estPositifAsymptomatique",value:function(){return!1===this.symptomes_actuels&&this.estPositif()}},{key:"estMonProfil",value:function(){return"mes_infos"==this.nom}},{key:"affichageNom",value:function(){return this.estMonProfil()?"Moi":this.nom}},{key:"renderNom",value:function(){return Ha(Vh(),this.affichageNom())}},{key:"renderButtons",value:function(e){var t=this.estMonProfil()?"mon":"son",i=this.estMonProfil()?"mes":"ses",s="";if(this.isComplete()||this.suivi_active){if(this.suivi_active){var a=this.hasSuiviStartDate()&&this.hasHistorique()?"Continuer":"D\xE9marrer";s+=Ha(Uh(),this.nom,a,t)}var n=this.estMonProfil()&&!this.suivi_active?"":"button-outline";s+=Ha(Th(),n,this.nom,i)}else{var r=this.isEmpty()?"D\xE9marrer":"Continuer";s=Ha(Sh(),this.nom,e.firstPage,r)}return s+Ha(Rh(),this.nom,e.firstPage,i,this.nom,t)}},{key:"renderCard",value:function(e){return kb("\n        <li class=\"card\">\n            ".concat(this.renderNom(),"\n            <div>").concat(this.renderButtons(e),"</div>\n        </li>\n        "))}},{key:"renderButtonSuivi",value:function(){var e=this.estMonProfil()?"mon":"son",t=this.estMonProfil()?"mes":"ses",i=this.hasSuiviStartDate()&&this.hasHistorique()?"Continuer":"D\xE9marrer",s=this.hasSymptomesStartDate()?"suivisymptomes":"debutsymptomes",a=Ha(Qh(),this.nom,s,i,e),n=Ha(Ph(),this.nom,t),r="";return this.hasSuiviStartDate()&&(r=Ha(Oh(),this.nom,e)),a+n+r}},{key:"renderDernierSuivi",value:function(){var e=this.dernierEtat();if(e){var t=zh(new Date(e.date),"fr");return"<small>Derni\xE8re r\xE9ponse\xA0: ".concat(t,"</small>")}return""}},{key:"renderCardSuivi",value:function(){return kb("\n        <li class=\"card\">\n            ".concat(this.renderNom(),"\n            ").concat(this.renderDernierSuivi(),"\n            <div>").concat(this.renderButtonSuivi(),"</div>\n        </li>\n        "))}},{key:"renderDebutSymptomes",value:function(){return"<p>D\xE9but des sympt\xF4mes\xA0:\n            ".concat(this.symptomes_start_date.toLocaleString(),"\n            (<a href=\"#debutsymptomes\">modifier</a>)\n        </p>")}},{key:"renderDebutSuivi",value:function(){return"<p>D\xE9but du suivi\xA0: ".concat(this.suivi_start_date.toLocaleString(),"</p>")}},{key:"suiviParSymptome",value:function(e){return this.suivi.map(function(t){return{date:t.date,statut:t[e]}})}},{key:"switchSymptomeTitre",value:function(e){var t="";switch(e){case"essoufflement":t="Manque de souffle";break;case"etatGeneral":t="\xC9tat g\xE9n\xE9ral";break;case"etatPsychologique":t="\xC9tat psychologique";break;case"alimentationHydratation":t="Absence d\u2019alimentation ou d\u2019hydratation";break;case"diarrheeVomissements":t="Diarrh\xE9e ou vomissements";break;case"fievre":t="Fi\xE8vre sup\xE9rieure \xE0 39\xB0C";break;case"confusion":t="Somnolence ou confusion";break;case"mauxDeTete":t="Maux de t\xEAte";break;case"toux":t="Toux";}return t}},{key:"switchStatut",value:function(e){var t="";switch(e){case"critique":t="Beaucoup moins bien";break;case"pire":t="Un peu moins bien";break;case"stable":t="Stable";break;case"aucun":t="Pas ce sympt\xF4me";break;case"mieux":t="Mieux";break;case"":t="Pas de sympt\xF4mes";}return t}},{key:"switchBooleen",value:function(e){var t="";switch(e){case"oui":t="Oui";break;case"non":t="Non";break;case"":t="Pas de sympt\xF4mes";}return t}},{key:"switchBooleenOptionnel",value:function(e){var t="";switch(e){case"oui":t="Oui";break;case"non":t="Non";break;case"":t="Pas d\u2019information";}return t}},{key:"switchGravite",value:function(e){var t="";switch(e){case"gravite_3":t="\xC9tat grave, il est recommand\xE9 d\u2019appeler le SAMU\xA0(15)";break;case"gravite_2":t="\xC9tat pr\xE9occupant, consulter un m\xE9decin ou \xE0 d\xE9faut le SAMU\xA0(15)";break;case"gravite_1":t="\xC9tat \xE0 v\xE9rifier, consulter votre m\xE9decin traitant";break;case"gravite_0":t="\xC9tat correct";}return t}},{key:"switchIcone",value:function(e){var t="";switch(e){case"critique":case"oui":case"gravite_3":t="gravite_superieure";break;case"pire":case"gravite_2":t="gravite";break;case"stable":case"aucun":case"gravite_1":t="stable";break;case"mieux":case"non":case"gravite_0":t="ok";break;case"":t="interrogation";}return t}},{key:"renderIcone",value:function(e){var t="../suivi_".concat(this.switchIcone(e),".svg");return"<img src=\"".concat(t,"\" width=\"40px\" height=\"40px\" />")}},{key:"renderSymptomeStatutTableCell",value:function(e){return"<tr>\n            <td>".concat(new Date(e.date).toLocaleString(),"</td>\n            <td>").concat(this.renderIcone(e.statut),"</td>\n            <td>").concat(this.switchStatut(e.statut),"</td>\n        </tr>")}},{key:"renderSymptomeStatutTable",value:function(e){var t=this,i="<tbody>\n            ".concat(e.map(function(e){return t.renderSymptomeStatutTableCell(e)}).join("\n"),"\n        </tbody>");return"<table>\n            ".concat("<thead><tr><td>Date</td><td colspan=\"2\">Statut</td></tr></thead>","\n            ").concat(i,"\n        </table>")}},{key:"renderSymptomeStatut",value:function(e,t){var i="<h3>".concat(this.switchSymptomeTitre(e),"</h3>");return"".concat(i,"\n            ").concat(this.renderSymptomeStatutTable(t),"\n        ")}},{key:"renderSymptomeBooleenTableCell",value:function(e){return"<tr>\n            <td>".concat(new Date(e.date).toLocaleString(),"</td>\n            <td>").concat(this.renderIcone(e.statut),"</td>\n            <td>").concat(this.switchBooleen(e.statut),"</td>\n        </tr>")}},{key:"renderSymptomeBooleenTable",value:function(e){var t=this,i="<tbody>\n            ".concat(e.map(function(e){return t.renderSymptomeBooleenTableCell(e)}).join("\n"),"\n        </tbody>");return"<table>\n            ".concat("<thead><tr><td>Date</td><td colspan=\"2\">Statut</td></tr></thead>","\n            ").concat(i,"\n        </table>")}},{key:"renderSymptomeBooleen",value:function(e,t){var i="<h3>".concat(this.switchSymptomeTitre(e),"</h3>");return"".concat(i,"\n            ").concat(this.renderSymptomeBooleenTable(t),"\n        ")}},{key:"renderSymptomeBooleenOptionnelTableCell",value:function(e){return"<tr>\n            <td>".concat(new Date(e.date).toLocaleString(),"</td>\n            <td>").concat(this.renderIcone(e.statut),"</td>\n            <td>").concat(this.switchBooleenOptionnel(e.statut),"</td>\n        </tr>")}},{key:"renderSymptomeBooleenOptionnelTable",value:function(e){var t=this,i="<tbody>\n            ".concat(e.map(function(e){return t.renderSymptomeBooleenOptionnelTableCell(e)}).join("\n"),"\n        </tbody>");return"<table>\n            ".concat("<thead><tr><td>Date</td><td colspan=\"2\">Statut</td></tr></thead>","\n            ").concat(i,"\n        </table>")}},{key:"renderSymptomeBooleenOptionnel",value:function(e,t){var i="<h3>".concat(this.switchSymptomeTitre(e),"</h3>");return"".concat(i,"\n            ").concat(this.renderSymptomeBooleenOptionnelTable(t),"\n        ")}},{key:"renderGraviteTableCell",value:function(e,t){var i="gravite_".concat(t.calculGravite(e));return"<tr>\n            <td>".concat(new Date(e.date).toLocaleString(),"</td>\n            <td>").concat(this.renderIcone(i),"</td>\n            <td>").concat(this.switchGravite(i),"</td>\n        </tr>")}},{key:"renderGraviteTable",value:function(e,t){var i=this,s="<tbody>\n            ".concat(e.map(function(e){return i.renderGraviteTableCell(e,t)}).join("\n"),"\n        </tbody>");return"<table>\n            ".concat("<thead><tr><td>Date</td><td colspan=\"2\">Statut</td></tr></thead>","\n            ").concat(s,"\n        </table>")}},{key:"renderGravite",value:function(){var e=new We(this);return"<h3>Bilan de votre situation</h3>\n            ".concat(this.renderGraviteTable(this.suivi,e),"\n        ")}},{key:"renderHistorique",value:function(){var e=this,t=["alimentationHydratation","diarrheeVomissements","fievre"];this.estMonProfil()||t.push("confusion");return kb("\n            <div>\n                ".concat(this.renderDebutSymptomes(),"\n                ").concat(this.renderDebutSuivi(),"\n                ").concat(this.renderGravite(),"\n                ").concat(["essoufflement","etatGeneral","etatPsychologique"].map(function(t){return e.renderSymptomeStatut(t,e.suiviParSymptome(t))}).join("\n"),"\n                ").concat(t.map(function(t){return e.renderSymptomeBooleen(t,e.suiviParSymptome(t))}).join("\n"),"\n                ").concat(["mauxDeTete","toux"].map(function(t){return e.renderSymptomeBooleenOptionnel(t,e.suiviParSymptome(t))}).join("\n"),"\n            </div>\n        "))}},{key:"suivi_start_date",get:function(){if(void 0!==this._suivi_start_date)return new Date(this._suivi_start_date)},set:function(e){this._suivi_start_date=void 0!==e?e.toJSON():void 0}},{key:"symptomes_start_date",get:function(){if(void 0!==this._symptomes_start_date)return new Date(this._symptomes_start_date)},set:function(e){this._symptomes_start_date=void 0!==e?e.toJSON():void 0}},{key:"deconfinement_date",get:function(){if(void 0!==this._suivi_start_date)return new Date(this._deconfinement_date)},set:function(e){this._deconfinement_date=void 0!==e?e.toJSON():void 0}}]),e}();function _h(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Xe(e,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ai(e,r,o){return r&&Xe(e.prototype,r),o&&Xe(e,o),e}var Bc,xa={};!function(e){if("object"==typeof xa)xa=e();else if("function"==typeof Bc&&Bc.amd)Bc([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof Ca?Ca:"undefined"!=typeof self?self:this).localforage=e()}}(function(){return function e(n,r,t){function o(a,u){if(!r[a]){if(!n[a]){var c=require;if(!u&&c)return c(a,!0);if(i)return i(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var s=r[a]={exports:{}};n[a][0].call(s.exports,function(e){var r=n[a][1][e];return o(r||e)},s,s.exports,e,n,r,t)}return r[a].exports}for(var i=require,a=0;a<t.length;a++)o(t[a]);return o}({1:[function(e,n,r){(function(e){var r,t,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(s),u=e.document.createTextNode("");a.observe(u,{characterData:!0}),r=function(){u.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var n=e.document.createElement("script");n.onreadystatechange=function(){s(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n)}:function(){setTimeout(s,0)};else{var c=new e.MessageChannel;c.port1.onmessage=s,r=function(){c.port2.postMessage(0)}}var f=[];function s(){var e,n;t=!0;for(var r=f.length;r;){for(n=f,f=[],e=-1;++e<r;)n[e]();r=f.length}t=!1}n.exports=function(e){1!==f.push(e)||t||r()}}).call(this,"undefined"!=typeof Ca?Ca:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,n,r){var t=e(1);function o(){}var i={},a=["REJECTED"],u=["FULFILLED"],c=["PENDING"];function f(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&v(this,e)}function s(e,n,r){this.promise=e,"function"==typeof n&&(this.onFulfilled=n,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function l(e,n,r){t(function(){var t;try{t=n(r)}catch(o){return i.reject(e,o)}t===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,t)})}function d(e){var n=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof n)return function(){n.apply(e,arguments)}}function v(e,n){var r=!1;function t(n){r||(r=!0,i.reject(e,n))}function o(n){r||(r=!0,i.resolve(e,n))}var a=h(function(){n(o,t)});"error"===a.status&&t(a.value)}function h(e,n){var r={};try{r.value=e(n),r.status="success"}catch(t){r.status="error",r.value=t}return r}n.exports=f,f.prototype.catch=function(e){return this.then(null,e)},f.prototype.then=function(e,n){if("function"!=typeof e&&this.state===u||"function"!=typeof n&&this.state===a)return this;var r=new this.constructor(o);this.state!==c?l(r,this.state===u?e:n,this.outcome):this.queue.push(new s(r,e,n));return r},s.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},s.prototype.otherCallFulfilled=function(e){l(this.promise,this.onFulfilled,e)},s.prototype.callRejected=function(e){i.reject(this.promise,e)},s.prototype.otherCallRejected=function(e){l(this.promise,this.onRejected,e)},i.resolve=function(e,n){var r=h(d,n);if("error"===r.status)return i.reject(e,r.value);var t=r.value;if(t)v(e,t);else{e.state=u,e.outcome=n;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(n)}return e},i.reject=function(e,n){e.state=a,e.outcome=n;for(var r=-1,t=e.queue.length;++r<t;)e.queue[r].callRejected(n);return e},f.resolve=function(e){if(e instanceof this)return e;return i.resolve(new this(o),e)},f.reject=function(e){var n=new this(o);return i.reject(n,e)},f.all=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,t=!1;if(!r)return this.resolve([]);var a=new Array(r),u=0,c=-1,f=new this(o);for(;++c<r;)s(e[c],c);return f;function s(e,o){n.resolve(e).then(function(e){a[o]=e,++u!==r||t||(t=!0,i.resolve(f,a))},function(e){t||(t=!0,i.reject(f,e))})}},f.race=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,t=!1;if(!r)return this.resolve([]);var a=-1,u=new this(o);for(;++a<r;)c=e[a],n.resolve(c).then(function(e){t||(t=!0,i.resolve(u,e))},function(e){t||(t=!0,i.reject(u,e))});var c;return u}},{1:1}],3:[function(e,n,r){(function(n){"function"!=typeof n.Promise&&(n.Promise=e(2))}).call(this,"undefined"!=typeof Ca?Ca:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,n,r){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function i(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),t=0;t<e.length;t+=1)r.append(e[t]);return r.getBlob(n.type)}}"undefined"==typeof Promise&&e(3);var a=Promise;function u(e,n){n&&e.then(function(e){n(null,e)},function(e){n(e)})}function c(e,n,r){"function"==typeof n&&e.then(n),"function"==typeof r&&e.catch(r)}function f(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function s(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var l="local-forage-detect-blob-support",d=void 0,v={},h=Object.prototype.toString,y="readonly",p="readwrite";function b(e){return"boolean"==typeof d?a.resolve(d):function(e){return new a(function(n){var r=e.transaction(l,p),t=i([""]);r.objectStore(l).put(t,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),n(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);n(r||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}(e).then(function(e){return d=e})}function m(e){var n=v[e.name],r={};r.promise=new a(function(e,n){r.resolve=e,r.reject=n}),n.deferredOperations.push(r),n.dbReady?n.dbReady=n.dbReady.then(function(){return r.promise}):n.dbReady=r.promise}function g(e){var n=v[e.name].deferredOperations.pop();if(n)return n.resolve(),n.promise}function _(e,n){var r=v[e.name].deferredOperations.pop();if(r)return r.reject(n),r.promise}function w(e,n){return new a(function(r,t){if(v[e.name]=v[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!n)return r(e.db);m(e),e.db.close()}var i=[e.name];n&&i.push(e.version);var a=o.open.apply(o,i);n&&(a.onupgradeneeded=function(n){var r=a.result;try{r.createObjectStore(e.storeName),n.oldVersion<=1&&r.createObjectStore(l)}catch(t){if("ConstraintError"!==t.name)throw t;console.warn("The database \""+e.name+"\" has been upgraded from version "+n.oldVersion+" to version "+n.newVersion+", but the storage \""+e.storeName+"\" already exists.")}}),a.onerror=function(e){e.preventDefault(),t(a.error)},a.onsuccess=function(){r(a.result),g(e)}})}function I(e){return w(e,!1)}function S(e){return w(e,!0)}function E(e,n){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),t=e.version<e.db.version,o=e.version>e.db.version;if(t&&(e.version!==n&&console.warn("The database \""+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||r){if(r){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function N(e){return i([function(e){for(var n=e.length,r=new ArrayBuffer(n),t=new Uint8Array(r),o=0;o<n;o++)t[o]=e.charCodeAt(o);return r}(atob(e.data))],{type:e.type})}function j(e){return e&&e.__local_forage_encoded_blob}function A(e){var n=this,r=n._initReady().then(function(){var e=v[n._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return c(r,e,e),r}function R(e,n,r,t){void 0===t&&(t=1);try{var o=e.db.transaction(e.storeName,n);r(null,o)}catch(i){if(t>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return a.resolve().then(function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),S(e)}).then(function(){return function(e){m(e);for(var n=v[e.name],r=n.forages,t=0;t<r.length;t++){var o=r[t];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,I(e).then(function(n){return e.db=n,E(e)?S(e):n}).then(function(t){e.db=n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t}).catch(function(n){throw _(e,n),n})}(e).then(function(){R(e,n,r,t-1)})}).catch(r);r(i)}}var O={_driver:"asyncStorage",_initStorage:function(e){var n=this,r={db:null};if(e)for(var t in e)r[t]=e[t];var o=v[r.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},v[r.name]=o),o.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=A);var i=[];function u(){return a.resolve()}for(var c=0;c<o.forages.length;c++){var f=o.forages[c];f!==n&&i.push(f._initReady().catch(u))}var s=o.forages.slice(0);return a.all(i).then(function(){return r.db=o.db,I(r)}).then(function(e){return r.db=e,E(r,n._defaultConfig.version)?S(r):e}).then(function(e){r.db=o.db=e,n._dbInfo=r;for(var t=0;t<s.length;t++){var i=s[t];i!==n&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}})},_support:function(){try{if(!o)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),n="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||n)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(r){return!1}}(),iterate:function(e,n){var r=this,t=new a(function(n,t){r.ready().then(function(){R(r._dbInfo,y,function(o,i){if(o)return t(o);try{var a=i.objectStore(r._dbInfo.storeName).openCursor(),u=1;a.onsuccess=function(){var r=a.result;if(r){var t=r.value;j(t)&&(t=N(t));var o=e(t,r.key,u++);void 0!==o?n(o):r.continue()}else n()},a.onerror=function(){t(a.error)}}catch(c){t(c)}})}).catch(t)});return u(t,n),t},getItem:function(e,n){var r=this;e=f(e);var t=new a(function(n,t){r.ready().then(function(){R(r._dbInfo,y,function(o,i){if(o)return t(o);try{var a=i.objectStore(r._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),j(e)&&(e=N(e)),n(e)},a.onerror=function(){t(a.error)}}catch(u){t(u)}})}).catch(t)});return u(t,n),t},setItem:function(e,n,r){var t=this;e=f(e);var o=new a(function(r,o){var i;t.ready().then(function(){return i=t._dbInfo,"[object Blob]"===h.call(n)?b(i.db).then(function(e){return e?n:(r=n,new a(function(e,n){var t=new FileReader;t.onerror=n,t.onloadend=function(n){var t=btoa(n.target.result||"");e({__local_forage_encoded_blob:!0,data:t,type:r.type})},t.readAsBinaryString(r)}));var r}):n}).then(function(n){R(t._dbInfo,p,function(i,a){if(i)return o(i);try{var u=a.objectStore(t._dbInfo.storeName);null===n&&(n=void 0);var c=u.put(n,e);a.oncomplete=function(){void 0===n&&(n=null),r(n)},a.onabort=a.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(f){o(f)}})}).catch(o)});return u(o,r),o},removeItem:function(e,n){var r=this;e=f(e);var t=new a(function(n,t){r.ready().then(function(){R(r._dbInfo,p,function(o,i){if(o)return t(o);try{var a=i.objectStore(r._dbInfo.storeName).delete(e);i.oncomplete=function(){n()},i.onerror=function(){t(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;t(e)}}catch(u){t(u)}})}).catch(t)});return u(t,n),t},clear:function(e){var n=this,r=new a(function(e,r){n.ready().then(function(){R(n._dbInfo,p,function(t,o){if(t)return r(t);try{var i=o.objectStore(n._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;r(e)}}catch(a){r(a)}})}).catch(r)});return u(r,e),r},length:function(e){var n=this,r=new a(function(e,r){n.ready().then(function(){R(n._dbInfo,y,function(t,o){if(t)return r(t);try{var i=o.objectStore(n._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){r(i.error)}}catch(a){r(a)}})}).catch(r)});return u(r,e),r},key:function(e,n){var r=this,t=new a(function(n,t){e<0?n(null):r.ready().then(function(){R(r._dbInfo,y,function(o,i){if(o)return t(o);try{var a=i.objectStore(r._dbInfo.storeName),u=!1,c=a.openCursor();c.onsuccess=function(){var r=c.result;r?0===e?n(r.key):u?n(r.key):(u=!0,r.advance(e)):n(null)},c.onerror=function(){t(c.error)}}catch(f){t(f)}})}).catch(t)});return u(t,n),t},keys:function(e){var n=this,r=new a(function(e,r){n.ready().then(function(){R(n._dbInfo,y,function(t,o){if(t)return r(t);try{var i=o.objectStore(n._dbInfo.storeName).openCursor(),a=[];i.onsuccess=function(){var n=i.result;n?(a.push(n.key),n.continue()):e(a)},i.onerror=function(){r(i.error)}}catch(u){r(u)}})}).catch(r)});return u(r,e),r},dropInstance:function(e,n){n=s.apply(this,arguments);var r,t=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName),e.name){var i=e.name===t.name&&this._dbInfo.db?a.resolve(this._dbInfo.db):I(e).then(function(n){var r=v[e.name],t=r.forages;r.db=n;for(var o=0;o<t.length;o++)t[o]._dbInfo.db=n;return n});r=e.storeName?i.then(function(n){if(n.objectStoreNames.contains(e.storeName)){var r=n.version+1;m(e);var t=v[e.name],i=t.forages;n.close();for(var u=0;u<i.length;u++){var c=i[u];c._dbInfo.db=null,c._dbInfo.version=r}return new a(function(n,t){var i=o.open(e.name,r);i.onerror=function(e){i.result.close(),t(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),n(e)}}).then(function(e){t.db=e;for(var n=0;n<i.length;n++){var r=i[n];r._dbInfo.db=e,g(r._dbInfo)}}).catch(function(n){throw(_(e,n)||a.resolve()).catch(function(){}),n})}}):i.then(function(n){m(e);var r=v[e.name],t=r.forages;n.close();for(var i=0;i<t.length;i++)t[i]._dbInfo.db=null;return new a(function(n,r){var t=o.deleteDatabase(e.name);t.onerror=t.onblocked=function(e){var n=t.result;n&&n.close(),r(e)},t.onsuccess=function(){var e=t.result;e&&e.close(),n(e)}}).then(function(e){r.db=e;for(var n=0;n<t.length;n++)g(t[n]._dbInfo)}).catch(function(n){throw(_(e,n)||a.resolve()).catch(function(){}),n})})}else r=a.reject("Invalid arguments");return u(r,n),r}};var D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x="~~local_forage_type~",B=/^~~local_forage_type~([^~]+)~/,k="__lfsc__:",C=k.length,T="arbf",M="blob",F="si08",L="ui08",$="uic8",z="si16",P="si32",U="ur16",q="ui32",W="fl32",H="fl64",Q=C+T.length,K=Object.prototype.toString;function X(e){var n,r,t,o,i,a=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var f=new ArrayBuffer(a),s=new Uint8Array(f);for(n=0;n<u;n+=4)r=D.indexOf(e[n]),t=D.indexOf(e[n+1]),o=D.indexOf(e[n+2]),i=D.indexOf(e[n+3]),s[c++]=r<<2|t>>4,s[c++]=(15&t)<<4|o>>2,s[c++]=(3&o)<<6|63&i;return f}function G(e){var n,r=new Uint8Array(e),t="";for(n=0;n<r.length;n+=3)t+=D[r[n]>>2],t+=D[(3&r[n])<<4|r[n+1]>>4],t+=D[(15&r[n+1])<<2|r[n+2]>>6],t+=D[63&r[n+2]];return r.length%3==2?t=t.substring(0,t.length-1)+"=":r.length%3==1&&(t=t.substring(0,t.length-2)+"=="),t}var J={serialize:function(e,n){var r="";if(e&&(r=K.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===K.call(e.buffer))){var t,o=k;e instanceof ArrayBuffer?(t=e,o+=T):(t=e.buffer,"[object Int8Array]"===r?o+=F:"[object Uint8Array]"===r?o+=L:"[object Uint8ClampedArray]"===r?o+=$:"[object Int16Array]"===r?o+=z:"[object Uint16Array]"===r?o+=U:"[object Int32Array]"===r?o+=P:"[object Uint32Array]"===r?o+=q:"[object Float32Array]"===r?o+=W:"[object Float64Array]"===r?o+=H:n(new Error("Failed to get type for BinaryArray"))),n(o+G(t))}else if("[object Blob]"===r){var i=new FileReader;i.onload=function(){var r=x+e.type+"~"+G(this.result);n(k+M+r)},i.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(a){console.error("Couldn't convert value into a JSON string: ",e),n(null,a)}},deserialize:function(e){if(e.substring(0,C)!==k)return JSON.parse(e);var n,r=e.substring(Q),t=e.substring(C,Q);if(t===M&&B.test(r)){var o=r.match(B);n=o[1],r=r.substring(o[0].length)}var a=X(r);switch(t){case T:return a;case M:return i([a],{type:n});case F:return new Int8Array(a);case L:return new Uint8Array(a);case $:return new Uint8ClampedArray(a);case z:return new Int16Array(a);case U:return new Uint16Array(a);case P:return new Int32Array(a);case q:return new Uint32Array(a);case W:return new Float32Array(a);case H:return new Float64Array(a);default:throw new Error("Unkown type: "+t);}},stringToBuffer:X,bufferToString:G};function V(e,n,r,t){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,t)}function Y(e,n,r,t,o,i){e.executeSql(r,t,o,function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[n.storeName],function(e,u){u.rows.length?i(e,a):V(e,n,function(){e.executeSql(r,t,o,i)},i)},i):i(e,a)},i)}var Z={_driver:"webSQLStorage",_initStorage:function(e){var n=this,r={db:null};if(e)for(var t in e)r[t]="string"!=typeof e[t]?e[t].toString():e[t];var o=new a(function(e,t){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(o){return t(o)}r.db.transaction(function(o){V(o,r,function(){n._dbInfo=r,e()},function(e,n){t(n)})},t)});return r.serializer=J,o},_support:"function"==typeof openDatabase,iterate:function(e,n){var r=this,t=new a(function(n,t){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){Y(r,o,"SELECT * FROM "+o.storeName,[],function(r,t){for(var i=t.rows,a=i.length,u=0;u<a;u++){var c=i.item(u),f=c.value;if(f&&(f=o.serializer.deserialize(f)),void 0!==(f=e(f,c.key,u+1)))return void n(f)}n()},function(e,n){t(n)})})}).catch(t)});return u(t,n),t},getItem:function(e,n){var r=this;e=f(e);var t=new a(function(n,t){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){Y(r,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],function(e,r){var t=r.rows.length?r.rows.item(0).value:null;t&&(t=o.serializer.deserialize(t)),n(t)},function(e,n){t(n)})})}).catch(t)});return u(t,n),t},setItem:function(e,n,r){return function e(n,r,t,o){var i=this;n=f(n);var c=new a(function(a,u){i.ready().then(function(){void 0===r&&(r=null);var c=r,f=i._dbInfo;f.serializer.serialize(r,function(r,s){s?u(s):f.db.transaction(function(e){Y(e,f,"INSERT OR REPLACE INTO "+f.storeName+" (key, value) VALUES (?, ?)",[n,r],function(){a(c)},function(e,n){u(n)})},function(r){if(r.code===r.QUOTA_ERR){if(o>0)return void a(e.apply(i,[n,c,t,o-1]));u(r)}})})}).catch(u)});return u(c,t),c}.apply(this,[e,n,r,1])},removeItem:function(e,n){var r=this;e=f(e);var t=new a(function(n,t){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){Y(r,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],function(){n()},function(e,n){t(n)})})}).catch(t)});return u(t,n),t},clear:function(e){var n=this,r=new a(function(e,r){n.ready().then(function(){var t=n._dbInfo;t.db.transaction(function(n){Y(n,t,"DELETE FROM "+t.storeName,[],function(){e()},function(e,n){r(n)})})}).catch(r)});return u(r,e),r},length:function(e){var n=this,r=new a(function(e,r){n.ready().then(function(){var t=n._dbInfo;t.db.transaction(function(n){Y(n,t,"SELECT COUNT(key) as c FROM "+t.storeName,[],function(n,r){var t=r.rows.item(0).c;e(t)},function(e,n){r(n)})})}).catch(r)});return u(r,e),r},key:function(e,n){var r=this,t=new a(function(n,t){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){Y(r,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,r){var t=r.rows.length?r.rows.item(0).key:null;n(t)},function(e,n){t(n)})})}).catch(t)});return u(t,n),t},keys:function(e){var n=this,r=new a(function(e,r){n.ready().then(function(){var t=n._dbInfo;t.db.transaction(function(n){Y(n,t,"SELECT key FROM "+t.storeName,[],function(n,r){for(var t=[],o=0;o<r.rows.length;o++)t.push(r.rows.item(o).key);e(t)},function(e,n){r(n)})})}).catch(r)});return u(r,e),r},dropInstance:function(e,n){n=s.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var t,o=this;return u(t=e.name?new a(function(n){var t;t=e.name===r.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?n({db:t,storeNames:[e.storeName]}):n(function(e){return new a(function(n,r){e.transaction(function(t){t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(r,t){for(var o=[],i=0;i<t.rows.length;i++)o.push(t.rows.item(i).name);n({db:e,storeNames:o})},function(e,n){r(n)})},function(e){r(e)})})}(t))}).then(function(e){return new a(function(n,r){e.db.transaction(function(t){function o(e){return new a(function(n,r){t.executeSql("DROP TABLE IF EXISTS "+e,[],function(){n()},function(e,n){r(n)})})}for(var i=[],u=0,c=e.storeNames.length;u<c;u++)i.push(o(e.storeNames[u]));a.all(i).then(function(){n()}).catch(function(e){r(e)})},function(e){r(e)})})}):a.reject("Invalid arguments"),n),t}};function ee(e,n){var r=e.name+"/";return e.storeName!==n.storeName&&(r+=e.storeName+"/"),r}function ne(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}()||localStorage.length>0}var re={_driver:"localStorageWrapper",_initStorage:function(e){var n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=ee(e,this._defaultConfig),ne()?(this._dbInfo=n,n.serializer=J,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,n){var r=this,t=r.ready().then(function(){for(var n=r._dbInfo,t=n.keyPrefix,o=t.length,i=localStorage.length,a=1,u=0;u<i;u++){var c=localStorage.key(u);if(0===c.indexOf(t)){var f=localStorage.getItem(c);if(f&&(f=n.serializer.deserialize(f)),void 0!==(f=e(f,c.substring(o),a++)))return f}}});return u(t,n),t},getItem:function(e,n){var r=this;e=f(e);var t=r.ready().then(function(){var n=r._dbInfo,t=localStorage.getItem(n.keyPrefix+e);return t&&(t=n.serializer.deserialize(t)),t});return u(t,n),t},setItem:function(e,n,r){var t=this;e=f(e);var o=t.ready().then(function(){void 0===n&&(n=null);var r=n;return new a(function(o,i){var a=t._dbInfo;a.serializer.serialize(n,function(n,t){if(t)i(t);else try{localStorage.setItem(a.keyPrefix+e,n),o(r)}catch(u){"QuotaExceededError"!==u.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==u.name||i(u),i(u)}})})});return u(o,r),o},removeItem:function(e,n){var r=this;e=f(e);var t=r.ready().then(function(){var n=r._dbInfo;localStorage.removeItem(n.keyPrefix+e)});return u(t,n),t},clear:function(e){var n=this,r=n.ready().then(function(){for(var e=n._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var t=localStorage.key(r);0===t.indexOf(e)&&localStorage.removeItem(t)}});return u(r,e),r},length:function(e){var n=this.keys().then(function(e){return e.length});return u(n,e),n},key:function(e,n){var r=this,t=r.ready().then(function(){var n,t=r._dbInfo;try{n=localStorage.key(e)}catch(o){n=null}return n&&(n=n.substring(t.keyPrefix.length)),n});return u(t,n),t},keys:function(e){var n=this,r=n.ready().then(function(){for(var e=n._dbInfo,r=localStorage.length,t=[],o=0;o<r;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&t.push(i.substring(e.keyPrefix.length))}return t});return u(r,e),r},dropInstance:function(e,n){if(n=s.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var t,o=this;return u(t=e.name?new a(function(n){e.storeName?n(ee(e,o._defaultConfig)):n(e.name+"/")}).then(function(e){for(var n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}):a.reject("Invalid arguments"),n),t}},te=function(e,n){for(var r,t,o=e.length,i=0;i<o;){if((r=e[i])===(t=n)||"number"==typeof r&&"number"==typeof t&&isNaN(r)&&isNaN(t))return!0;i++}return!1},oe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},ie={},ae={},ue={INDEXEDDB:O,WEBSQL:Z,LOCALSTORAGE:re},ce=[ue.INDEXEDDB._driver,ue.WEBSQL._driver,ue.LOCALSTORAGE._driver],fe=["dropInstance"],se=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(fe),le={description:"",driver:ce.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function de(e,n){e[n]=function(){var r=arguments;return e.ready().then(function(){return e[n].apply(e,r)})}}function ve(){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var r in n)n.hasOwnProperty(r)&&(oe(n[r])?arguments[0][r]=n[r].slice():arguments[0][r]=n[r])}return arguments[0]}var he=new(function(){function e(n){for(var r in function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),ue)if(ue.hasOwnProperty(r)){var t=ue[r],o=t._driver;this[r]=o,ie[o]||this.defineDriver(t)}this._defaultConfig=ve({},le),this._config=ve({},this._defaultConfig,n),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":t(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var n in e){if("storeName"===n&&(e[n]=e[n].replace(/\W/g,"_")),"version"===n&&"number"!=typeof e[n])return new Error("Database version must be a number.");this._config[n]=e[n]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,n,r){var t=new a(function(n,r){try{var t=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(o);for(var i=se.concat("_initStorage"),c=0,f=i.length;c<f;c++){var s=i[c];if((!te(fe,s)||e[s])&&"function"!=typeof e[s])return void r(o)}!function(){for(var n=function(e){return function(){var n=new Error("Method "+e+" is not implemented by the current driver"),r=a.reject(n);return u(r,arguments[arguments.length-1]),r}},r=0,t=fe.length;r<t;r++){var o=fe[r];e[o]||(e[o]=n(o))}}();var l=function(r){ie[t]&&console.info("Redefining LocalForage driver: "+t),ie[t]=e,ae[t]=r,n()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(l,r):l(!!e._support):l(!0)}catch(d){r(d)}});return c(t,n,r),t},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,n,r){var t=ie[e]?a.resolve(ie[e]):a.reject(new Error("Driver not found."));return c(t,n,r),t},e.prototype.getSerializer=function(e){var n=a.resolve(J);return c(n,e),n},e.prototype.ready=function(e){var n=this,r=n._driverSet.then(function(){return null===n._ready&&(n._ready=n._initDriver()),n._ready});return c(r,e,e),r},e.prototype.setDriver=function(e,n,r){var t=this;oe(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){t._config.driver=t.driver()}function u(e){return t._extend(e),i(),t._ready=t._initStorage(t._config),t._ready}var f=null!==this._driverSet?this._driverSet.catch(function(){return a.resolve()}):a.resolve();return this._driverSet=f.then(function(){var e=o[0];return t._dbInfo=null,t._ready=null,t.getDriver(e).then(function(e){t._driver=e._driver,i(),t._wrapLibraryMethodsWithReady(),t._initDriver=function(e){return function(){var n=0;return function r(){for(;n<e.length;){var o=e[n];return n++,t._dbInfo=null,t._ready=null,t.getDriver(o).then(u).catch(r)}i();var c=new Error("No available storage method found.");return t._driverSet=a.reject(c),t._driverSet}()}}(o)})}).catch(function(){i();var e=new Error("No available storage method found.");return t._driverSet=a.reject(e),t._driverSet}),c(this._driverSet,n,r),this._driverSet},e.prototype.supports=function(e){return!!ae[e]},e.prototype._extend=function(e){ve(this,e)},e.prototype._getSupportedDrivers=function(e){for(var n=[],r=0,t=e.length;r<t;r++){var o=e[r];this.supports(o)&&n.push(o)}return n},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,n=se.length;e<n;e++)de(this,se[e])},e.prototype.createInstance=function(n){return new e(n)},e}());n.exports=he},{3:3}]},{},[4])(4)});var bi=function(){function e(){var $EM1A$$interop$default=ta(xa);_h(this,e),this.localforage=$EM1A$$interop$default.d}return ai(e,[{key:"getProfilActuel",value:function(){var $EM1A$$interop$default=ta(xa);return $EM1A$$interop$default.d.getItem("profil")}},{key:"setProfilActuel",value:function(e){var $EM1A$$interop$default=ta(xa);return $EM1A$$interop$default.d.setItem("profil",e)}},{key:"getProfil",value:function(e){var $EM1A$$interop$default=ta(xa);return $EM1A$$interop$default.d.getItem(e)}},{key:"getProfils",value:function(){var $EM1A$$interop$default=ta(xa);return $EM1A$$interop$default.d.keys().then(function(e){return e.filter(function(e){return"profil"!=e})}).then(function(e){return e.sort(function(e){return"mes_infos"!==e})})}},{key:"supprimerTout",value:function(){var $EM1A$$interop$default=ta(xa);return $EM1A$$interop$default.d.dropInstance().then(function(){console.debug("Les donn\xE9es personnelles ont \xE9t\xE9 supprim\xE9es")}).catch(function(e){console.error("Erreur lors de la suppression de toutes les donn\xE9es personnelles"),console.error(e)})}},{key:"supprimer",value:function(e){var $EM1A$$interop$default=ta(xa);return $EM1A$$interop$default.d.removeItem(e).then(function(){console.debug("Les donn\xE9es personnelles ont \xE9t\xE9 supprim\xE9es (".concat(e,")"))}).catch(function(r){console.error("Erreur lors de la suppression des donn\xE9es personnelles (".concat(e,")")),console.error(r)})}},{key:"charger",value:function(e){var $EM1A$$interop$default=ta(xa);return $EM1A$$interop$default.d.getItem(e.nom).then(function(r){return null!==r?e.fillData(r):(console.debug("Pas de donn\xE9es locales pour l\u2019instant (".concat(e.nom,")")),e.resetData()),e}).catch(function(r){console.error("Erreur de chargement des donn\xE9es locales (".concat(e.nom,")")),console.error(r)})}},{key:"enregistrer",value:function(e){var $EM1A$$interop$default=ta(xa);return $EM1A$$interop$default.d.setItem(e.nom,e.getData()).then(function(r){console.debug("Les r\xE9ponses au questionnaire ont bien \xE9t\xE9 enregistr\xE9es (".concat(e.nom,")")),console.debug(r)}).catch(function(r){console.error("Les r\xE9ponses au questionnaire n\u2019ont pas pu \xEAtre enregistr\xE9es (".concat(e.nom,")")),console.error(r)})}}]),e}();function ci(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ye(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function di(e,t,s){return t&&Ye(e.prototype,t),s&&Ye(e,s),e}var ei=["symptomesactuels","symptomespasses","contactarisque","depistage","residence","foyer","antecedents","caracteristiques","activitepro"];var fi={nom:{previous:{introduction:function(){return!0}},next:{symptomesactuels:function(e){return e.nom}}},symptomesactuels:{previous:{introduction:function(){return!0}},next:{debutsymptomes:function(e){return e.isSymptomesActuelsComplete()&&e.hasSymptomesActuelsReconnus()&&!e.hasSuiviStartDate()},depistage:function(e){return e.isSymptomesActuelsComplete()&&e.hasSymptomesActuelsReconnus()&&e.hasSuiviStartDate()},symptomespasses:function(e){return e.isSymptomesActuelsComplete()}}},symptomespasses:{previous:{symptomesactuels:function(){return!0}},next:{debutsymptomes:function(e){return e.isSymptomesPassesComplete()&&e.symptomes_passes&&!e.hasSuiviStartDate()},depistage:function(e){return e.isSymptomesPassesComplete()&&e.symptomes_passes&&e.hasSuiviStartDate()},contactarisque:function(e){return e.isSymptomesPassesComplete()}}},contactarisque:{previous:{symptomespasses:function(){return!0}},next:{depistage:function(e){return e.isContactARisqueComplete()}}},debutsymptomes:{previous:{symptomesactuels:function(e){return e.hasSymptomesActuelsReconnus()},symptomespasses:function(e){return e.symptomes_passes}},next:{residence:function(e){return e.hasSuiviStartDate()}}},depistage:{previous:{debutsymptomes:function(e){return e.hasSuiviStartDate()},contactarisque:function(e){return e.isContactARisqueComplete()}},next:{residence:function(e){return e.isDepistageComplete()}}},residence:{previous:{depistage:function(e){return e.isDepistageComplete()}},next:{foyer:function(e){return e.isResidenceComplete()}}},foyer:{previous:{residence:function(){return!0}},next:{antecedents:function(e){return e.isFoyerComplete()}}},antecedents:{previous:{foyer:function(){return!0}},next:{caracteristiques:function(e){return e.isAntecedentsComplete()}}},caracteristiques:{previous:{antecedents:function(){return!0}},next:{activitepro:function(e){return e.isCaracteristiquesComplete()&&e.age>=15},pediatrie:function(e){return e.isCaracteristiquesComplete()&&e.age<15}}},activitepro:{previous:{caracteristiques:function(){return!0}},next:{conseils:function(e){return e.isActiviteProComplete()}}},conseils:{},suivisymptomes:{previous:{conseils:function(){return!0}},next:{conseils:function(e){return e.isComplete()}}}};var gi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ei;ci(this,e),this.transitions=t,this.ordre=s,this.total=s.length,this.firstPage=s[0]}return di(e,[{key:"before",value:function(e,t){if(void 0!==this.transitions[e])return this.checkPathTo(e,t)}},{key:"checkPathTo",value:function(e,t){for(var s=this.firstPage,n=[s];s;){if(s===e)return void console.debug("success!");var r=this.nextPage(s,t);if(!r)break;if(n.indexOf(r)>-1)break;console.debug("next step: ".concat(r)),s=r,n.push(s)}console.debug("could not reach ".concat(e," via steps:"),n);var o=n[n.length-1];return console.debug("redirecting to ".concat(o)),o}},{key:"nextPage",value:function(e,t){return this.findNeighbor("next",e,t)}},{key:"previousPage",value:function(e,t){return this.findNeighbor("previous",e,t)}},{key:"findNeighbor",value:function(e,t,s){var n=this.transitions[t];if(void 0!==n&&void 0!==n[e]){var r;if(Object.keys(n[e]).forEach(function(t){var o=n[e][t];o(s)?(console.debug("matched predicate for ".concat(t,":"),o),r||(r=t)):console.debug("did not match predicate for ".concat(t,":"),o)}),r)return r;console.debug("no ".concat(e," reachable page for ").concat(t))}}},{key:"progress",value:function(e){var t=this.ordre.indexOf(e)+1;return 0===t?"":"".concat(t,"/").concat(this.total,"\xA0-\xA0")}}]),e}();function hi(e,i){if(!e.isComplete())return i.checkPathTo("conseils",e)}function ii(e,i){if(!e.suivi_active)return i.checkPathTo("conseils",e)}function ji(e){return e.requiertSuivi()?void 0===e.suivi_start_date?"debutsymptomes":void 0:"depistage"}function ki(e){var $vI6X$$interop$default=ta(Dc);var i=new $vI6X$$interop$default.d(null,!0);function r(i,r){o(i,r,function(r){return e.questionnaire.before(i,r)})}function o(i,r,o){t(i,function(i){r(i,e)},o)}function t(r,o,t){i.on(new RegExp("^"+r+"$"),function(){var i=Lh(r,e);!function(i,r){var o=i.querySelector("legend .progress");o&&(o.innerText=e.questionnaire.progress(r));var t=i.querySelector("form .back-button");if(t){var c=e.questionnaire.previousPage(r,e.profil);c&&t.setAttribute("href","#".concat(c))}[].forEach.call(i.querySelectorAll(".premiere-question"),function(i){i.setAttribute("href","#".concat(e.questionnaire.firstPage))})}(i,r),o(i),window.plausible("pageview")},{before:function(i){if(void 0!==t){var o=t(e.profil,e.questionnaire);o&&o!==r?(c(o),i(!1)):i()}else i()}})}function c(e){"undefined"!=typeof window&&window.history&&window.history.replaceState?(window.history.replaceState({},"","#".concat(e)),i.resolve()):i.navigate(e)}return"/"!==i.root.slice(-1)&&(i.root=i.root+"/"),i.hooks({before:function(i){var r=document.querySelector("header section");void 0===e.profil.nom?(ga(r.querySelector("#js-profil-empty-header")),fa(r.querySelector("#js-profil-full-header"))):(ga(r.querySelector("#js-profil-full-header")),fa(r.querySelector("#js-profil-empty-header")),li(r.querySelector("#nom-profil-header"),e)),i()},after:function(){var e=lb();document.dispatchEvent(new CustomEvent("pageChanged",{detail:e}))}}),o("introduction",ti),o("nom",zi),r("symptomesactuels",Bi),r("depistage",Ci),r("symptomespasses",Di),r("contactarisque",Ei),r("residence",Fi),r("foyer",Li),r("antecedents",Mi),r("caracteristiques",Ni),r("activitepro",Oi),o("conseils",Pi,hi),o("suiviintroduction",aj,ii),o("debutsymptomes",cj),o("suivisymptomes",hj,ji),o("suivihistorique",lj),t("pediatrie",function(i){e.profil.isComplete()&&(ga(i.querySelector("#js-profil-full")),fa(i.querySelector("#js-profil-empty")))}),t("medecinedutravail",function(i){e.profil.isComplete()&&(ga(i.querySelector("#js-profil-full")),fa(i.querySelector("#js-profil-empty")))}),t("conditionsutilisation",function(i){e.profil.isComplete()&&(ga(i.querySelector("#js-profil-full")),fa(i.querySelector("#js-profil-empty")))}),t("nouvelleversiondisponible",function(r){var o=i.lastRouteResolved(),t=new URLSearchParams(o.query).get("origine");yi(r,e,t)}),i.on(new RegExp("^suividate$"),function(){},{before:function(e){c("debutsymptomes"),e(!1)}}),i.notFound(function(){c("introduction")}),i}var Cc,Dc={};!function(e,t){"object"==typeof Dc?Dc=t():"function"==typeof Cc&&Cc.amd?Cc(t):e.Navigo=t()}(Dc,function(){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function t(){return!("undefined"==typeof window||!window.history||!window.history.pushState)}function n(e,n,o){this.root=null,this._routes=[],this._useHash=n,this._hash=void 0===o?"#":o,this._paused=!1,this._destroyed=!1,this._lastRouteResolved=null,this._notFoundHandler=null,this._defaultHandler=null,this._usePushState=!n&&t(),this._onLocationChange=this._onLocationChange.bind(this),this._genericHooks=null,this._historyAPIUpdateMethod="pushState",e?this.root=n?e.replace(/\/$/,"/"+this._hash):e.replace(/\/$/,""):n&&(this.root=this._cLoc().split(this._hash)[0].replace(/\/$/,"/"+this._hash)),this._listen(),this.updatePageLinks()}function o(e){return e instanceof RegExp?e:e.replace(/\/+$/,"").replace(/^\/+/,"^/")}function i(e){return e.replace(/\/$/,"").split("/").length}function s(e,t){return i(t)-i(e)}function r(e,t){return function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map(function(t){var i=function(e){var t=[];return{regexp:e instanceof RegExp?e:new RegExp(e.replace(n.PARAMETER_REGEXP,function(e,o,i){return t.push(i),n.REPLACE_VARIABLE_REGEXP}).replace(n.WILDCARD_REGEXP,n.REPLACE_WILDCARD)+n.FOLLOWED_BY_SLASH_REGEXP,n.MATCH_REGEXP_FLAGS),paramNames:t}}(o(t.route)),s=i.regexp,r=i.paramNames,a=e.replace(/^\/+/,"/").match(s),h=function(e,t){return 0===t.length?null:e?e.slice(1,e.length).reduce(function(e,n,o){return null===e&&(e={}),e[t[o]]=decodeURIComponent(n),e},null):null}(a,r);return!!a&&{match:a,route:t,params:h}}).filter(function(e){return e})}(e,t)[0]||!1}function a(e,t){var n=t.map(function(t){return""===t.route||"*"===t.route?e:e.split(new RegExp(t.route+"($|/)"))[0]}),i=o(e);return n.length>1?n.reduce(function(e,t){return e.length>t.length&&(e=t),e},n[0]):1===n.length?n[0]:i}function h(e,n,o){var i,s=function(e){return e.split(/\?(.*)?$/)[0]};return void 0===o&&(o="#"),t()&&!n?s(e).split(o)[0]:(i=e.split(o)).length>1?s(i[1]):s(i[0])}function u(t,n,o){if(n&&"object"===(void 0===n?"undefined":e(n))){if(n.before)return void n.before(function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(t(),n.after&&n.after(o))},o);if(n.after)return t(),void(n.after&&n.after(o))}t()}return n.prototype={helpers:{match:r,root:a,clean:o,getOnlyURL:h},navigate:function(e,t){var n;return e=e||"",this._usePushState?(n=(n=(t?"":this._getRoot()+"/")+e.replace(/^\/+/,"/")).replace(/([^:])(\/{2,})/g,"$1/"),history[this._historyAPIUpdateMethod]({},"",n),this.resolve()):"undefined"!=typeof window&&(e=e.replace(new RegExp("^"+this._hash),""),window.location.href=window.location.href.replace(/#$/,"").replace(new RegExp(this._hash+".*$"),"")+this._hash+e),this},on:function(){for(var t=this,n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];if("function"==typeof o[0])this._defaultHandler={handler:o[0],hooks:o[1]};else if(o.length>=2){if("/"===o[0]){var r=o[1];"object"===e(o[1])&&(r=o[1].uses),this._defaultHandler={handler:r,hooks:o[2]}}else this._add(o[0],o[1],o[2]);}else"object"===e(o[0])&&Object.keys(o[0]).sort(s).forEach(function(e){t.on(e,o[0][e])});return this},off:function(e){return null!==this._defaultHandler&&e===this._defaultHandler.handler?this._defaultHandler=null:null!==this._notFoundHandler&&e===this._notFoundHandler.handler&&(this._notFoundHandler=null),this._routes=this._routes.reduce(function(t,n){return n.handler!==e&&t.push(n),t},[]),this},notFound:function(e,t){return this._notFoundHandler={handler:e,hooks:t},this},resolve:function(e){var n,o,i=this,s=(e||this._cLoc()).replace(this._getRoot(),"");this._useHash&&(s=s.replace(new RegExp("^/"+this._hash),"/"));var a=function(e){return e.split(/\?(.*)?$/).slice(1).join("")}(e||this._cLoc()),l=h(s,this._useHash,this._hash);return!this._paused&&(this._lastRouteResolved&&l===this._lastRouteResolved.url&&a===this._lastRouteResolved.query?(this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.already&&this._lastRouteResolved.hooks.already(this._lastRouteResolved.params),!1):(o=r(l,this._routes))?(this._callLeave(),this._lastRouteResolved={url:l,query:a,hooks:o.route.hooks,params:o.params,name:o.route.name},n=o.route.handler,u(function(){u(function(){o.route.route instanceof RegExp?n.apply(void 0,o.match.slice(1,o.match.length)):n(o.params,a)},o.route.hooks,o.params,i._genericHooks)},this._genericHooks,o.params),o):this._defaultHandler&&(""===l||"/"===l||l===this._hash||function(e,n,o){if(t()&&!n)return!1;if(!e.match(o))return!1;var i=e.split(o);return i.length<2||""===i[1]}(l,this._useHash,this._hash))?(u(function(){u(function(){i._callLeave(),i._lastRouteResolved={url:l,query:a,hooks:i._defaultHandler.hooks},i._defaultHandler.handler(a)},i._defaultHandler.hooks)},this._genericHooks),!0):(this._notFoundHandler&&u(function(){u(function(){i._callLeave(),i._lastRouteResolved={url:l,query:a,hooks:i._notFoundHandler.hooks},i._notFoundHandler.handler(a)},i._notFoundHandler.hooks)},this._genericHooks),!1))},destroy:function(){this._routes=[],this._destroyed=!0,this._lastRouteResolved=null,this._genericHooks=null,clearTimeout(this._listeningInterval),"undefined"!=typeof window&&(window.removeEventListener("popstate",this._onLocationChange),window.removeEventListener("hashchange",this._onLocationChange))},updatePageLinks:function(){var e=this;"undefined"!=typeof document&&this._findLinks().forEach(function(t){t.hasListenerAttached||(t.addEventListener("click",function(n){if((n.ctrlKey||n.metaKey)&&"a"==n.target.tagName.toLowerCase())return!1;var o=e.getLinkPath(t);e._destroyed||(n.preventDefault(),e.navigate(o.replace(/\/+$/,"").replace(/^\/+/,"/")))}),t.hasListenerAttached=!0)})},generate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._routes.reduce(function(n,o){var i;if(o.name===e)for(i in n=o.route,t)n=n.toString().replace(":"+i,t[i]);return n},"");return this._useHash?this._hash+n:n},link:function(e){return this._getRoot()+e},pause:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._paused=e,this._historyAPIUpdateMethod=e?"replaceState":"pushState"},resume:function(){this.pause(!1)},historyAPIUpdateMethod:function(e){return void 0===e?this._historyAPIUpdateMethod:(this._historyAPIUpdateMethod=e,e)},disableIfAPINotAvailable:function(){t()||this.destroy()},lastRouteResolved:function(){return this._lastRouteResolved},getLinkPath:function(e){return e.getAttribute("href")},hooks:function(e){this._genericHooks=e},_add:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"string"==typeof t&&(t=encodeURI(t)),this._routes.push("object"===(void 0===n?"undefined":e(n))?{route:t,handler:n.uses,name:n.as,hooks:o||n.hooks}:{route:t,handler:n,hooks:o}),this._add},_getRoot:function(){return null!==this.root?this.root:(this.root=a(this._cLoc().split("?")[0],this._routes),this.root)},_listen:function(){var e=this;if(this._usePushState)window.addEventListener("popstate",this._onLocationChange);else if("undefined"!=typeof window&&"onhashchange"in window)window.addEventListener("hashchange",this._onLocationChange);else{var t=this._cLoc(),n=void 0,o=void 0;(o=function(){n=e._cLoc(),t!==n&&(t=n,e.resolve()),e._listeningInterval=setTimeout(o,200)})()}},_cLoc:function(){return"undefined"!=typeof window?void 0!==window.__NAVIGO_WINDOW_LOCATION_MOCK__?window.__NAVIGO_WINDOW_LOCATION_MOCK__:o(window.location.href):""},_findLinks:function(){return[].slice.call(document.querySelectorAll("[data-navigo]"))},_onLocationChange:function(){this.resolve()},_callLeave:function(){var e=this._lastRouteResolved;e&&e.hooks&&e.hooks.leave&&e.hooks.leave(e.params)}},n.PARAMETER_REGEXP=/([:*])(\w+)/g,n.WILDCARD_REGEXP=/\*/g,n.REPLACE_VARIABLE_REGEXP="([^/]+)",n.REPLACE_WILDCARD="(?:.*)",n.FOLLOWED_BY_SLASH_REGEXP="(?:/$|$)",n.MATCH_REGEXP_FLAGS="",n});function li(e,t){e&&(e.textContent=t.profil.affichageNom())}function mi(e,t){if(e){var n=t.estMonProfil()?"Mes conseils":"Conseils pour \xAB\xA0".concat(t.nom,"\xA0\xBB");e.textContent=n}}function ni(e,t){e.textContent=si[t]||"Inconnu"}function oi(e,t){e.setAttribute("href",ri[t])}function pi(e,t){if(t.sup65||t.profil.grossesse_3e_trimestre||t.imc>30){var n="";t.sup65?n="vous \xEAtes \xE2g\xE9\xB7e de plus de 65\xA0ans":t.profil.grossesse_3e_trimestre&&(n="vous \xEAtes au 3e trimestre de votre grossesse"),t.imc>30&&(n+=n?" et ":"",n+="vous avez un IMC sup\xE9rieur\xA0\xE0\xA030\xA0("+Math.round(t.imc)+")"),n+=".",e.textContent=n}}function qi(e,t){if(t.antecedents||t.profil.antecedent_chronique_autre){var n="";t.antecedents&&(n="Vous avez des ant\xE9c\xE9dents \xE0 risque"),t.profil.antecedent_chronique_autre&&(n+=n?" et vous ":"Vous ",n+="avez une maladie chronique, un handicap ou vous prenez un traitement au long cours"),n+=".",e.textContent=n}}var ri={"01":"http://www.ain.gouv.fr/coronavirus-covid-19-r1627.html","02":"https://www.aisne.gouv.fr/Actualites/COVID-19-point-sur-la-situation-dans-l-Aisne","03":"http://www.allier.gouv.fr/covid-19-point-sur-la-situation-dans-l-allier-a3067.html","04":"http://www.alpes-de-haute-provence.gouv.fr/Actualites/COVID-19-Point-sur-la-situation-dans-les-Alpes-de-Haute-Provence","05":"http://www.hautes-alpes.gouv.fr/informations-covid-19-r1977.html","06":"http://www.alpes-maritimes.gouv.fr/Actualites/COVID-19-Point-sur-la-situation-dans-les-Alpes-Maritimes","07":"http://www.ardeche.gouv.fr/covid-19-point-sur-la-situation-en-ardeche-r1877.html","08":"http://www.ardennes.gouv.fr/crise-sanitaire-liee-a-l-epidemie-de-covid-19-r906.html","09":"http://www.ariege.gouv.fr/Actualites/Covid-19-Intensification-du-port-du-masque-et-controle-du-respect-des-mesures-barriere",10:"http://www.aube.gouv.fr/Actualites/COVID-19-Point-sur-la-situation-de-l-Aube",11:"http://www.aude.gouv.fr/coronavirus-r2462.html",12:"http://www.aveyron.gouv.fr/covid-19-r396.html",13:"http://www.bouches-du-rhone.gouv.fr/Actualites/Actualites/Actualites-COVID-19",14:"http://www.calvados.gouv.fr/coronavirus-covid-19-informations-et-r1953.html",15:"http://www.cantal.gouv.fr/coronavirus-covid-19-informations-et-r2804.html",16:"http://www.charente.gouv.fr/Actualites/Coronavirus-COVID-19-informations-mesures-sanitaires-et-deconfinement",17:"http://www.charente-maritime.gouv.fr/Politiques-publiques/Securite/Securite-sanitaire/Coronavirus-Deconfinement-Masques-Tests/Coronavirus-COVID-19-Informations-recommandations",18:"https://www.cher.gouv.fr/Actualites/COVID-19-point-sur-la-situation-dans-le-Cher",19:"http://www.correze.gouv.fr/Politiques-publiques/Sante/COVID-19",21:"http://www.cote-dor.gouv.fr/coronavirus-covid-19-toutes-les-informations-r3115.html",22:"https://www.cotes-darmor.gouv.fr/Politiques-publiques/Sante/Covid-19",23:"http://www.creuse.gouv.fr/Actualites/Covid-19",24:"http://www.dordogne.gouv.fr/Politiques-publiques/Sante-solidarite-et-cohesion-sociale/Informations-coronavirus-COVID19",25:"http://www.doubs.gouv.fr/Actualites/COVID-19-Point-sur-la-situation-dans-le-Doubs",26:"http://www.drome.gouv.fr/le-covid-19-en-drome-a7414.html",27:"https://www.eure.gouv.fr/Politiques-publiques/Sante/Coronavirus-COVID-19",28:"https://www.eure-et-loir.gouv.fr/Actualites/Annee-2020/INFORMATIONS-CORONAVIRUS-COVID-19",29:"https://www.finistere.gouv.fr/Actualites/Covid-19-informations","2A":"http://www.corse-du-sud.gouv.fr/information-coronavirus-a2335.html","2B":"http://www.haute-corse.gouv.fr/covid-19-point-sur-la-situation-en-haute-corse-r651.html",30:"http://www.gard.gouv.fr/Actualites/COVID-19-Point-sur-la-situation-dans-le-Gard",31:"http://www.haute-garonne.gouv.fr/Politiques-publiques/Securite-et-protection-des-personnes-et-des-biens/Coronavirus-COVID19",32:"http://www.gers.gouv.fr/Actualites/COVID-19-Point-sur-la-situation-sans-le-Gers",33:"http://www.gironde.gouv.fr/Actualites/COVID-19-point-de-la-situation-en-Gironde",34:"http://www.herault.gouv.fr/Actualites/L-Herault-face-a-la-Covid-19",35:"https://www.ille-et-vilaine.gouv.fr/Actualites/Coronavirus-COVID-19",36:"https://www.indre.gouv.fr/Politiques-publiques/Securite-et-protection-de-la-population/COVID-19",37:"https://www.indre-et-loire.gouv.fr/Actualites/COVID-19-Deconfinement-phase-2",38:"http://www.isere.gouv.fr/Actualites/Actualite-des-particuliers/Actualites-COVID-de-RENTREE-2020",39:"http://www.isere.gouv.fr/Politiques-publiques/Risques/Risques-sanitaires/Covid-19",40:"http://www.landes.gouv.fr/covid-19-point-sur-la-situation-dans-les-landes-r887.html",41:"https://www.loir-et-cher.gouv.fr/Actualites/COVID-19-Point-sur-la-situation-en-Loir-et-Cher",42:"http://www.loire.gouv.fr/covid-19-point-de-situation-dans-la-loire-r1747.html",43:"http://www.haute-loire.gouv.fr/",44:"https://www.loire-atlantique.gouv.fr/Actualites/COVID-19-Point-sur-la-situation-en-Loire-Atlantique",45:"https://www.loiret.gouv.fr/Actualites/COVID-19-Informations-recommandations-mesures-sanitaires",46:"http://www.lot.gouv.fr/covid-19-point-sur-la-situation-dans-le-lot-r4332.html",47:"http://www.lot-et-garonne.gouv.fr/coronavirus-covid-19-toutes-les-informations-r876.html",48:"http://www.lozere.gouv.fr/Actualites/COVID-19-Point-de-situation-en-Lozere",49:"http://www.maine-et-loire.gouv.fr/coronavirus-covid-19-strategie-de-deconfinement-r2190.html",50:"https://www.manche.gouv.fr/Politiques-publiques/Sante/Coronavirus-COVID-19",51:"http://www.marne.gouv.fr/Actualites/Infos/Coronavirus-COVID-19",52:"http://www.haute-marne.gouv.fr/Politiques-publiques/Securite/Securite-sanitaire/COVID-19/Covid-19",53:"https://www.mayenne.gouv.fr/Politiques-publiques/Sante/Coronavirus-COVID-19-Informations-recommandations-et-mesures-sanitaires",54:"http://www.meurthe-et-moselle.gouv.fr/Politiques-publiques/Securite-et-protection-de-la-population/Coronavirus-COVID-19",55:"http://www.meuse.gouv.fr/Actualites/Mesures-relatives-a-la-lutte-contre-le-virus-Covid-19",56:"https://www.morbihan.gouv.fr/Actualites/Actus/Le-Morbihan-face-au-Coronavirus-Covid19",57:"http://www.moselle.gouv.fr/tags/view/Les+dossiers/Informations+COVID-19",58:"http://www.nievre.gouv.fr/covid-19-r781.html",59:"https://www.nord.gouv.fr/Actualites/COVID-19-Point-sur-la-situation-dans-le-Nord",60:"https://www.oise.gouv.fr/Actualites/COVID-19",61:"http://www.orne.gouv.fr/coronavirus-covid19-r4087.html",62:"https://www.pas-de-calais.gouv.fr/Actualites/COVID-19-Point-sur-la-situation-dans-le-Pas-de-Calais.",63:"http://www.puy-de-dome.gouv.fr/strategie-locale-de-deconfinement-a8240.html",64:"http://www.pyrenees-atlantiques.gouv.fr/Actualites/COVID-19-Point-sur-la-situation-en-Pyrenees-Atlantiques",65:"http://www.hautes-pyrenees.gouv.fr/covid-19-point-sur-la-situation-en-hautes-pyrenees-r1537.html",66:"http://www.pyrenees-orientales.gouv.fr/Actualites/Coronavirus-Covid-19",67:"http://www.bas-rhin.gouv.fr/Actualites/Covid-19",68:"http://www.haut-rhin.gouv.fr/Actualites/Actualites-du-Prefet-et-des-Sous-Prefets/Coronavirus-COVID-19",69:"http://www.rhone.gouv.fr/Actualites/COVID-19",70:"http://www.haute-saone.gouv.fr/Politiques-publiques/Sante/Coronavirus",71:"http://www.saone-et-loire.gouv.fr/informations-coronavirus-covid-19-r2997.html",72:"http://www.sarthe.gouv.fr/covid-19-point-sur-la-situation-en-sarthe-a4484.html",73:"http://www.savoie.gouv.fr/Actualites/COVID-19-Point-sur-la-situation-en-Savoie",74:"http://www.haute-savoie.gouv.fr/Actualites/Actualites/Coronavirus-Covid-19",75:"https://www.prefectures-regions.gouv.fr/ile-de-france/Actualites/Covid-19-le-bilan-de-l-action-des-services-de-l-Etat-en-Ile-de-France",76:"https://www.seine-maritime.gouv.fr/Actualites/COVID-19",77:"http://www.seine-et-marne.gouv.fr/Actualites/Actualite-du-prefet/Les-infos-locales-et-nationales-sur-le-Coronavirus",78:"http://www.yvelines.gouv.fr/Actualites/COVID-19",79:"http://www.deux-sevres.gouv.fr/Actualites/COVID-19-Point-sur-la-situation-en-Deux-Sevres",80:"https://www.somme.gouv.fr/Actualites/COVID-19-point-sur-la-situation-dans-la-Somme",81:"http://www.tarn.gouv.fr/covid-19-point-sur-la-situation-dans-le-tarn-r1145.html",82:"http://www.tarn-et-garonne.gouv.fr/Actualites/COVID-19-Point-sur-la-situation-en-Tarn-et-Garonne",83:"http://www.var.gouv.fr/le-var-face-au-covid-19-r2322.html",84:"http://www.vaucluse.gouv.fr/covid-19-point-de-situation-en-vaucluse-r3752.html",85:"http://www.vendee.gouv.fr/",86:"http://www.vienne.gouv.fr/Actualites/COVID-19-Point-sur-la-situation-en-Vienne",87:"http://www.haute-vienne.gouv.fr/Actualites/COVID-19-en-Haute-Vienne",88:"http://www.vosges.gouv.fr/Actualites/Coronavirus-Covid-19",89:"http://www.yonne.gouv.fr/Actualites/COVID-19-Coronavirus-toutes-les-informations",90:"http://www.territoire-de-belfort.gouv.fr/Politiques-publiques/Sante-Solidarites-et-cohesion-sociale/Coronavirus-COVID-19",91:"http://www.essonne.gouv.fr/Actualites/Covid-19-point-sur-la-situation-en-Essonne",92:"http://www.hauts-de-seine.gouv.fr/COVID-19-Point-sur-la-situation-dans-les-Hauts-de-Seine",93:"http://www.seine-saint-denis.gouv.fr/Actualites/COVID-19-Informations/COVID-19-Point-sur-la-situation-en-Seine-Saint-Denis",94:"http://www.val-de-marne.gouv.fr/Actualites/COVID-19-Plan-de-deconfinement-et-organisation-de-la-vie-quotidienne",95:"http://www.val-doise.gouv.fr/Actualites/COVID-19-Mesures-et-declarations-officielles",971:"http://www.guadeloupe.gouv.fr/Politiques-publiques/Risques-naturels-technologiques-et-sanitaires/Securite-sanitaire/Informations-coronavirus",972:"http://www.martinique.gouv.fr/Politiques-publiques/Environnement-sante-publique/Sante/Informations-COVID-19",973:"http://www.guyane.gouv.fr/Politiques-publiques/COVID-19",974:"http://www.reunion.gouv.fr/la-reunion-face-au-covid-19-r461.html",975:"http://www.saint-pierre-et-miquelon.gouv.fr/Publications/Coronavirus-Covid-19",976:"http://www.mayotte.gouv.fr/Politiques-publiques/Sante/CORONAVIRUS-COVID-19",977:"http://www.saint-barth-saint-martin.gouv.fr/",978:"http://www.saint-barth-saint-martin.gouv.fr/"};var si={"01":"Ain","02":"Aisne","03":"Allier","04":"Alpes-de-Haute-Provence","05":"Hautes-Alpes","06":"Alpes-Maritimes","07":"Ard\xE8che","08":"Ardennes","09":"Ari\xE8ge",10:"Aube",11:"Aude",12:"Aveyron",13:"Bouches-du-Rh\xF4ne",14:"Calvados",15:"Cantal",16:"Charente",17:"Charente-Maritime",18:"Cher",19:"Corr\xE8ze","2A":"Corse-du-sud","2B":"Haute-corse",21:"C\xF4te-d\u2019or",22:"C\xF4tes-d\u2019armor",23:"Creuse",24:"Dordogne",25:"Doubs",26:"Dr\xF4me",27:"Eure",28:"Eure-et-Loir",29:"Finist\xE8re",30:"Gard",31:"Haute-Garonne",32:"Gers",33:"Gironde",34:"H\xE9rault",35:"Ile-et-Vilaine",36:"Indre",37:"Indre-et-Loire",38:"Is\xE8re",39:"Jura",40:"Landes",41:"Loir-et-Cher",42:"Loire",43:"Haute-Loire",44:"Loire-Atlantique",45:"Loiret",46:"Lot",47:"Lot-et-Garonne",48:"Loz\xE8re",49:"Maine-et-Loire",50:"Manche",51:"Marne",52:"Haute-Marne",53:"Mayenne",54:"Meurthe-et-Moselle",55:"Meuse",56:"Morbihan",57:"Moselle",58:"Ni\xE8vre",59:"Nord",60:"Oise",61:"Orne",62:"Pas-de-Calais",63:"Puy-de-D\xF4me",64:"Pyr\xE9n\xE9es-Atlantiques",65:"Hautes-Pyr\xE9n\xE9es",66:"Pyr\xE9n\xE9es-Orientales",67:"Bas-Rhin",68:"Haut-Rhin",69:"Rh\xF4ne",70:"Haute-Sa\xF4ne",71:"Sa\xF4ne-et-Loire",72:"Sarthe",73:"Savoie",74:"Haute-Savoie",75:"Paris",76:"Seine-Maritime",77:"Seine-et-Marne",78:"Yvelines",79:"Deux-S\xE8vres",80:"Somme",81:"Tarn",82:"Tarn-et-Garonne",83:"Var",84:"Vaucluse",85:"Vend\xE9e",86:"Vienne",87:"Haute-Vienne",88:"Vosges",89:"Yonne",90:"Territoire de Belfort",91:"Essonne",92:"Hauts-de-Seine",93:"Seine-Saint-Denis",94:"Val-de-Marne",95:"Val-d\u2019oise",971:"Guadeloupe",972:"Martinique",973:"Guyane",974:"R\xE9union",975:"Saint-Pierre-et-Miquelon",976:"Mayotte",977:"Saint-Barth\xE9lemy",978:"Saint-Martin"};function ti(r,o){var e=r.querySelector("#profils-cards");o.stockage.getProfils().then(function(n){(n.length&&fa(r.querySelector(".js-intro")),-1===n.indexOf("mes_infos"))&&vi(e.appendChild(kb("\n                    <div class=\"profil-card card\">\n                        <h3><span class=\"nouveau-profil\">Pour moi</span></h3>\n                        <div class=\"form-controls\">\n                            <a class=\"button button-full-width\"\n                                data-set-profil=\"mes_infos\"\n                                href=\"#".concat(o.questionnaire.firstPage,"\"\n                                >D\xE9marrer</a>\n                        </div>\n                    </div>\n                "))).querySelector("[data-set-profil]"),o);e.appendChild(kb("\n                <div class=\"profil-card card\">\n                    <h3><span class=\"nouveau-profil\">Pour un proche</span></h3>\n                    <div class=\"form-controls\">\n                        <a class=\"button button-full-width js-profil-new\"\n                            href=\"#nom\"\n                            >D\xE9marrer</a>\n                    </div>\n                </div>\n            ")),ui(e,n,o)})}function ui(r,o,e){var n=r.firstChild;o.forEach(function(o){var t=new Ac(o);e.stockage.charger(t).then(function(o){var t=r.insertBefore(o.renderCard(e.questionnaire),n),i=t.querySelector(".conseils-link");i&&i.setAttribute("href","#conseils");var a=t.querySelectorAll("[data-set-profil]");[].forEach.call(a,function(r){wi(r,e)}),xi(t.querySelector("[data-delete-profil]"),e)})})}function vi(r,o){return Ze(r,o,o.creerProfil.bind(o))}function wi(r,o){return Ze(r,o,o.basculerVersProfil.bind(o))}function Ze(r,o,e){r.addEventListener("click",function(n){n.preventDefault(),e(r.dataset.setProfil).then(function(){o.router.navigate(n.target.getAttribute("href"))})})}function xi(r,o){r.addEventListener("click",function(e){e.preventDefault();var n=r.dataset.deleteProfil,t="mes_infos"===n?"votre profil":"le profil de ".concat(n);confirm("\xCAtes-vous s\xFBr\xB7e de vouloir supprimer ".concat(t,"\xA0?"))&&o.supprimerProfil(n).then(function(){o.chargerProfilActuel().then(function(){window.location.reload(!0)})})})}function yi(e,t,o){var r=document.querySelector("#nouvelle-version-disponible-block #refresh-button");t.updater.setupRefreshButton(r,o)}function zi(e,t){var n=e.querySelector("input[type=submit]");_e(e,n.value,"Cette information est requise"),e.addEventListener("submit",function(e){e.preventDefault();var n=e.target.elements.name.value;t.creerProfil(n).then(function(){t.goToNextPage("nom")})})}function Gb(e,o,t){var r=t.getData()[o];void 0!==r&&""!==r&&(e[o].value=r)}function ba(e,o,t){var r=t.getData()[o];void 0!==r&&r&&(e[o].checked=!0)}function Ec(e,o,t){var r=e.querySelector("input[type=submit]"),n=[].slice.call(e.querySelectorAll("input[type=checkbox]"));function c(){var e=n.some(function(e){return e.checked});r.value=e?o:t}c(),n.forEach(function(e){e.addEventListener("change",c)})}function $e(e,o,t,r){var n=e.querySelector("input[type=submit]"),c=[].slice.call(e.querySelectorAll("input[type=checkbox]")),a=[].slice.call(e.querySelectorAll(".secondary input[type=checkbox]")),l=a.pop();function i(){var e=c.some(function(e){return e.checked});(n.disabled=!1,n.value=e?o:t,e)&&(a.some(function(e){return e.checked})||l.checked||(n.disabled=!0,n.value=r))}function u(){l.checked?a.forEach(function(e){e.checked=!1,e.disabled=!0}):a.forEach(function(e){e.disabled=!1})}i(),c.forEach(function(e){e.addEventListener("change",i)}),u(),l.addEventListener("change",u)}function Fc(e,o,t,r){var n=e.querySelector("input[type=submit]"),c=e.querySelector("input[type=checkbox]"),a=[].slice.call(e.querySelectorAll(".secondary.required")),l=[].slice.call(e.querySelectorAll(".secondary input[type=radio]"));function i(){(n.disabled=!1,n.value=c.checked?o:t,c.checked)&&(a.every(function(e){return[].slice.call(e.querySelectorAll("input[type=radio]")).some(function(e){return e.checked})})||(n.disabled=!0,n.value=r))}function u(){i(),c.checked?l.forEach(function(e){e.disabled=!1}):l.forEach(function(e){e.checked=!1,e.disabled=!0})}i(),l.forEach(function(e){e.addEventListener("change",i)}),u(),c.addEventListener("change",u)}function _e(e,o,t){var r=e.querySelector("input[type=submit]"),n=[].slice.call(e.querySelectorAll("input[type=text]"));function c(){var e=n.every(function(e){return""!==e.value});r.disabled=!e,r.value=e?o:t}c(),n.forEach(function(e){e.addEventListener("input",c)})}function Ai(e,o,t){var r=e.querySelector("input[type=submit]"),n=[].slice.call(e.querySelectorAll("select"));function c(){var e=n.every(function(e){return e.value!==e.options[0].value});r.disabled=!e,r.value=e?o:t}c(),n.forEach(function(e){e.addEventListener("change",c)})}function qa(e,o){var t=!o.checked;[].forEach.call(e.querySelectorAll(".secondary"),function(e){var o=e.querySelector("input");o.checked&&t&&(o.checked=!1,o.dispatchEvent(new Event("change"))),o.disabled=t,t?e.classList.add("disabled"):e.classList.remove("disabled")})}function Bi(e,t){t.profil.questionnaire_started||(t.profil.questionnaire_started=!0,t.enregistrerProfilActuel(),window.plausible("Questionnaire commenc\xE9")),ba(e,"symptomes_actuels",t.profil),ba(e,"symptomes_actuels_temperature",t.profil),ba(e,"symptomes_actuels_temperature_inconnue",t.profil),ba(e,"symptomes_actuels_toux",t.profil),ba(e,"symptomes_actuels_odorat",t.profil),ba(e,"symptomes_actuels_douleurs",t.profil),ba(e,"symptomes_actuels_diarrhee",t.profil),ba(e,"symptomes_actuels_fatigue",t.profil),ba(e,"symptomes_actuels_alimentation",t.profil),ba(e,"symptomes_actuels_souffle",t.profil),ba(e,"symptomes_actuels_autre",t.profil);var o=e.elements.symptomes_actuels;qa(e,o),o.addEventListener("click",function(){qa(e,o)});var s=e.querySelector("input[type=submit]"),r=t.profil.estMonProfil()?"Je n\u2019ai pas de sympt\xF4mes actuellement":"Cette personne n\u2019a pas de sympt\xF4mes actuellement";$e(e,s.value,r,"Vous devez saisir l\u2019un des sous-choix propos\xE9s");var a=e.querySelector("#symptomes_actuels_temperature"),m=e.querySelector("#symptomes_actuels_temperature_inconnue");a.addEventListener("change",function(){a.checked&&(m.checked=!1)}),m.addEventListener("change",function(){m.checked&&(a.checked=!1)}),e.addEventListener("submit",function(e){e.preventDefault(),t.profil.symptomes_actuels=e.target.elements.symptomes_actuels.checked,t.profil.symptomes_actuels_temperature=e.target.elements.symptomes_actuels_temperature.checked,t.profil.symptomes_actuels_temperature_inconnue=e.target.elements.symptomes_actuels_temperature_inconnue.checked,t.profil.symptomes_actuels_toux=e.target.elements.symptomes_actuels_toux.checked,t.profil.symptomes_actuels_odorat=e.target.elements.symptomes_actuels_odorat.checked,t.profil.symptomes_actuels_douleurs=e.target.elements.symptomes_actuels_douleurs.checked,t.profil.symptomes_actuels_diarrhee=e.target.elements.symptomes_actuels_diarrhee.checked,t.profil.symptomes_actuels_fatigue=e.target.elements.symptomes_actuels_fatigue.checked,t.profil.symptomes_actuels_alimentation=e.target.elements.symptomes_actuels_alimentation.checked,t.profil.symptomes_actuels_souffle=e.target.elements.symptomes_actuels_souffle.checked,t.profil.symptomes_actuels_autre=e.target.elements.symptomes_actuels_autre.checked,t.profil.hasSymptomesActuelsReconnus()&&(t.profil.symptomes_passes=!1,t.profil.contact_a_risque=!1,t.profil.contact_a_risque_meme_lieu_de_vie=void 0,t.profil.contact_a_risque_contact_direct=void 0,t.profil.contact_a_risque_actes=void 0,t.profil.contact_a_risque_espace_confine=void 0,t.profil.contact_a_risque_meme_classe=void 0,t.profil.contact_a_risque_stop_covid=void 0,t.profil.contact_a_risque_autre=void 0),t.enregistrerProfilActuel().then(function(){t.goToNextPage("symptomesactuels")})})}function Ci(e,t){ba(e,"depistage",t.profil),t.profil.depistage&&("positif"===t.profil.depistage_resultat?e.querySelector("#depistage_resultat_positif").checked=!0:"negatif"===t.profil.depistage_resultat?e.querySelector("#depistage_resultat_negatif").checked=!0:"en_attente"===t.profil.depistage_resultat&&(e.querySelector("#depistage_resultat_en_attente").checked=!0));var r=e.elements.depistage;qa(e,r),r.addEventListener("click",function(){qa(e,r)});var i=e.querySelector("input[type=submit]"),a=t.profil.estMonProfil()?"Je n\u2019ai pas pass\xE9 de test":"Cette personne n\u2019a pas pass\xE9 de test";Fc(e,i.value,a,"Veuillez remplir le formulaire au complet"),e.addEventListener("submit",function(e){e.preventDefault(),t.profil.depistage=e.target.elements.depistage.checked,t.profil.depistage_resultat=e.target.elements.depistage_resultat.value||void 0,t.enregistrerProfilActuel().then(function(){t.goToNextPage("depistage")})})}function Di(e,t){var s=e.querySelector("input[type=submit]");ba(e,"symptomes_passes",t.profil);var o=t.profil.estMonProfil()?"Je n\u2019ai pas eu de sympt\xF4mes dans les 7\xA0derniers jours":"Cette personne n\u2019a pas eu de sympt\xF4mes dans les 7\xA0derniers jours";Ec(e,s.value,o),e.addEventListener("submit",function(e){e.preventDefault(),t.profil.symptomes_passes=e.target.elements.symptomes_passes.checked,t.profil.symptomes_passes&&(t.profil.contact_a_risque=!1,t.profil.contact_a_risque_meme_lieu_de_vie=void 0,t.profil.contact_a_risque_contact_direct=void 0,t.profil.contact_a_risque_actes=void 0,t.profil.contact_a_risque_espace_confine=void 0,t.profil.contact_a_risque_meme_classe=void 0,t.profil.contact_a_risque_stop_covid=void 0,t.profil.contact_a_risque_autre=void 0),t.enregistrerProfilActuel().then(function(){t.goToNextPage("symptomespasses")})})}function Ei(e,t){var c=e.querySelector("input[type=submit]");ba(e,"contact_a_risque",t.profil),ba(e,"contact_a_risque_meme_lieu_de_vie",t.profil),ba(e,"contact_a_risque_contact_direct",t.profil),ba(e,"contact_a_risque_actes",t.profil),ba(e,"contact_a_risque_espace_confine",t.profil),ba(e,"contact_a_risque_meme_classe",t.profil),ba(e,"contact_a_risque_stop_covid",t.profil),ba(e,"contact_a_risque_autre",t.profil);var o=e.elements.contact_a_risque;qa(e,o),o.addEventListener("click",function(){qa(e,o)});var r=t.profil.estMonProfil()?"Je n\u2019ai pas eu de contact r\xE9cents":"Cette personne n\u2019a pas eu de contact r\xE9cents";$e(e,c.value,r,"Vous devez saisir l\u2019un des sous-choix propos\xE9s"),e.addEventListener("submit",function(e){e.preventDefault(),t.profil.contact_a_risque=e.target.elements.contact_a_risque.checked,t.profil.contact_a_risque_meme_lieu_de_vie=e.target.elements.contact_a_risque_meme_lieu_de_vie.checked,t.profil.contact_a_risque_contact_direct=e.target.elements.contact_a_risque_contact_direct.checked,t.profil.contact_a_risque_actes=e.target.elements.contact_a_risque_actes.checked,t.profil.contact_a_risque_espace_confine=e.target.elements.contact_a_risque_espace_confine.checked,t.profil.contact_a_risque_meme_classe=e.target.elements.contact_a_risque_meme_classe.checked,t.profil.contact_a_risque_stop_covid=e.target.elements.contact_a_risque_stop_covid.checked,t.profil.contact_a_risque_autre=e.target.elements.contact_a_risque_autre.checked,t.enregistrerProfilActuel().then(function(){t.goToNextPage("contactarisque")})})}function Fi(e,t){var r=e.querySelector("input[type=submit]");Gb(e,"departement",t.profil);var o=t.profil.estMonProfil()?"Votre d\xE9partement de r\xE9sidence est requis":"Son d\xE9partement de r\xE9sidence est requis";Ai(e,r.value,o),Eb(e,"#error-geolocalisation"),e.querySelector("select").addEventListener("change",function(){Eb(e,"#error-geolocalisation")}),e.addEventListener("submit",function(e){e.preventDefault(),t.profil.departement=e.target.elements.departement.value,t.enregistrerProfilActuel().then(function(){t.goToNextPage("residence")})}),document.getElementById("geolocalisation").addEventListener("click",Ki)}var Gi,Hi=false;function Ii(){if(Hi)return;Hi=true;Gi={};Gi="/departements-1000m.27eaefd6.geojson"}var Ji=function(){this.matchDepartement=function(e,o,t,n){var r=this;this.loadMap(function(a){var i=!0;a.features.forEach(function(n){("Polygon"===n.geometry.type?[n.geometry.coordinates]:n.geometry.coordinates).forEach(function(a){a.forEach(function(a){r.booleanPointInPolygon([o,e],a)&&(i=!1,t(n.properties))})})}),i&&n()})},this.loadMap=function(e){var o=new XMLHttpRequest;o.overrideMimeType("application/json"),o.open("GET",(Ii(),Gi),!0),o.onload=function(){var t=JSON.parse(o.responseText);e(t)},o.send()},this.booleanPointInPolygon=function(e,o){for(var t=e[0],n=e[1],r=!1,a=0,i=o.length-1;a<o.length;i=a++){var l=o[a][0],c=o[a][1],u=o[i][0],s=o[i][1];c>n!=s>n&&t<(u-l)*(n-c)/(s-c)+l&&(r=!r)}return r}};function Ki(e){e.preventDefault();var o=new Ji,t=document.querySelector("form#residence-form");Eb(t,"#error-geolocalisation");var n=function(e){var o=t.querySelector("#departement");o.value=e.code,o.dispatchEvent(new CustomEvent("change"))},r=function(){Fb(t,"error-geolocalisation")};navigator.geolocation.getCurrentPosition(function(e){var t=e.coords.latitude,a=e.coords.longitude;o.matchDepartement(t,a,n,r)},function(e){console.warn("ERREUR ("+e.code+"): "+e.message),r()},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}function Li(e,r){ba(e,"foyer_enfants",r.profil),ba(e,"foyer_fragile",r.profil),e.addEventListener("submit",function(e){e.preventDefault(),r.profil.foyer_enfants=e.target.elements.foyer_enfants.checked,r.profil.foyer_fragile=e.target.elements.foyer_fragile.checked,r.enregistrerProfilActuel().then(function(){r.goToNextPage("foyer")})})}function Mi(e,t){var r=e.querySelector("input[type=submit]");ba(e,"antecedent_cardio",t.profil),ba(e,"antecedent_diabete",t.profil),ba(e,"antecedent_respi",t.profil),ba(e,"antecedent_dialyse",t.profil),ba(e,"antecedent_cancer",t.profil),ba(e,"antecedent_immunodep",t.profil),ba(e,"antecedent_cirrhose",t.profil),ba(e,"antecedent_drepano",t.profil),ba(e,"antecedent_chronique_autre",t.profil);var n=t.profil.estMonProfil()?"Aucun de ces \xE9l\xE9ments ne correspond \xE0 ma situation":"Aucun de ces \xE9l\xE9ments ne correspond \xE0 sa situation";Ec(e,r.value,n),e.addEventListener("submit",function(e){e.preventDefault(),t.profil.antecedent_cardio=e.target.elements.antecedent_cardio.checked,t.profil.antecedent_diabete=e.target.elements.antecedent_diabete.checked,t.profil.antecedent_respi=e.target.elements.antecedent_respi.checked,t.profil.antecedent_dialyse=e.target.elements.antecedent_dialyse.checked,t.profil.antecedent_cancer=e.target.elements.antecedent_cancer.checked,t.profil.antecedent_immunodep=e.target.elements.antecedent_immunodep.checked,t.profil.antecedent_cirrhose=e.target.elements.antecedent_cirrhose.checked,t.profil.antecedent_drepano=e.target.elements.antecedent_drepano.checked,t.profil.antecedent_chronique_autre=e.target.elements.antecedent_chronique_autre.checked,t.enregistrerProfilActuel().then(function(){t.goToNextPage("antecedents")})})}function Ni(e,t){var r=e.querySelector("input[type=submit]");Gb(e,"age",t.profil),Gb(e,"taille",t.profil),Gb(e,"poids",t.profil),ba(e,"grossesse_3e_trimestre",t.profil);_e(e,r.value,"Les informations d\u2019\xE2ge, de poids et de taille sont requises"),e.addEventListener("submit",function(e){e.preventDefault(),t.profil.age=e.target.elements.age.value,t.profil.poids=e.target.elements.poids.value,t.profil.taille=e.target.elements.taille.value,t.profil.grossesse_3e_trimestre=e.target.elements.grossesse_3e_trimestre.checked,t.enregistrerProfilActuel().then(function(){t.goToNextPage("caracteristiques")})})}function Oi(e,t){var i=e.querySelector("input[type=submit]");ba(e,"activite_pro",t.profil),ba(e,"activite_pro_public",t.profil),ba(e,"activite_pro_sante",t.profil),ba(e,"activite_pro_liberal",t.profil);var r=e.elements.activite_pro;qa(e,r),r.addEventListener("click",function(){qa(e,r)});var o=t.profil.estMonProfil()?"Je n\u2019ai pas d\u2019activit\xE9 professionnelle ou b\xE9n\xE9vole":"Cette personne n\u2019a pas d\u2019activit\xE9 professionnelle ou b\xE9n\xE9vole";Ec(e,i.value,o),e.addEventListener("submit",function(e){e.preventDefault(),t.profil.activite_pro=e.target.elements.activite_pro.checked,t.profil.activite_pro_public=e.target.elements.activite_pro_public.checked,t.profil.activite_pro_sante=e.target.elements.activite_pro_sante.checked,t.profil.activite_pro_liberal=e.target.elements.activite_pro_liberal.checked,t.enregistrerProfilActuel().then(function(){t.goToNextPage("activitepro")})})}function Pi(e,s){Se(e,s.profil);var t=Qi(s.profil);t&&e.querySelector("#conseils-block").classList.add(t);var o=new _i(s.profil,Xi);if(s.profil.questionnaire_completed||(s.profil.questionnaire_completed=!0,s.enregistrerProfilActuel(),window.plausible("Questionnaire termin\xE9")),o.recommandeAutoSuivi()&&!s.profil.suivi_active?(s.profil.suivi_active=!0,s.enregistrerProfilActuel()):s.profil.suivi_active&&!s.profil.hasSuiviStartDate()&&(s.profil.suivi_active=!1,s.enregistrerProfilActuel()),Si(e,s.profil,o),s.profil.hasSuiviStartDate()&&s.profil.hasHistorique()){if(s.profil.hasDeconfinementDate())Fb(e,"deconfinement");else{var i=new We(s.profil);Fb(e,"suivi"),Ri(e,i),Ti(e,i)}Eb(e,"#conseils-statut")}(Ui(e,s.profil,o),Wi())?navigator.standalone||ga(e.querySelector(".browser-mobile-safari")):ga(e.querySelector(".browser-other"));Pe(e.querySelector(".feedback-component")),Qe(e),s.profil.hasSuiviStartDate()&&Oe(e,s.profil)}function Qi(e){return e.symptomes_actuels?"symptomes-actuels":e.symptomes_passes?"symptomes-passes":e.contact_a_risque?"contact-a-risque":void 0}function Ri(e,s){var t=[s.graviteBlockNameToDisplay()];0!==s.psy&&t.push(s.psyBlockNameToDisplay()),s.profil.hasHistorique()&&t.push("conseils-sante-historique-symptomes"),zc(e,t)}function Si(e,s,t){var o=Vi(t);o=(o=(o=(o=(o=(o=(o=(o=(o=(o=o.concat(t.conseilsPersonnelsBlockNamesToDisplay())).concat(t.isolementBlockNamesToDisplay())).concat(t.depistageBlockNamesToDisplay())).concat(t.gestesBarriereBlockNamesToDisplay())).concat(t.vieQuotidienneBlockNamesToDisplay())).concat(t.activiteProBlockNamesToDisplay())).concat(t.grossesseBlockNamesToDisplay())).concat(t.santeBlockNamesToDisplay())).concat(t.foyerBlockNamesToDisplay())).concat(t.enfantsBlockNamesToDisplay()),zc(e,o)}function Ti(e,s){var t=s.evolutionsBlockNamesToDisplay();t.length&&(ga(e.querySelector(".reponse")),zc(e,t))}function Ui(e,s,t){mi(e.querySelector("#conseils-block-titre"),s),ni(e.querySelector("#nom-departement"),s.departement);var o=e.querySelector("#lien-prefecture");o&&oi(o,s.departement),[].forEach.call(e.querySelectorAll(".nom-caracteristiques-a-risques"),function(e){pi(e,t)}),[].forEach.call(e.querySelectorAll(".nom-antecedents"),function(e){qi(e,t)})}function Vi(e){return["statut-".concat(e.statutEtConseils.statut)]}function Wi(){var e=window.navigator.userAgent,s=!!e.match(/iPad/i),t=!!e.match(/iPhone/i),o=s||t,i=!!e.match(/WebKit/i),r=!!e.match(/CriOS/i);return o&&i&&!r}var Xi={"01":197.5,"02":104.4,"03":85.8,"04":93.4,"05":157,"06":118.5,"07":180.9,"08":110.1,"09":183.9,10:138.2,11:107.8,12:183.9,13:234.1,14:144.8,15:133.1,16:53.5,17:43.1,18:98.9,19:70.8,21:138.1,22:64.6,23:88.3,24:65.6,25:79.9,26:163.7,27:118.5,28:86.3,29:55.5,"2A":82.9,"2B":92.8,30:203.3,31:213.8,32:116.9,33:96.1,34:195.4,35:121.4,36:57,37:127.2,38:288.2,39:97,40:112.8,41:64.5,42:410.4,43:271,44:114.7,45:143.2,46:79.4,47:100.5,48:171.8,49:116.5,50:63.2,51:123.2,52:98,53:92,54:113.3,55:52.5,56:56.7,57:76.1,58:65.9,59:339.6,60:159,61:92.9,62:167.7,63:172.9,64:130.3,65:109.2,66:182.3,67:94.5,68:68.5,69:343.7,70:51.5,71:186,72:98.5,73:195.4,74:105,75:378.9,76:188.4,77:205,78:219.7,79:60.1,80:111.4,81:204.5,82:233.7,83:108.5,84:160.1,85:69.3,86:58.7,87:142,88:60,89:108.4,90:39.7,91:248.2,92:313.8,93:288.8,94:298.2,95:290,971:147.9,972:128.9,973:41.3,974:36.6,975:46.8,976:62.3,977:27.6,978:182.4};function Yi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function af(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Zi(e,t,s){return t&&af(e.prototype,t),s&&af(e,s),e}var $i=["symptomatique-urgent","symptomatique-positif","symptomatique-negatif","symptomatique","asymptomatique","risque-eleve","personne-fragile","foyer-fragile","peu-de-risques"],_i=function(){function e(t,s){Yi(this,e),this.profil=t,this.incidenceParDepartement=s}return Zi(e,[{key:"statutSelonFragilite",value:function(){return this.personneFragile?"personne-fragile":this.profil.foyer_fragile?"foyer-fragile":"peu-de-risques"}},{key:"recommandeAutoSuivi",value:function(){return this.profil.hasSymptomesActuelsReconnus()&&!this.profil.estPositifAsymptomatique()&&!this.profil.estNegatifSymptomatique()}},{key:"conseilsPersonnelsBlockNamesToDisplay",value:function(){var e=[];return e.push("conseils-personnels-".concat(this.statutEtConseils.conseils)),e}},{key:"isolementBlockNamesToDisplay",value:function(){var e=[];return(this.profil.estPositif()||this.profil.estNegatif()&&this.profil.hasContactARisqueReconnus()||this.profil.estEnAttente()&&this.risqueDInfection||this.profil.sansDepistage()&&this.risqueDInfection)&&e.push("conseils-isolement"),e}},{key:"depistageBlockNamesToDisplay",value:function(){var e=[];return this.profil.estPositif()||this.profil.estNegatif()||(e.push("conseils-tests"),this.profil.estEnAttente()?e.push("conseils-tests-resultats"):e.push("conseils-tests-general")),e}},{key:"gestesBarriereBlockNamesToDisplay",value:function(){var e=["conseils-gestes-barrieres-masque"];return this.personneFragile?((this.antecedents||this.profil.antecedent_chronique_autre)&&e.push("reponse-gestes-barrieres-masque-antecedents"),(this.sup65||this.profil.grossesse_3e_trimestre||this.imc>30)&&e.push("reponse-gestes-barrieres-masque-caracteristiques-a-risques"),e.push("conseils-gestes-barrieres-masque-fragile")):e.push("conseils-gestes-barrieres-masque-general"),e}},{key:"vieQuotidienneBlockNamesToDisplay",value:function(){var e=["conseils-vie-quotidienne"];return void 0!==this.incidence&&(this.incidence>=10?e.push("conseils-departement-circulation-elevee"):e.push("conseils-departement-circulation-faible")),e}},{key:"activiteProBlockNamesToDisplay",value:function(){var e=[];return this.risqueDInfection?[]:((this.profil.activite_pro||this.profil.activite_pro_public||this.profil.activite_pro_sante||this.profil.activite_pro_liberal)&&(e.push("conseils-activite"),e.push("reponse-activite-pro"),this.profil.activite_pro_sante?e.push("conseils-activite-pro-sante"):(e.push("conseils-activite-pro"),e.push("conseils-activite-pro-infos")),this.profil.activite_pro_liberal&&e.push("conseils-activite-pro-liberal"),this.personneFragile&&(e.push("reponse-activite-pro-personne-fragile"),e.push("conseils-activite-pro-personne-fragile")),this.antecedents&&(e.push("reponse-activite-pro-antecedents"),e.push("conseils-activite-pro-arret")),this.profil.foyer_fragile&&(e.push("reponse-activite-pro-foyer-fragile"),e.push("conseils-activite-pro-foyer-fragile"))),e)}},{key:"grossesseBlockNamesToDisplay",value:function(){var e=[];return this.profil.grossesse_3e_trimestre&&e.push("conseils-grossesse"),e}},{key:"santeBlockNamesToDisplay",value:function(){var e=["conseils-sante"];return(this.sup65||this.profil.grossesse_3e_trimestre||this.imc>30)&&e.push("reponse-sante-caracteristiques-a-risques"),(this.antecedents||this.profil.antecedent_chronique_autre)&&e.push("reponse-sante-antecedents"),this.personneFragile?this.profil.hasSymptomesActuelsReconnus()?e.push("conseils-sante-personne-fragile-symptomatique"):e.push("conseils-sante-personne-fragile"):e.push("conseils-sante-general"),(this.antecedents||this.profil.antecedent_chronique_autre)&&e.push("conseils-sante-maladie-chronique"),e.push("conseils-sante-automedication"),this.personneFragile||this.profil.activite_pro_sante?e.push("conseils-sante-grippe-fragile"):e.push("conseils-sante-grippe"),e}},{key:"foyerBlockNamesToDisplay",value:function(){var e=[];return this.profil.foyer_fragile&&(e.push("conseils-foyer"),e.push("conseils-foyer-fragile")),e}},{key:"enfantsBlockNamesToDisplay",value:function(){var e=[];return this.profil.symptomes_actuels?[]:(this.profil.foyer_enfants&&e.push("conseils-foyer-enfants"),e)}},{key:"situation",get:function(){if(!this.profil.isComplete())return"";var e,t=this.profil.depistage?this.profil.depistage_resultat:"pas_teste";return this.profil.hasSymptomesActuelsReconnus()?(e="symptomes_actuels",this.facteursDeGraviteMajeurs&&(e+="_graves")):e=this.profil.symptomes_passes?"symptomes_passes":this.profil.hasContactARisqueReconnus()?"contact_a_risque":this.profil.contact_a_risque_autre?"contact_pas_vraiment_a_risque":"asymptomatique","".concat(t,"_").concat(e)}},{key:"incidence",get:function(){return this.incidenceParDepartement[this.profil.departement]}},{key:"sup65",get:function(){return this.profil.age>=65}},{key:"sup50",get:function(){return this.profil.age>=50}},{key:"imc",get:function(){var e=this.profil.taille/100;return this.profil.poids/(e*e)}},{key:"personneFragile",get:function(){return this.sup65||this.profil.grossesse_3e_trimestre||this.imc>30||this.antecedents}},{key:"antecedents",get:function(){return this.profil.antecedent_cardio||this.profil.antecedent_diabete||this.profil.antecedent_respi||this.profil.antecedent_dialyse||this.profil.antecedent_cancer||this.profil.antecedent_immunodep||this.profil.antecedent_cirrhose||this.profil.antecedent_drepano}},{key:"fievre",get:function(){return this.profil.symptomes_actuels&&(this.profil.symptomes_actuels_temperature||this.profil.symptomes_actuels_temperature_inconnue)}},{key:"facteursDeGraviteMajeurs",get:function(){return this.profil.symptomes_actuels_souffle||this.profil.symptomes_actuels_alimentation}},{key:"risqueDInfection",get:function(){return this.profil.hasSymptomesActuelsReconnus()||this.profil.symptomes_passes||this.profil.hasContactARisqueReconnus()}},{key:"listStatuts",get:function(){return $i}},{key:"statutEtConseils",get:function(){switch(this.situation){case"positif_symptomes_actuels_graves":return{statut:"positif-symptomatique-urgent",conseils:"symptomes-actuels-positif-critique"};case"negatif_symptomes_actuels_graves":case"en_attente_symptomes_actuels_graves":case"pas_teste_symptomes_actuels_graves":return{statut:"symptomatique-urgent",conseils:"symptomes-actuels-sans-depistage-critique"};case"positif_symptomes_actuels":return{statut:"symptomatique-positif",conseils:"depistage-positif-symptomatique"};case"positif_symptomes_passes":return{statut:"symptomatique-positif",conseils:"symptomes-passes-positif"};case"positif_contact_a_risque":case"positif_contact_pas_vraiment_a_risque":case"positif_asymptomatique":return{statut:"asymptomatique",conseils:"depistage-positif-asymptomatique"};case"negatif_symptomes_actuels":return{statut:"symptomatique-negatif",conseils:null};case"negatif_symptomes_passes":return{statut:this.statutSelonFragilite(),conseils:null};case"negatif_contact_a_risque":case"en_attente_contact_a_risque":return{statut:"contact-a-risque-avec-test",conseils:"contact-a-risque"};case"negatif_contact_pas_vraiment_a_risque":return{statut:this.statutSelonFragilite(),conseils:"contact-a-risque-autre"};case"negatif_asymptomatique":return{statut:this.statutSelonFragilite(),conseils:null};case"en_attente_symptomes_actuels":return{statut:"symptomatique-en-attente",conseils:"symptomes-actuels-en-attente"};case"en_attente_symptomes_passes":return{statut:"symptomatique-en-attente",conseils:"symptomes-passes-en-attente"};case"en_attente_contact_pas_vraiment_a_risque":return{statut:"en-attente",conseils:"contact-a-risque-autre"};case"en_attente_asymptomatique":return{statut:"en-attente",conseils:null};case"pas_teste_symptomes_actuels":return{statut:"symptomatique-sans-test",conseils:"symptomes-actuels-sans-depistage"};case"pas_teste_symptomes_passes":return{statut:"symptomatique-sans-test",conseils:"symptomes-passes-sans-depistage"};case"pas_teste_contact_a_risque":return{statut:"contact-a-risque-sans-test",conseils:"contact-a-risque"};case"pas_teste_contact_pas_vraiment_a_risque":return{statut:this.statutSelonFragilite(),conseils:"contact-a-risque-autre"};case"pas_teste_asymptomatique":return{statut:this.statutSelonFragilite(),conseils:null};default:return console.error("situation inconnue",this.situation),{statut:null,conseils:null};}}}]),e}();function aj(e,i){var r=e.querySelector("#profils-cards-suivi"),n=r.insertBefore(i.profil.renderCardSuivi(),r.firstChild);i.profil.hasSuiviStartDate()&&(bj(n.querySelector("[data-delete-suivi]"),i),Oe(e,i.profil))}function bj(e,i){e.addEventListener("click",function(r){r.preventDefault();var n=e.dataset.deleteSuivi,t="mes_infos"===n?"votre suivi":"le suivi de ".concat(n);confirm("\xCAtes-vous s\xFBr\xB7e de vouloir supprimer ".concat(t,"\xA0?"))&&i.supprimerSuivi(n).then(function(){i.chargerProfilActuel().then(function(){window.location.reload(!0)})})})}function cj(e,t){e.debut_symptomes.checked=!0,"symptomesactuels"===t.questionnaire.previousPage("debutsymptomes",t.profil)&&fa(e.debut_symptomes);var r=e.elements.debut_symptomes;qa(e,r),r.addEventListener("click",function(){qa(e,r)}),[].forEach.call(e.querySelectorAll("[name=\"suivi_symptomes_date\"]"),function(t){t.addEventListener("change",function(t){return dj(e,t.target)})}),e.querySelector("#debut_symptomes_exacte").addEventListener("change",function(t){ej(e,t.target)});var a=e.querySelector("input[type=submit]"),i=!t.profil.estMonProfil()?"Cette personne n\u2019a pas de sympt\xF4mes":"Je n\u2019ai pas de sympt\xF4mes";Fc(e,a.value,i,"Veuillez remplir le formulaire au complet"),e.addEventListener("submit",function(e){e.preventDefault(),t.profil.symptomes_start_date=fj(e.target.elements.suivi_symptomes_date_exacte)||gj(e.target.elements.suivi_symptomes_date);var r=e.target.elements.debut_symptomes.checked;!t.profil.hasSuiviStartDate()&&r&&(t.profil.suivi_start_date=new Date),t.enregistrerProfilActuel().then(function(){t.goToNextPage("debutsymptomes")})})}function dj(e,t){var r=e.querySelector("#debut_symptomes_exacte"),a=e.querySelector("input[type=\"submit\"]");"encore_avant_hier"===t.value?(r.removeAttribute("disabled"),r.setAttribute("max",new Date().toISOString().slice(0,10)),r.focus(),""===r.value?a.setAttribute("disabled",""):a.removeAttribute("disabled")):(r.setAttribute("disabled",""),a.removeAttribute("disabled"))}function ej(e,t){var r=e.querySelector("input[type=\"submit\"]");""===t.value?r.setAttribute("disabled",""):r.removeAttribute("disabled")}function fj(e){if(""!==e.value)return new Date(e.value)}function gj(e){var t;switch(e.value){case"aujourdhui":t=0;break;case"hier":t=1;break;case"avant_hier":t=2;break;case"avant_avant_hier":t=3;}return sa(t)}function hj(e,t){if(!t.profil.isComplete()){var i=e.querySelector("#suivi-symptomes-aujourdhui");i&&(fa(i),[].forEach.call(e.querySelectorAll(".secondary"),function(e){e.setAttribute("style","margin-left: 0")}))}var s=!t.profil.estMonProfil(),o=e.querySelector(".them-only");s?(ga(o),o.classList.add("required")):(fa(o),o.classList.remove("required"));var r=e.querySelector("input[type=submit]");e.suivi_symptomes.checked=!0;var a=e.elements.suivi_symptomes;qa(e,a),a.addEventListener("click",function(){qa(e,a)});var l=s?"Cette personne n\u2019a pas de sympt\xF4mes aujourd\u2019hui":"Je n\u2019ai pas eu de sympt\xF4mes aujourd\u2019hui";Fc(e,r.value,l,"Veuillez remplir le formulaire au complet"),e.addEventListener("submit",function(e){e.preventDefault();var i=e.target.elements,o={date:new Date().toJSON(),symptomes:i.suivi_symptomes.checked,essoufflement:i.suivi_symptomes_essoufflement.value,etatGeneral:i.suivi_symptomes_etat_general.value,alimentationHydratation:i.suivi_symptomes_alimentation_hydratation.value,etatPsychologique:i.suivi_symptomes_etat_psychologique.value,fievre:i.suivi_symptomes_fievre.value,diarrheeVomissements:i.suivi_symptomes_diarrhee_vomissements.value,mauxDeTete:i.suivi_symptomes_maux_de_tete.value,toux:i.suivi_symptomes_toux.value};s&&(o.confusion=i.suivi_symptomes_confusion.value),t.profil.ajouterEtat(o),t.profil.symptomes_actuels=o.symptomes,t.profil.symptomes_actuels_temperature="oui"===o.fievre,t.profil.symptomes_actuels_temperature_inconnue=!1,t.profil.symptomes_actuels_toux="oui"===o.toux,t.profil.symptomes_actuels_douleurs="pire"===o.etatGeneral||"critique"===o.etatGeneral,t.profil.symptomes_actuels_diarrhee="oui"===o.diarrheeVomissements,t.profil.symptomes_actuels_fatigue="pire"===o.etatGeneral||"critique"===o.etatGeneral,t.profil.symptomes_actuels_alimentation="oui"===o.alimentationHydratation,t.profil.symptomes_actuels_souffle="pire"===o.essoufflement||"critique"===o.etatGeneral,new kj(t.profil).isDeconfinable()?t.profil.hasDeconfinementDate()||(t.profil.deconfinement_date=new Date,window.plausible("Suivi deconfinement")):t.profil.deconfinement_date=void 0,t.enregistrerProfilActuel().then(function(){t.goToNextPage("suivisymptomes")})})}function ij(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bf(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jj(e,t,r){return t&&bf(e.prototype,t),r&&bf(e,r),e}var kj=function(){function e(t){ij(this,e),this.profil=t}return jj(e,[{key:"isQuarantaineDone",value:function(){return new Date>Yh(7,this.profil.symptomes_start_date)}},{key:"isSuiviRegulier",value:function(){var e=sa(0),t=sa(1),r=sa(2);return this.profil.suiviEntre(t,e).length>=1&&this.profil.suiviEntre(r,t).length>=1}},{key:"isFievreDone",value:function(){return this.profil.suiviDerniersJours(2).every(function(e){return!e.symptomes||"non"===e.fievre})}},{key:"isEssoufflementDone",value:function(){return this.profil.suiviDerniersJours(2).every(function(e){return!e.symptomes||"mieux"===e.essoufflement||"stable"===e.essoufflement||"aucun"===e.essoufflement})}},{key:"isDeconfinable",value:function(){return this.isQuarantaineDone()&&this.isSuiviRegulier()&&this.isFievreDone()&&this.isEssoufflementDone()}}]),e}();function lj(e,r){var s=e.querySelector("#historique");s.innerHTML="<div class=\"break\"></div>",s.insertBefore(r.profil.renderHistorique(),s.firstChild),Qe(e)}function mj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nj(e,t,r){return t&&cf(e.prototype,t),r&&cf(e,r),e}var oj=function(){function e(t){mj(this,e),this.router=t,this.currentVersion=null,this.updateInProgress=!1}return nj(e,[{key:"checkForUpdatesEvery",value:function(e){this.checkForUpdate(),setInterval(this.checkForUpdate.bind(this),60*e*1e3)}},{key:"checkForUpdate",value:function(){var e=this;if(!0!==this.updateInProgress&&"nouvelleversiondisponible"!==lb()){var t=new XMLHttpRequest;t.open("GET","version.json?"+new Date().getTime(),!0),t.setRequestHeader("Cache-Control","no-cache"),t.onload=function(){if(200===t.status){var r=JSON.parse(t.responseText);e.updateVersion(r.version)}else console.debug("Impossible de r\xE9cup\xE9rer les informations de mise \xE0 jour")},t.onerror=function(){console.debug("Impossible de r\xE9cup\xE9rer les informations de mise \xE0 jour")},t.send()}}},{key:"showBanner",value:function(e){var t=e.querySelector("#update-banner");ga(t),e.dispatchEvent(new CustomEvent("show-banner",{detail:t}))}},{key:"updateFooter",value:function(e){if(this.currentVersion!==e){var t=document.querySelector(".js-latest-update"),r=e.split("-").reverse().join("-");t.innerText=" - Mis \xE0 jour le\xA0: ".concat(r,".")}}},{key:"updateVersion",value:function(e){var t=this;this.updateFooter(e),null!==this.currentVersion&&this.currentVersion!==e?(this.updateInProgress=!0,"serviceWorker"in navigator?(console.debug("Service worker supported"),navigator.serviceWorker.getRegistration().then(function(e){console.debug("Telling service worker to look for an update"),e.update().catch(function(e){console.error("Mise \xE0 jour du service worker impossible :",e)}),e.addEventListener("updatefound",function(){console.debug("Service worker update found");var r=e.installing;r.addEventListener("statechange",function(){console.debug("New service worker state:",r.state),"installed"==r.state&&t.notifyUser()})})})):(console.debug("Service worker NOT supported"),this.notifyUser())):this.currentVersion=e}},{key:"notifyUser",value:function(){var e=lb();this.isFillingQuestionnaire()?this.notifyUserWithoutInterrupting(e):this.redirectUserToUpdatePage(e)}},{key:"isFillingQuestionnaire",value:function(){var e=lb();return"residence"===e||"activitepro"===e||"foyer"===e||"caracteristiques"===e||"antecedents"===e||"symptomesactuels"===e||"symptomespasses"===e||"contactarisque"===e}},{key:"notifyUserWithoutInterrupting",value:function(e){var t=this;document.addEventListener("show-banner",function(r){setTimeout(function(){r.detail.scrollIntoView({behavior:"smooth"})},100);var n=r.detail.querySelector("#refresh-button-banner");t.setupRefreshButton(n,e)}),this.showBanner(document)}},{key:"redirectUserToUpdatePage",value:function(e){this.router.navigate("nouvelleversiondisponible?origine=".concat(e))}},{key:"setupRefreshButton",value:function(e,t){e.innerText="Mettre \xE0 jour",e.setAttribute("href","#"+(t||"introduction")),e.addEventListener("click",this.onClickRefreshButton.bind(this))}},{key:"onClickRefreshButton",value:function(e){console.debug("Updater.onClickRefreshButton()"),e.preventDefault();var t=e.target;this.router.pause(),console.log(window.location),window.location=t.href,console.log(window.location),t.innerText="Mise \xE0 jour en cours...",t.setAttribute("href",""),"serviceWorker"in navigator?navigator.serviceWorker.getRegistration().then(function(e){null===e.waiting?(console.debug("New service worker is already active"),console.debug("Reloading the page"),window.location.reload(!0)):(console.debug("New service worker is waiting"),navigator.serviceWorker.addEventListener("controllerchange",function(){console.debug("New service worker is now controlling the page"),console.debug("Reloading the page"),window.location.reload(!0)}),console.debug("Sending message to activate new service worker"),e.waiting.postMessage("skipWaiting"))}):(console.debug("Browser does not support service workers"),console.debug("Reloading the page"),window.location.reload(!0))}}]),e}();var pj=function(){function e(){Mh(this,e),this.profil=new Ac,this.stockage=new bi,this.questionnaire=new gi,this._plausibleTrackingEvents=[]}return Nh(e,[{key:"init",value:function(){return this.router=ki(this),this.updater=new oj(this.router),this.chargerProfilActuel()}},{key:"chargerProfilActuel",value:function(){var e=this;return this.stockage.getProfilActuel().then(function(t){return e.chargerProfil(t)})}},{key:"enregistrerProfilActuel",value:function(){return this.stockage.enregistrer(this.profil)}},{key:"creerProfil",value:function(e){var t=this;return this.profil.resetData(e),this.stockage.setProfilActuel(e).then(function(){return t.enregistrerProfilActuel()})}},{key:"creerProfilsTypes",value:function(){for(var e=["Positif","N\xE9gatif","En attente","Pas test\xE9"],t=["Sympt\xF4mes actuels graves","Sympt\xF4mes actuels","Sympt\xF4mes actuels non \xE9vocateurs","Sympt\xF4mes pass\xE9s","Contact \xE0 risque","Contact pas vraiment \xE0 risque","Rien de tout \xE7a"],r=[],i=0;i<e.length;i++)for(var o=0;o<t.length;o++){var n=e[i],a=t[o];("N\xE9gatif"!==n||"Sympt\xF4mes pass\xE9s"!==a&&"Contact pas vraiment \xE0 risque"!==a&&"Rien de tout \xE7a"!==a)&&("Pas test\xE9"!==n||"Contact pas vraiment \xE0 risque"!==a&&"Rien de tout \xE7a"!==a)||(r.push(this.creerProfilType(n,a,!0,!1)),r.push(this.creerProfilType(n,a,!1,!0))),r.push(this.creerProfilType(n,a,!1,!1))}return Promise.all(r)}},{key:"creerProfilType",value:function(e,t,r,i){var o=this,n="".concat(e," + ").concat(t);return r&&(n="".concat(n," + personne fragile")),i&&(n="".concat(n," + foyer fragile")),this.stockage.getProfil(n).then(function(a){if(null===a)return(a=new Ac(n)).fillTestData(e,t,r,i),o.stockage.enregistrer(a);console.error("Le profil \"".concat(n,"\" existe d\xE9j\xE0"))})}},{key:"basculerVersProfil",value:function(e){var t=this;return this.stockage.setProfilActuel(e).then(function(){return t.chargerProfil(e)})}},{key:"chargerProfil",value:function(e){return this.profil.nom=e,this.stockage.charger(this.profil,e)}},{key:"supprimerProfil",value:function(e){var t=this;return this.stockage.supprimer(e).then(function(){t.profil.nom===e&&(t.profil.nom=void 0,t.stockage.setProfilActuel(void 0))})}},{key:"supprimerSuivi",value:function(e){var t=this;return this.basculerVersProfil(e).then(function(e){return e.resetSuivi(),t.stockage.enregistrer(e)})}},{key:"supprimerTout",value:function(){var e=this;return this.stockage.supprimerTout().then(function(){e.profil.resetData()})}},{key:"goToNextPage",value:function(e){var t=this.questionnaire.nextPage(e,this.profil);this.router.navigate(t)}},{key:"loadFakeSuiviData",value:function(){this.profil.symptomes_start_date=sa(11),this.profil.suivi_start_date=sa(11),this.profil.suivi=[{date:sa(1).toJSON(),symptomes:!0,essoufflement:"mieux",etatGeneral:"mieux",etatPsychologique:"mieux",alimentationHydratation:"non",fievre:"non",diarrheeVomissements:"non",mauxDeTete:"non",toux:"non"}],this.enregistrerProfilActuel()}}]),e}();var mb=new pj;window.app=mb,mb.init().then(function(){mb.router.resolve(),mb.updater.checkForUpdatesEvery(10),Pe(document.querySelector("footer .feedback-component")),Eh(document.querySelector("footer .js-suppression"),mb)}),yc("fr",function(e,s){return[["\xE0 l'instant","dans un instant"],["il y a %s secondes","dans %s secondes"],["il y a 1 minute","dans 1 minute"],["il y a %s minutes","dans %s minutes"],["il y a 1 heure","dans 1 heure"],["il y a %s heures","dans %s heures"],["il y a 1 jour","dans 1 jour"],["il y a %s jours","dans %s jours"],["il y a 1 semaine","dans 1 semaine"],["il y a %s semaines","dans %s semaines"],["il y a 1 mois","dans 1 mois"],["il y a %s mois","dans %s mois"],["il y a 1 an","dans 1 an"],["il y a %s ans","dans %s ans"]][s]});return{"KIzB":{}};});