<form
    data-controller="switch feedback plausible"
    data-switch-delay-value="500"
    data-action="
        feedback#send
        switch:switched->feedback#focusIfVisible
        feedback:sent->switch#switch
    "
    data-switch-sources-param="feedback"
    data-switch-destinations-param="thankyou"
    data-feedback-endpoint-value="http://0.0.0.0:5500/feedback"
>
    <div
        class="question-feedback"
        data-switch-screen="controls"
        data-action="pageChanged@document->switch#switch"
        data-switch-sources-param="feedback thankyou partager"
        data-switch-destinations-param="controls"
    >
        <p>Ces conseils vous ont été utiles ?</p>
        <div class="feedback-controls">
            <div>
                <label
                    ><input
                        type="radio"
                        name="kind"
                        class="button-invisible"
                        value="🙁"
                        data-action="switch#switch feedback#spreadReponse feedback#setNegativeFeedback plausible#record"
                        data-plausible-event-name-param="Avis par question"
                        data-plausible-props-param='{{"{question}": "🙁"}}'
                        data-switch-sources-param="controls"
                        data-switch-destinations-param="feedback"
                    /><span class="enlarge">🙁</span> Non</label
                >
                <label
                    ><input
                        type="radio"
                        name="kind"
                        class="button-invisible"
                        value="😐"
                        data-action="switch#switch feedback#spreadReponse feedback#setNegativeFeedback plausible#record"
                        data-plausible-event-name-param="Avis par question"
                        data-plausible-props-param='{{"{question}": "😐"}}'
                        data-switch-sources-param="controls"
                        data-switch-destinations-param="feedback"
                    /><span class="enlarge">😐</span> Bof</label
                >
                <label
                    ><input
                        type="radio"
                        name="kind"
                        class="button-invisible"
                        value="🙂"
                        data-action="switch#switch feedback#spreadReponse feedback#setPositiveFeedback plausible#record"
                        data-plausible-event-name-param="Avis par question"
                        data-plausible-props-param='{{"{question}": "🙂"}}'
                        data-switch-sources-param="controls"
                        data-switch-destinations-param="feedback"
                    /><span class="enlarge">🙂</span> Oui</label
                >
            </div>
        </div>
    </div>
    <div class="feedback-form" hidden data-switch-screen="feedback">
        <fieldset>
            <p role="status">Merci pour votre retour.</p>
            <label for="message_conseils">
                <span data-feedback-target="positif"
                    >Avez-vous des remarques ou des suggestions pour améliorer ces
                    conseils ?</span
                >
                <span data-feedback-target="negatif"
                    >Pouvez-vous nous en dire plus, afin que nous puissions améliorer
                    ces conseils ?</span
                >
            </label>
            <textarea
                id="message_conseils"
                name="message"
                rows="9"
                cols="20"
                required
                data-feedback-target="textarea"
            ></textarea>
        </fieldset>
        <div class="form-controls">
            <input type="submit" class="button" value="Envoyer mes remarques" />
        </div>
        <p class="feedback-email">
            ou écrivez-nous à :
            <a href="mailto:contact@mesconseilscovid.fr">contact@mesconseilscovid.fr</a>
        </p>
    </div>
    <div class="feedback-thankyou" hidden data-switch-screen="thankyou">
        <p>Votre réponse : <span data-feedback-target="reponse"></span></p>
        <p>Merci pour votre avis !</p>
    </div>
</form>
