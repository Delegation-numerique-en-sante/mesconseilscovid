import { assert } from 'chai'
import { itParam } from 'mocha-param'

import { createProfil } from './helpers'

import AlgorithmeOrientation from '../algorithme/orientation'
import { joursAvant } from '../utils'

// On parcourt tous les cas possibles par colonnes.
const matrice = [
    {
        description: 'Positif (PCR) et symptômes actuels graves',
        profil: {
            symptomes_actuels: true,
            symptomes_actuels_souffle: true,
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_symptomes_actuels_graves',
        statut: 'positif-symptomatique-urgent',
        conseils: 'symptomes-actuels-positif-critique',
    },
    {
        description: 'Positif (antigénique) et symptômes actuels graves',
        profil: {
            symptomes_actuels: true,
            symptomes_actuels_souffle: true,
            depistage: true,
            depistage_type: 'antigenique',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_symptomes_actuels_graves',
        statut: 'positif-symptomatique-urgent',
        conseils: 'symptomes-actuels-positif-critique',
    },
    {
        description: 'Positif (PCR) et symptômes actuels',
        profil: {
            symptomes_actuels: true,
            symptomes_actuels_diarrhee: true,
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_symptomes_actuels',
        statut: 'symptomatique-positif',
        conseils: 'depistage-positif-symptomatique',
    },
    {
        description: 'Positif (antigénique) et symptômes actuels',
        profil: {
            symptomes_actuels: true,
            symptomes_actuels_diarrhee: true,
            depistage: true,
            depistage_type: 'antigenique',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_symptomes_actuels',
        statut: 'symptomatique-positif',
        conseils: 'depistage-positif-symptomatique',
    },
    {
        description: 'Positif (PCR) et symptômes passés',
        profil: {
            symptomes_passes: true,
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_symptomes_passes',
        statut: 'symptomatique-positif',
        conseils: 'symptomes-passes-positif',
    },
    {
        description: 'Positif (antigénique) et symptômes passés',
        profil: {
            symptomes_passes: true,
            depistage: true,
            depistage_type: 'antigenique',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_symptomes_passes',
        statut: 'symptomatique-positif',
        conseils: 'symptomes-passes-positif',
    },
    {
        description: 'Positif (PCR) et contact à risque (complètement vacciné)',
        profil: {
            vaccins: 'completement',
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_contact_a_risque_vaccine',
        statut: 'asymptomatique',
        conseils: 'depistage-positif-asymptomatique',
    },
    {
        description: 'Positif (antigénique) et contact à risque (complètement vacciné)',
        profil: {
            vaccins: 'completement',
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'antigenique',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_contact_a_risque_vaccine',
        statut: 'asymptomatique',
        conseils: 'depistage-positif-asymptomatique',
    },
    {
        description: 'Positif (PCR) et contact à risque (pas complètement vacciné)',
        profil: {
            vaccins: 'pas_encore',
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_contact_a_risque',
        statut: 'asymptomatique',
        conseils: 'depistage-positif-asymptomatique',
    },
    {
        description:
            'Positif (antigénique) et contact à risque (pas complètement vacciné)',
        profil: {
            vaccins: 'pas_encore',
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'antigenique',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_contact_a_risque',
        statut: 'asymptomatique',
        conseils: 'depistage-positif-asymptomatique',
    },
    {
        description:
            'Positif (PCR) et contact à risque même lieu de vie (complètement vacciné)',
        profil: {
            vaccins: 'completement',
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_contact_a_risque_meme_lieu_de_vie_vaccine',
        statut: 'asymptomatique',
        conseils: 'depistage-positif-asymptomatique',
    },
    {
        description:
            'Positif (antigénique) et contact à risque même lieu de vie (complètement vacciné)',
        profil: {
            vaccins: 'completement',
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'antigenique',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_contact_a_risque_meme_lieu_de_vie_vaccine',
        statut: 'asymptomatique',
        conseils: 'depistage-positif-asymptomatique',
    },
    {
        description:
            'Positif (PCR) et contact à risque même lieu de vie (pas complètement vacciné)',
        profil: {
            vaccins: 'pas_encore',
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_contact_a_risque_meme_lieu_de_vie',
        statut: 'asymptomatique',
        conseils: 'depistage-positif-asymptomatique',
    },
    {
        description:
            'Positif (antigénique) et contact à risque même lieu de vie (pas complètement vacciné)',
        profil: {
            vaccins: 'pas_encore',
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'antigenique',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_contact_a_risque_meme_lieu_de_vie',
        statut: 'asymptomatique',
        conseils: 'depistage-positif-asymptomatique',
    },
    {
        description: 'Positif (PCR) et contact pas vraiment à risque',
        profil: {
            contact_a_risque: true,
            contact_a_risque_autre: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_contact_pas_vraiment_a_risque',
        statut: 'asymptomatique',
        conseils: 'depistage-positif-asymptomatique',
    },
    {
        description: 'Positif (antigénique) et contact pas vraiment à risque',
        profil: {
            contact_a_risque: true,
            contact_a_risque_autre: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'antigenique',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_contact_pas_vraiment_a_risque',
        statut: 'asymptomatique',
        conseils: 'depistage-positif-asymptomatique',
    },
    {
        description: 'Positif (PCR) et symptômes actuels autres',
        profil: {
            symptomes_actuels: true,
            symptomes_actuels_autre: true,
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_asymptomatique',
        statut: 'asymptomatique',
        conseils: 'depistage-positif-asymptomatique',
    },
    {
        description: 'Positif (antigénique) et symptômes actuels autres',
        profil: {
            symptomes_actuels: true,
            symptomes_actuels_autre: true,
            depistage: true,
            depistage_type: 'antigenique',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_asymptomatique',
        statut: 'asymptomatique',
        conseils: 'depistage-positif-asymptomatique',
    },
    {
        description: 'Positif (PCR) et rien de tout ça',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_asymptomatique',
        statut: 'asymptomatique',
        conseils: 'depistage-positif-asymptomatique',
    },
    {
        description: 'Positif (antigénique) et rien de tout ça',
        profil: {
            depistage: true,
            depistage_type: 'antigenique',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'positif_asymptomatique',
        statut: 'asymptomatique',
        conseils: 'depistage-positif-asymptomatique',
    },
    {
        description: 'Positif (autotest) et symptômes actuels graves',
        profil: {
            symptomes_actuels: true,
            symptomes_actuels_souffle: true,
            depistage: true,
            depistage_type: 'antigenique_autotest',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'autotest_positif_symptomes_actuels_graves',
        statut: 'positif-symptomatique-urgent',
        conseils: 'symptomes-actuels-positif-critique',
    },
    {
        description: 'Positif (autotest) et symptômes actuels',
        profil: {
            symptomes_actuels: true,
            symptomes_actuels_diarrhee: true,
            depistage: true,
            depistage_type: 'antigenique_autotest',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'autotest_positif_symptomes_actuels',
        statut: 'symptomatique-autotest-positif',
        conseils: 'depistage-positif-autotest-symptomatique',
    },
    {
        description: 'Positif (autotest) et symptômes passés',
        profil: {
            symptomes_passes: true,
            depistage: true,
            depistage_type: 'antigenique_autotest',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'autotest_positif_symptomes_passes',
        statut: 'symptomatique-autotest-positif',
        conseils: 'symptomes-passes-positif-autotest',
    },
    {
        description: 'Positif (autotest) et contact à risque (complètement vacciné)',
        profil: {
            vaccins: 'completement',
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'antigenique_autotest',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'autotest_positif_contact_a_risque_vaccine',
        statut: 'asymptomatique-positif-autotest',
        conseils: 'depistage-positif-autotest-asymptomatique',
    },
    {
        description:
            'Positif (autotest) et contact à risque (pas complètement vacciné)',
        profil: {
            vaccins: 'pas_encore',
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'antigenique_autotest',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'autotest_positif_contact_a_risque',
        statut: 'asymptomatique-positif-autotest',
        conseils: 'depistage-positif-autotest-asymptomatique',
    },
    {
        description:
            'Positif (autotest) et contact à risque même lieu de vie (complètement vacciné)',
        profil: {
            vaccins: 'completement',
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'antigenique_autotest',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'autotest_positif_contact_a_risque_meme_lieu_de_vie_vaccine',
        statut: 'asymptomatique-positif-autotest',
        conseils: 'depistage-positif-autotest-asymptomatique',
    },
    {
        description:
            'Positif (autotest) et contact à risque même lieu de vie (pas complètement vacciné)',
        profil: {
            vaccins: 'pas_encore',
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'antigenique_autotest',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'autotest_positif_contact_a_risque_meme_lieu_de_vie',
        statut: 'asymptomatique-positif-autotest',
        conseils: 'depistage-positif-autotest-asymptomatique',
    },
    {
        description: 'Positif (autotest) et contact pas vraiment à risque',
        profil: {
            contact_a_risque: true,
            contact_a_risque_autre: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'antigenique_autotest',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'autotest_positif_contact_pas_vraiment_a_risque',
        statut: 'asymptomatique-positif-autotest',
        conseils: 'depistage-positif-autotest-asymptomatique',
    },
    {
        description: 'Positif (autotest) et rien de tout ça',
        profil: {
            depistage: true,
            depistage_type: 'antigenique_autotest',
            depistage_resultat: 'positif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'autotest_positif_asymptomatique',
        statut: 'asymptomatique-positif-autotest',
        conseils: 'depistage-positif-autotest-asymptomatique',
    },
    {
        description: 'Négatif et symptômes actuels graves',
        profil: {
            symptomes_actuels: true,
            symptomes_actuels_souffle: true,
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'negatif_symptomes_actuels_graves',
        statut: 'symptomatique-urgent',
        conseils: 'symptomes-actuels-sans-depistage-critique',
    },
    {
        description: 'Négatif et symptômes actuels',
        profil: {
            symptomes_actuels: true,
            symptomes_actuels_diarrhee: true,
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'negatif_symptomes_actuels',
        statut: 'symptomatique-negatif',
        conseils: null,
    },
    {
        description: 'Négatif antigénique et symptômes actuels',
        profil: {
            symptomes_actuels: true,
            symptomes_actuels_diarrhee: true,
            depistage: true,
            depistage_type: 'antigenique',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'negatif_symptomes_actuels',
        statut: 'symptomatique-negatif',
        conseils: null,
    },
    {
        description: 'Négatif antigénique et symptômes actuels et fragile',
        profil: {
            symptomes_actuels: true,
            symptomes_actuels_diarrhee: true,
            depistage: true,
            depistage_type: 'antigenique',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
            age: 70,
        },
        situation: 'antigenique_negatif_fragile_symptomes_actuels',
        statut: 'antigenique-negatif-fragile',
        conseils: 'antigenique-negatif-fragile',
    },
    {
        description: 'Négatif et symptômes passés',
        profil: {
            symptomes_passes: true,
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'negatif_symptomes_passes',
        statut: 'peu-de-risques',
        conseils: 'peu-de-risques',
    },
    {
        description: 'Négatif antigénique et symptômes passés',
        profil: {
            symptomes_passes: true,
            depistage: true,
            depistage_type: 'antigenique',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'negatif_symptomes_passes',
        statut: 'peu-de-risques',
        conseils: 'peu-de-risques',
    },
    {
        description: 'Négatif et symptômes passés + personne fragile',
        profil: {
            symptomes_passes: true,
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
            age: 70,
        },
        situation: 'negatif_symptomes_passes',
        statut: 'personne-fragile',
        conseils: 'peu-de-risques',
    },
    {
        description: 'Négatif antigénique et symptômes passés + personne fragile',
        profil: {
            symptomes_passes: true,
            depistage: true,
            depistage_type: 'antigenique',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
            age: 70,
        },
        situation: 'antigenique_negatif_fragile_symptomes_passes',
        statut: 'antigenique-negatif-fragile',
        conseils: 'antigenique-negatif-fragile',
    },
    {
        description: 'Négatif et symptômes passés',
        profil: {
            symptomes_passes: true,
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'negatif_symptomes_passes',
        statut: 'peu-de-risques',
        conseils: 'peu-de-risques',
    },
    {
        description: 'Négatif et contact à risque (complètement vacciné)',
        profil: {
            vaccins: 'completement',
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'negatif_contact_a_risque_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description: 'Négatif et contact à risque (moins de 12 ans)',
        profil: {
            age: 11,
            vaccins: 'pas_encore',
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'negatif_contact_a_risque_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description: 'Négatif et contact à risque (pas complètement vacciné)',
        profil: {
            vaccins: 'pas_encore',
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'negatif_contact_a_risque',
        statut: 'contact-a-risque-non-vaccine',
        conseils: 'contact-a-risque-non-vaccine',
    },
    {
        description:
            'Négatif et contact à risque même lieu de vie (complètement vacciné)',
        profil: {
            vaccins: 'completement',
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'negatif_contact_a_risque_meme_lieu_de_vie_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description: 'Négatif et contact à risque même lieu de vie (moins de 12 ans)',
        profil: {
            age: 11,
            vaccins: 'pas_encore',
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'negatif_contact_a_risque_meme_lieu_de_vie_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description:
            'Négatif et contact à risque même lieu de vie (pas complètement vacciné)',
        profil: {
            vaccins: 'pas_encore',
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'negatif_contact_a_risque_meme_lieu_de_vie',
        statut: 'contact-a-risque-non-vaccine',
        conseils: 'contact-a-risque-non-vaccine',
    },
    {
        description: 'Négatif et contact pas vraiment à risque',
        profil: {
            contact_a_risque: true,
            contact_a_risque_autre: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'negatif_contact_pas_vraiment_a_risque',
        statut: 'peu-de-risques',
        conseils: 'contact-a-risque-autre',
    },
    {
        description: 'Négatif et contact pas vraiment à risque + personne fragile',
        profil: {
            contact_a_risque: true,
            contact_a_risque_autre: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
            age: 70,
        },
        situation: 'negatif_contact_pas_vraiment_a_risque',
        statut: 'personne-fragile',
        conseils: 'contact-a-risque-autre',
    },
    {
        description: 'Négatif et contact pas vraiment à risque',
        profil: {
            contact_a_risque: true,
            contact_a_risque_autre: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'negatif_contact_pas_vraiment_a_risque',
        statut: 'peu-de-risques',
        conseils: 'contact-a-risque-autre',
    },
    {
        description: 'Négatif et rien de tout ça',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'negatif_asymptomatique',
        statut: 'peu-de-risques',
        conseils: 'peu-de-risques',
    },
    {
        description: 'Négatif et rien de tout ça + personne fragile',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
            age: 70,
        },
        situation: 'negatif_asymptomatique',
        statut: 'personne-fragile',
        conseils: 'peu-de-risques',
    },
    {
        description: 'Négatif et rien de tout ça + foyer fragile',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'negatif_asymptomatique',
        statut: 'peu-de-risques',
        conseils: 'peu-de-risques',
    },
    {
        description: 'En attente et symptômes actuels graves',
        profil: {
            symptomes_actuels: true,
            symptomes_actuels_souffle: true,
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'en_attente',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'en_attente_symptomes_actuels_graves',
        statut: 'symptomatique-urgent',
        conseils: 'symptomes-actuels-sans-depistage-critique',
    },
    {
        description: 'En attente et symptômes actuels',
        profil: {
            symptomes_actuels: true,
            symptomes_actuels_diarrhee: true,
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'en_attente',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'en_attente_symptomes_actuels',
        statut: 'symptomatique-en-attente',
        conseils: 'symptomes-actuels-en-attente',
    },
    {
        description: 'En attente et symptômes passés',
        profil: {
            symptomes_passes: true,
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'en_attente',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'en_attente_symptomes_passes',
        statut: 'symptomatique-en-attente',
        conseils: 'symptomes-passes-en-attente',
    },
    {
        description: 'En attente et contact à risque (complètement vacciné)',
        profil: {
            vaccins: 'completement',
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'en_attente',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'en_attente_contact_a_risque_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description: 'En attente et contact à risque (moins de 12 ans)',
        profil: {
            age: 11,
            vaccins: 'pas_encore',
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'en_attente',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'en_attente_contact_a_risque_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description: 'En attente et contact à risque (pas complètement vacciné)',
        profil: {
            vaccins: 'pas_encore',
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'en_attente',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'en_attente_contact_a_risque',
        statut: 'contact-a-risque-non-vaccine',
        conseils: 'contact-a-risque-non-vaccine',
    },
    {
        description:
            'En attente et contact à risque même lieu de vie (complètement vacciné)',
        profil: {
            vaccins: 'completement',
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'en_attente',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'en_attente_contact_a_risque_meme_lieu_de_vie_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description:
            'En attente et contact à risque même lieu de vie (moins de 12 ans)',
        profil: {
            age: 11,
            vaccins: 'pas_encore',
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'en_attente',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'en_attente_contact_a_risque_meme_lieu_de_vie_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description:
            'En attente et contact à risque même lieu de vie (pas complètement vacciné)',
        profil: {
            vaccins: 'pas_encore',
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'en_attente',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'en_attente_contact_a_risque_meme_lieu_de_vie',
        statut: 'contact-a-risque-non-vaccine',
        conseils: 'contact-a-risque-non-vaccine',
    },
    {
        description: 'En attente et contact pas vraiment à risque',
        profil: {
            contact_a_risque: true,
            contact_a_risque_autre: true,
            contact_a_risque_variante: 'aucune',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'en_attente',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'en_attente_contact_pas_vraiment_a_risque',
        statut: 'en-attente',
        conseils: 'contact-a-risque-autre',
    },
    {
        description: 'En attente et rien de tout ça',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'en_attente',
            _depistage_start_date: new Date().toJSON(),
        },
        situation: 'en_attente_asymptomatique',
        statut: 'en-attente',
        conseils: null,
    },
    {
        description: 'Pas testé et symptômes actuels graves',
        profil: {
            symptomes_actuels: true,
            symptomes_actuels_souffle: true,
            depistage: false,
        },
        situation: 'pas_teste_symptomes_actuels_graves',
        statut: 'symptomatique-urgent',
        conseils: 'symptomes-actuels-sans-depistage-critique',
    },
    {
        description: 'Pas testé et symptômes actuels',
        profil: {
            symptomes_actuels: true,
            symptomes_actuels_diarrhee: true,
            depistage: false,
        },
        situation: 'pas_teste_symptomes_actuels',
        statut: 'symptomatique-sans-test',
        conseils: 'symptomes-actuels-sans-depistage',
    },
    {
        description: 'Pas testé et symptômes passés',
        profil: {
            symptomes_passes: true,
            depistage: false,
        },
        situation: 'pas_teste_symptomes_passes',
        statut: 'symptomatique-sans-test',
        conseils: 'symptomes-passes-sans-depistage',
    },
    {
        description: 'Pas testé et contact à risque (complètement vacciné)',
        profil: {
            vaccins: 'completement',
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
            depistage: false,
        },
        situation: 'pas_teste_contact_a_risque_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description: 'Pas testé et contact à risque (moins de 12 ans)',
        profil: {
            age: 11,
            vaccins: 'pas_encore',
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
            depistage: false,
        },
        situation: 'pas_teste_contact_a_risque_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description: 'Pas testé et contact à risque (guérison < 2 mois)',
        profil: {
            vaccins: 'pas_encore',
            covid_passee: true,
            _covid_passee_date: joursAvant(55),
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
            depistage: false,
        },
        situation: 'pas_teste_contact_pas_vraiment_a_risque',
        statut: 'peu-de-risques',
        conseils: 'contact-a-risque-autre',
    },
    {
        description: 'Pas testé et contact à risque (guérison > 2 mois)',
        profil: {
            vaccins: 'pas_encore',
            covid_passee: true,
            _covid_passee_date: joursAvant(65),
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
            depistage: false,
        },
        situation: 'pas_teste_contact_a_risque',
        statut: 'contact-a-risque-non-vaccine',
        conseils: 'contact-a-risque-non-vaccine',
    },
    {
        description: 'Pas testé et contact à risque (pas complètement vacciné)',
        profil: {
            vaccins: 'pas_encore',
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
            depistage: false,
        },
        situation: 'pas_teste_contact_a_risque',
        statut: 'contact-a-risque-non-vaccine',
        conseils: 'contact-a-risque-non-vaccine',
    },
    {
        description:
            'Pas testé et contact à risque même lieu de vie (complètement vacciné)',
        profil: {
            vaccins: 'completement',
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
            depistage: false,
        },
        situation: 'pas_teste_contact_a_risque_meme_lieu_de_vie_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description: 'Pas testé et contact à risque même lieu de vie (moins de 12 ans)',
        profil: {
            age: 11,
            vaccins: 'pas_encore',
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
            depistage: false,
        },
        situation: 'pas_teste_contact_a_risque_meme_lieu_de_vie_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description:
            'Pas testé et contact à risque même lieu de vie (pas complètement vacciné)',
        profil: {
            vaccins: 'pas_encore',
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
            depistage: false,
        },
        situation: 'pas_teste_contact_a_risque_meme_lieu_de_vie',
        statut: 'contact-a-risque-non-vaccine',
        conseils: 'contact-a-risque-non-vaccine',
    },
    {
        description: 'Pas testé et contact pas vraiment à risque',
        profil: {
            contact_a_risque: true,
            contact_a_risque_autre: true,
            contact_a_risque_variante: 'aucune',
            depistage: false,
        },
        situation: 'pas_teste_contact_pas_vraiment_a_risque',
        statut: 'peu-de-risques',
        conseils: 'contact-a-risque-autre',
    },
    {
        description: 'Pas testé et contact pas vraiment à risque + personne fragile',
        profil: {
            contact_a_risque: true,
            contact_a_risque_autre: true,
            contact_a_risque_variante: 'aucune',
            depistage: false,
            age: 70,
        },
        situation: 'pas_teste_contact_pas_vraiment_a_risque',
        statut: 'personne-fragile',
        conseils: 'contact-a-risque-autre',
    },
    {
        description: 'Pas testé et contact pas vraiment à risque',
        profil: {
            contact_a_risque: true,
            contact_a_risque_autre: true,
            contact_a_risque_variante: 'aucune',
            depistage: false,
        },
        situation: 'pas_teste_contact_pas_vraiment_a_risque',
        statut: 'peu-de-risques',
        conseils: 'contact-a-risque-autre',
    },
    {
        description: 'Pas testé et rien de tout ça',
        profil: {},
        situation: 'pas_teste_asymptomatique',
        statut: 'peu-de-risques',
        conseils: 'peu-de-risques',
    },
    {
        description: 'Pas testé et rien de tout ça + personne fragile',
        profil: {
            age: 70,
        },
        situation: 'pas_teste_asymptomatique',
        statut: 'personne-fragile',
        conseils: 'peu-de-risques',
    },
    {
        description: 'Test négatif obsolète et symptômes actuels graves',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: joursAvant(7),
            symptomes_actuels: true,
            symptomes_actuels_souffle: true,
        },
        situation: 'pas_teste_symptomes_actuels_graves',
        statut: 'symptomatique-urgent',
        conseils: 'symptomes-actuels-sans-depistage-critique',
    },
    {
        description: 'Test négatif obsolète et symptômes actuels',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: joursAvant(7),
            symptomes_actuels: true,
            symptomes_actuels_diarrhee: true,
        },
        situation: 'pas_teste_symptomes_actuels',
        statut: 'symptomatique-sans-test',
        conseils: 'symptomes-actuels-sans-depistage',
    },
    {
        description: 'Test négatif obsolète et symptômes passés',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: joursAvant(7),
            symptomes_passes: true,
        },
        situation: 'pas_teste_symptomes_passes',
        statut: 'symptomatique-sans-test',
        conseils: 'symptomes-passes-sans-depistage',
    },
    {
        description: 'Test négatif obsolète et contact à risque (complètement vacciné)',
        profil: {
            vaccins: 'completement',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: joursAvant(7),
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
        },
        situation: 'pas_teste_contact_a_risque_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description: 'Test négatif obsolète et contact à risque (moins de 12 ans)',
        profil: {
            age: 11,
            vaccins: 'pas_encore',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: joursAvant(7),
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
        },
        situation: 'pas_teste_contact_a_risque_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description:
            'Test négatif obsolète et contact à risque (pas complètement vacciné)',
        profil: {
            vaccins: 'pas_encore',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: joursAvant(7),
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
        },
        situation: 'pas_teste_contact_a_risque',
        statut: 'contact-a-risque-non-vaccine',
        conseils: 'contact-a-risque-non-vaccine',
    },
    {
        description:
            'Test négatif obsolète et contact à risque même lieu de vie (complètement vacciné)',
        profil: {
            vaccins: 'completement',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: joursAvant(7),
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
        },
        situation: 'pas_teste_contact_a_risque_meme_lieu_de_vie_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description:
            'Test négatif obsolète et contact à risque même lieu de vie (moins de 12 ans)',
        profil: {
            age: 11,
            vaccins: 'pas_encore',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: joursAvant(7),
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
        },
        situation: 'pas_teste_contact_a_risque_meme_lieu_de_vie_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description:
            'Test négatif obsolète et contact à risque même lieu de vie (pas complètement vacciné)',
        profil: {
            vaccins: 'pas_encore',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: joursAvant(7),
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
        },
        situation: 'pas_teste_contact_a_risque_meme_lieu_de_vie',
        statut: 'contact-a-risque-non-vaccine',
        conseils: 'contact-a-risque-non-vaccine',
    },
    {
        description: 'Test négatif obsolète et contact pas vraiment à risque',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: joursAvant(7),
            contact_a_risque: true,
            contact_a_risque_autre: true,
            contact_a_risque_variante: 'aucune',
        },
        situation: 'pas_teste_contact_pas_vraiment_a_risque',
        statut: 'peu-de-risques',
        conseils: 'contact-a-risque-autre',
    },
    {
        description:
            'Test négatif obsolète et contact pas vraiment à risque + personne fragile',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: joursAvant(7),
            contact_a_risque: true,
            contact_a_risque_autre: true,
            contact_a_risque_variante: 'aucune',
            age: 70,
        },
        situation: 'pas_teste_contact_pas_vraiment_a_risque',
        statut: 'personne-fragile',
        conseils: 'contact-a-risque-autre',
    },
    {
        description: 'Test négatif obsolète et contact pas vraiment à risque',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: joursAvant(7),
            contact_a_risque: true,
            contact_a_risque_autre: true,
            contact_a_risque_variante: 'aucune',
        },
        situation: 'pas_teste_contact_pas_vraiment_a_risque',
        statut: 'peu-de-risques',
        conseils: 'contact-a-risque-autre',
    },
    {
        description: 'Test négatif obsolète et rien de tout ça',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: joursAvant(7),
        },
        situation: 'pas_teste_asymptomatique',
        statut: 'peu-de-risques',
        conseils: 'peu-de-risques',
    },
    {
        description: 'Test négatif obsolète et rien de tout ça + personne fragile',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'negatif',
            _depistage_start_date: joursAvant(7),
            age: 70,
        },
        situation: 'pas_teste_asymptomatique',
        statut: 'personne-fragile',
        conseils: 'peu-de-risques',
    },
    {
        description: 'Test positif obsolète et symptômes actuels graves',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: joursAvant(30),
            symptomes_actuels: true,
            symptomes_actuels_souffle: true,
        },
        situation: 'pas_teste_symptomes_actuels_graves',
        statut: 'symptomatique-urgent',
        conseils: 'symptomes-actuels-sans-depistage-critique',
    },
    {
        description: 'Test positif obsolète et symptômes actuels',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: joursAvant(30),
            symptomes_actuels: true,
            symptomes_actuels_diarrhee: true,
        },
        situation: 'pas_teste_symptomes_actuels',
        statut: 'symptomatique-sans-test',
        conseils: 'symptomes-actuels-sans-depistage',
    },
    {
        description: 'Test positif obsolète et symptômes passés',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: joursAvant(30),
            symptomes_passes: true,
        },
        situation: 'pas_teste_symptomes_passes',
        statut: 'symptomatique-sans-test',
        conseils: 'symptomes-passes-sans-depistage',
    },
    {
        description: 'Test positif obsolète et contact à risque (complètement vacciné)',
        profil: {
            vaccins: 'completement',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: joursAvant(30),
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
        },
        situation: 'pas_teste_contact_a_risque_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description: 'Test positif obsolète et contact à risque (moins de 12 ans)',
        profil: {
            age: 11,
            vaccins: 'pas_encore',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: joursAvant(30),
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
        },
        situation: 'pas_teste_contact_a_risque_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description:
            'Test positif obsolète et contact à risque (pas complètement vacciné)',
        profil: {
            vaccins: 'pas_encore',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: joursAvant(30),
            contact_a_risque: true,
            contact_a_risque_contact_direct: true,
            contact_a_risque_variante: 'aucune',
        },
        situation: 'pas_teste_contact_a_risque',
        statut: 'contact-a-risque-non-vaccine',
        conseils: 'contact-a-risque-non-vaccine',
    },
    {
        description:
            'Test positif obsolète et contact à risque même lieu de vie (complètement vacciné)',
        profil: {
            vaccins: 'completement',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: joursAvant(30),
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
        },
        situation: 'pas_teste_contact_a_risque_meme_lieu_de_vie_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description:
            'Test positif obsolète et contact à risque même lieu de vie (moins de 12 ans)',
        profil: {
            age: 11,
            vaccins: 'pas_encore',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: joursAvant(30),
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
        },
        situation: 'pas_teste_contact_a_risque_meme_lieu_de_vie_vaccine',
        statut: 'contact-a-risque-vaccine',
        conseils: 'contact-a-risque-vaccine',
    },
    {
        description:
            'Test positif obsolète et contact à risque même lieu de vie (pas complètement vacciné)',
        profil: {
            vaccins: 'pas_encore',
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: joursAvant(30),
            contact_a_risque: true,
            contact_a_risque_meme_lieu_de_vie: true,
            contact_a_risque_variante: 'aucune',
        },
        situation: 'pas_teste_contact_a_risque_meme_lieu_de_vie',
        statut: 'contact-a-risque-non-vaccine',
        conseils: 'contact-a-risque-non-vaccine',
    },
    {
        description: 'Test positif obsolète et contact pas vraiment à risque',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: joursAvant(30),
            contact_a_risque: true,
            contact_a_risque_autre: true,
            contact_a_risque_variante: 'aucune',
        },
        situation: 'pas_teste_contact_pas_vraiment_a_risque',
        statut: 'peu-de-risques',
        conseils: 'contact-a-risque-autre',
    },
    {
        description:
            'Test positif obsolète et contact pas vraiment à risque + personne fragile',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: joursAvant(30),
            contact_a_risque: true,
            contact_a_risque_autre: true,
            contact_a_risque_variante: 'aucune',
            age: 70,
        },
        situation: 'pas_teste_contact_pas_vraiment_a_risque',
        statut: 'personne-fragile',
        conseils: 'contact-a-risque-autre',
    },
    {
        description: 'Test positif obsolète et contact pas vraiment à risque',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: joursAvant(30),
            contact_a_risque: true,
            contact_a_risque_autre: true,
            contact_a_risque_variante: 'aucune',
        },
        situation: 'pas_teste_contact_pas_vraiment_a_risque',
        statut: 'peu-de-risques',
        conseils: 'contact-a-risque-autre',
    },
    {
        description: 'Test positif obsolète et rien de tout ça',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: joursAvant(30),
        },
        situation: 'pas_teste_asymptomatique',
        statut: 'peu-de-risques',
        conseils: 'peu-de-risques',
    },
    {
        description: 'Test positif obsolète et rien de tout ça + personne fragile',
        profil: {
            depistage: true,
            depistage_type: 'rt-pcr',
            depistage_resultat: 'positif',
            _depistage_start_date: joursAvant(30),
            age: 70,
        },
        situation: 'pas_teste_asymptomatique',
        statut: 'personne-fragile',
        conseils: 'peu-de-risques',
    },
]

describe('Situation, statut et conseils personnels selon profil', function () {
    itParam('${value.description}', matrice, function (cas) {
        const profil = createProfil(cas.profil)
        assert.isTrue(profil.isComplete())

        const algo = new AlgorithmeOrientation(profil)
        assert.equal(algo.situation, cas.situation)
        assert.deepEqual(algo.statutEtConseils, {
            statut: cas.statut,
            conseils: cas.conseils,
        })
    })
})
